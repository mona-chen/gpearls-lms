{"version":"3.13.5","examples":[{"id":"./spec/lib/utils_spec.rb[1:1:1:1]","description":"keeps simple slugs unchanged","full_description":"LMS Utils slugify function simple slugification keeps simple slugs unchanged","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":8,"run_time":0.014599625,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:1:2]","description":"converts spaces to hyphens","full_description":"LMS Utils slugify function simple slugification converts spaces to hyphens","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":12,"run_time":0.000542979,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:1:3]","description":"removes special characters","full_description":"LMS Utils slugify function simple slugification removes special characters","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":16,"run_time":0.000347122,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:1:4]","description":"handles multiple spaces","full_description":"LMS Utils slugify function simple slugification handles multiple spaces","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":20,"run_time":0.000292716,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:1:5]","description":"handles mixed case and special characters","full_description":"LMS Utils slugify function simple slugification handles mixed case and special characters","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":24,"run_time":0.000309373,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:1:6]","description":"trims leading and trailing spaces","full_description":"LMS Utils slugify function simple slugification trims leading and trailing spaces","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":28,"run_time":0.000288681,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:1:7]","description":"handles empty string","full_description":"LMS Utils slugify function simple slugification handles empty string","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":32,"run_time":0.00026336,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:1:8]","description":"handles nil input","full_description":"LMS Utils slugify function simple slugification handles nil input","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":36,"run_time":0.000409269,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:2:1]","description":"adds suffix for first duplicate","full_description":"LMS Utils slugify function duplicate handling adds suffix for first duplicate","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":42,"run_time":0.000310976,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:2:2]","description":"increments suffix for multiple duplicates","full_description":"LMS Utils slugify function duplicate handling increments suffix for multiple duplicates","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":47,"run_time":0.000275771,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:2:3]","description":"handles gaps in numbering","full_description":"LMS Utils slugify function duplicate handling handles gaps in numbering","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":52,"run_time":0.000293148,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:2:4]","description":"handles complex existing patterns","full_description":"LMS Utils slugify function duplicate handling handles complex existing patterns","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":57,"run_time":0.000269469,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:3:1]","description":"handles numbers in original text","full_description":"LMS Utils slugify function edge cases handles numbers in original text","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":64,"run_time":0.000278115,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:1:3:2]","description":"handles unicode characters","full_description":"LMS Utils slugify function edge cases handles unicode characters","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":68,"run_time":0.001350178,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: \"cafe-francais\"\n     got: \"caf-franais\"\n\n(compared using ==)\n","backtrace":["./spec/lib/utils_spec.rb:69:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:1:3:3]","description":"handles very long titles","full_description":"LMS Utils slugify function edge cases handles very long titles","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":72,"run_time":0.000360603,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:2:1:1]","description":"returns nil when user not enrolled","full_description":"LMS Utils membership utilities get_membership returns nil when user not enrolled","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":86,"run_time":0.308954467,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:2:1:2]","description":"returns enrollment when user enrolled","full_description":"LMS Utils membership utilities get_membership returns enrollment when user enrolled","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":90,"run_time":0.03814447,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:2:2:1]","description":"returns false when user not enrolled","full_description":"LMS Utils membership utilities is_enrolled returns false when user not enrolled","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":97,"run_time":0.01569847,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:2:2:2]","description":"returns true when user enrolled","full_description":"LMS Utils membership utilities is_enrolled returns true when user enrolled","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":101,"run_time":0.01696113,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:3:1:1]","description":"returns chapters in order","full_description":"LMS Utils course utilities get_chapters returns chapters in order","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":118,"run_time":0.01654456,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course_chapters' for an instance of Course","backtrace":["./spec/lib/utils_spec.rb:385:in `get_chapters'","./spec/lib/utils_spec.rb:119:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:3:1:2]","description":"returns empty array for course without chapters","full_description":"LMS Utils course utilities get_chapters returns empty array for course without chapters","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":124,"run_time":0.017590451,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course_chapters' for an instance of Course","backtrace":["./spec/lib/utils_spec.rb:385:in `get_chapters'","./spec/lib/utils_spec.rb:126:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:3:2:1]","description":"returns lessons for a chapter","full_description":"LMS Utils course utilities get_lessons returns lessons for a chapter","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":135,"run_time":0.027655121,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/lib/utils_spec.rb:132:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:3:2:2]","description":"returns lessons in order","full_description":"LMS Utils course utilities get_lessons returns lessons in order","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":141,"run_time":0.01981228,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/lib/utils_spec.rb:132:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:3:3:1]","description":"returns lesson with progress information","full_description":"LMS Utils course utilities get_lesson_details returns lesson with progress information","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":151,"run_time":0.061207423,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/lib/utils_spec.rb:148:in `block (4 levels) in \u003ctop (required)\u003e'","./spec/lib/utils_spec.rb:153:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:3:3:2]","description":"handles user without enrollment","full_description":"LMS Utils course utilities get_lesson_details handles user without enrollment","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":160,"run_time":0.020279269,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/lib/utils_spec.rb:148:in `block (4 levels) in \u003ctop (required)\u003e'","./spec/lib/utils_spec.rb:161:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:4:1:1]","description":"returns 0 for user with no progress","full_description":"LMS Utils progress utilities get_progress returns 0 for user with no progress","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":177,"run_time":0.019649725,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/lib/utils_spec.rb:172:in `block (3 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:4:1:2]","description":"calculates correct progress percentage","full_description":"LMS Utils progress utilities get_progress calculates correct progress percentage","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":182,"run_time":0.019787311,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/lib/utils_spec.rb:172:in `block (3 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:4:1:3]","description":"returns 100 for completed course","full_description":"LMS Utils progress utilities get_progress returns 100 for completed course","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":190,"run_time":0.021218584,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/lib/utils_spec.rb:172:in `block (3 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:5:1:1]","description":"returns 0 for course with no reviews","full_description":"LMS Utils rating utilities get_average_rating returns 0 for course with no reviews","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":205,"run_time":0.012997925,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: lms_course_reviews.course_id","backtrace":["./spec/lib/utils_spec.rb:415:in `get_average_rating'","./spec/lib/utils_spec.rb:206:in `block (4 levels) in \u003ctop (required)\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: lms_course_reviews.course_id","  ./spec/lib/utils_spec.rb:415:in `get_average_rating'"]}},{"id":"./spec/lib/utils_spec.rb[1:5:1:2]","description":"calculates correct average rating","full_description":"LMS Utils rating utilities get_average_rating calculates correct average rating","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":210,"run_time":0.019176477,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/lib/utils_spec.rb:211:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:5:1:3]","description":"handles single review","full_description":"LMS Utils rating utilities get_average_rating handles single review","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":219,"run_time":0.013988671,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/lib/utils_spec.rb:220:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:5:2:1]","description":"returns reviews for course","full_description":"LMS Utils rating utilities get_reviews returns reviews for course","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":231,"run_time":0.014183306,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/lib/utils_spec.rb:228:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:5:2:2]","description":"returns reviews in chronological order by default","full_description":"LMS Utils rating utilities get_reviews returns reviews in chronological order by default","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":237,"run_time":0.01402559,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/lib/utils_spec.rb:228:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:5:3:1]","description":"sorts reviews by rating descending","full_description":"LMS Utils rating utilities get_sorted_reviews sorts reviews by rating descending","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":250,"run_time":0.013812898,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/lib/utils_spec.rb:245:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:5:3:2]","description":"sorts reviews by date descending","full_description":"LMS Utils rating utilities get_sorted_reviews sorts reviews by date descending","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":256,"run_time":0.013830194,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/lib/utils_spec.rb:245:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:6:1:1]","description":"returns empty array for course without instructors","full_description":"LMS Utils instructor utilities get_instructors returns empty array for course without instructors","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":269,"run_time":0.008802117,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: []\n     got: [\"Rufus Parker\"]\n\n(compared using ==)\n","backtrace":["./spec/lib/utils_spec.rb:271:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:6:1:2]","description":"returns course instructors","full_description":"LMS Utils instructor utilities get_instructors returns course instructors","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":274,"run_time":0.022092528,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected [\"Stanton Wisozk\"] to include #\u003cUser id: 2, email: [FILTERED], first_name: \"Iesha\", last_name: \"Kuhn\", full_name: \"Van Greenfelder\"...ti: nil, persona_captured_at: nil, persona_role: nil, persona_use_case: nil, persona_responses: nil\u003e\nDiff:\n@@ -1 +1 @@\n-[#\u003cUser id: 2, email: [FILTERED], first_name: \"Iesha\", last_name: \"Kuhn\", full_name: \"Van Greenfelder\", username: \"corina_jaskolski\", password_digest: [FILTERED], role: \"LMS Student\", status: \"Active\", phone: nil, mobile_no: nil, birth_date: nil, gender: nil, bio: nil, profile_image: \"http://green.test/albina_wiza\", timezone: \"UTC\", language: \"English\", country: nil, city: nil, address: nil, postal_code: nil, company: nil, job_title: nil, department: nil, website: nil, linkedin_profile: nil, twitter_profile: nil, email_verified: [FILTERED], email_verified_at: nil, verification_token: nil, last_login_at: nil, last_login_ip: nil, current_login_at: nil, current_login_ip: nil, login_count: 0, receive_email_notifications: [FILTERED], receive_sms_notifications: false, notification_preferences: nil, preferences: nil, skills: nil, interests: nil, rating: 0.0, reviews_count: 0, courses_created_count: 0, students_taught_count: 0, social_links: nil, custom_fields: nil, deactivated_at: nil, deactivation_reason: nil, is_mentor: false, is_instructor: false, is_admin: false, created_at: \"2025-11-25 10:31:05.557551000 +0000\", updated_at: \"2025-11-25 10:31:05.557551000 +0000\", is_moderator: false, is_evaluator: false, jti: nil, persona_captured_at: nil, persona_role: nil, persona_use_case: nil, persona_responses: nil\u003e]\n+[\"Stanton Wisozk\"]\n","backtrace":["./spec/lib/utils_spec.rb:277:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:6:2:1]","description":"returns false for non-instructor user","full_description":"LMS Utils instructor utilities is_instructor returns false for non-instructor user","status":"passed","file_path":"./spec/lib/utils_spec.rb","line_number":282,"run_time":0.01468613,"pending_message":null},{"id":"./spec/lib/utils_spec.rb[1:6:2:2]","description":"returns true for course instructor","full_description":"LMS Utils instructor utilities is_instructor returns true for course instructor","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":287,"run_time":0.013760826,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected: truthy value\n     got: false","backtrace":["./spec/lib/utils_spec.rb:289:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:7:1:1]","description":"returns correct icon for article lesson","full_description":"LMS Utils lesson utilities get_lesson_icon returns correct icon for article lesson","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":300,"run_time":0.018690039,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `lesson_type=' for an instance of CourseLesson","backtrace":["./spec/lib/utils_spec.rb:297:in `block (3 levels) in \u003ctop (required)\u003e'","./spec/lib/utils_spec.rb:301:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:7:1:2]","description":"returns correct icon for video lesson","full_description":"LMS Utils lesson utilities get_lesson_icon returns correct icon for video lesson","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":306,"run_time":0.018223591,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `lesson_type=' for an instance of CourseLesson","backtrace":["./spec/lib/utils_spec.rb:297:in `block (3 levels) in \u003ctop (required)\u003e'","./spec/lib/utils_spec.rb:307:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:7:1:3]","description":"returns correct icon for quiz lesson","full_description":"LMS Utils lesson utilities get_lesson_icon returns correct icon for quiz lesson","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":312,"run_time":0.018686774,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `lesson_type=' for an instance of CourseLesson","backtrace":["./spec/lib/utils_spec.rb:297:in `block (3 levels) in \u003ctop (required)\u003e'","./spec/lib/utils_spec.rb:313:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:7:1:4]","description":"returns default icon for unknown lesson type","full_description":"LMS Utils lesson utilities get_lesson_icon returns default icon for unknown lesson type","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":318,"run_time":0.018764435,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `lesson_type=' for an instance of CourseLesson","backtrace":["./spec/lib/utils_spec.rb:297:in `block (3 levels) in \u003ctop (required)\u003e'","./spec/lib/utils_spec.rb:319:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:7:2:1]","description":"returns correct lesson index","full_description":"LMS Utils lesson utilities get_lesson_index returns correct lesson index","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":329,"run_time":0.026047149,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/lib/utils_spec.rb:326:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:7:3:1]","description":"generates correct lesson URL","full_description":"LMS Utils lesson utilities get_lesson_url generates correct lesson URL","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":336,"run_time":0.017828124,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `lesson_type=' for an instance of CourseLesson","backtrace":["./spec/lib/utils_spec.rb:297:in `block (3 levels) in \u003ctop (required)\u003e'","./spec/lib/utils_spec.rb:337:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/lib/utils_spec.rb[1:7:3:2]","description":"handles course with special characters in name","full_description":"LMS Utils lesson utilities get_lesson_url handles course with special characters in name","status":"failed","file_path":"./spec/lib/utils_spec.rb","line_number":342,"run_time":0.008138462,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'name' for Course.","backtrace":["./spec/lib/utils_spec.rb:343:in `block (4 levels) in \u003ctop (required)\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `name=' for an instance of Course","  ./spec/lib/utils_spec.rb:343:in `block (4 levels) in \u003ctop (required)\u003e'"]}},{"id":"./spec/models/batch_spec.rb[1:1:1]","description":"is valid with valid attributes","full_description":"Batch validations is valid with valid attributes","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":9,"run_time":0.054225867,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:1:2]","description":"is invalid without a title","full_description":"Batch validations is invalid without a title","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":13,"run_time":0.019606679,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:1:3]","description":"is invalid without a course","full_description":"Batch validations is invalid without a course","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":18,"run_time":0.016476814,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:1:4]","description":"generates a slug from title","full_description":"Batch validations generates a slug from title","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":23,"run_time":0.024688,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:1:5]","description":"handles duplicate slugs","full_description":"Batch validations handles duplicate slugs","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":28,"run_time":0.031753977,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:2:1]","description":"belongs to course","full_description":"Batch associations belongs to course","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":36,"run_time":0.014345929,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:2:2]","description":"belongs to instructor","full_description":"Batch associations belongs to instructor","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":40,"run_time":0.013710006,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:2:3]","description":"has many batch_enrollments","full_description":"Batch associations has many batch_enrollments","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":44,"run_time":0.013567604,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:2:4]","description":"has many students through batch_enrollments","full_description":"Batch associations has many students through batch_enrollments","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":48,"run_time":0.013662612,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:2:5]","description":"has many live_classes","full_description":"Batch associations has many live_classes","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":52,"run_time":0.013279515,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:3:1]","description":"allows student enrollment","full_description":"Batch enrollment management allows student enrollment","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":64,"run_time":0.041633755,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:3:2]","description":"prevents duplicate enrollments","full_description":"Batch enrollment management prevents duplicate enrollments","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":72,"run_time":0.027389937,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:3:3]","description":"tracks enrollment date","full_description":"Batch enrollment management tracks enrollment date","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":80,"run_time":0.026724206,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:4:1]","description":"returns correct student count","full_description":"Batch#student_count returns correct student count","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":89,"run_time":0.045408336,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:4:2]","description":"returns 0 for batch with no students","full_description":"Batch#student_count returns 0 for batch with no students","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":94,"run_time":0.01627553,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:5:1]","description":"returns false for unpublished batch","full_description":"Batch#is_published? returns false for unpublished batch","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":100,"run_time":0.013429527,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:5:2]","description":"returns true for published batch","full_description":"Batch#is_published? returns true for published batch","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":105,"run_time":0.012409667,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:6:1]","description":"allows enrollment when batch is published and not full","full_description":"Batch#can_enroll? allows enrollment when batch is published and not full","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":116,"run_time":0.022095143,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:6:2]","description":"prevents enrollment when batch is not published","full_description":"Batch#can_enroll? prevents enrollment when batch is not published","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":121,"run_time":0.02036294,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:6:3]","description":"prevents enrollment when batch is full","full_description":"Batch#can_enroll? prevents enrollment when batch is full","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":126,"run_time":0.039972343,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:6:4]","description":"prevents enrollment when student already enrolled","full_description":"Batch#can_enroll? prevents enrollment when student already enrolled","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":132,"run_time":0.048959609,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:6:5]","description":"allows enrollment when max_students is nil","full_description":"Batch#can_enroll? allows enrollment when max_students is nil","status":"failed","file_path":"./spec/models/batch_spec.rb","line_number":138,"run_time":0.513701173,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Username has already been taken","backtrace":["./spec/models/batch_spec.rb:140:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/models/batch_spec.rb[1:7:1]","description":"handles date ranges","full_description":"Batch#start_date and #end_date handles date ranges","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":146,"run_time":0.017571863,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:7:2]","description":"validates end date is after start date","full_description":"Batch#start_date and #end_date validates end date is after start date","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":158,"run_time":0.014168202,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:8:1]","description":"returns true for batch in session","full_description":"Batch#is_active? returns true for batch in session","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":168,"run_time":0.013355563,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:8:2]","description":"returns false for batch not started","full_description":"Batch#is_active? returns false for batch not started","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":175,"run_time":0.01325733,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:8:3]","description":"returns false for batch ended","full_description":"Batch#is_active? returns false for batch ended","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":181,"run_time":0.013124152,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:8:4]","description":"returns true when dates are nil","full_description":"Batch#is_active? returns true when dates are nil","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":187,"run_time":0.013227023,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:9:1]","description":"creates batch with course and mentor","full_description":"Batch batch creation workflow (matching Frappe test) creates batch with course and mentor","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":201,"run_time":0.015686771,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:9:2]","description":"allows enrollment after creation","full_description":"Batch batch creation workflow (matching Frappe test) allows enrollment after creation","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":223,"run_time":0.03117305,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:10:1:1]","description":"returns only published batches","full_description":"Batch scopes .published returns only published batches","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":246,"run_time":0.041079831,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:10:2:1]","description":"returns only active batches","full_description":"Batch scopes .active returns only active batches","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":254,"run_time":0.038415683,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:10:3:1]","description":"returns batches for specific course","full_description":"Batch scopes .by_course returns batches for specific course","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":268,"run_time":0.06391621,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:11:1:1]","description":"generates slug from title","full_description":"Batch callbacks before_save generates slug from title","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":278,"run_time":0.016693743,"pending_message":null},{"id":"./spec/models/batch_spec.rb[1:11:1:2]","description":"updates slug when title changes","full_description":"Batch callbacks before_save updates slug when title changes","status":"passed","file_path":"./spec/models/batch_spec.rb","line_number":284,"run_time":0.019817938,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:1:1]","description":"is valid with valid attributes","full_description":"CodeRevision validations is valid with valid attributes","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":8,"run_time":0.018122513,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:1:2]","description":"is invalid without code","full_description":"CodeRevision validations is invalid without code","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":17,"run_time":0.002697649,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:1:3]","description":"is invalid without section_id","full_description":"CodeRevision validations is invalid without section_id","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":22,"run_time":0.002398213,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:1:4]","description":"is invalid without user","full_description":"CodeRevision validations is invalid without user","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":27,"run_time":0.000483415,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:2:1]","description":"belongs to user","full_description":"CodeRevision associations belongs to user","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":34,"run_time":0.006867057,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:2:2]","description":"has polymorphic association to exercise_section","full_description":"CodeRevision associations has polymorphic association to exercise_section","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":39,"run_time":0.007551105,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:3:1]","description":"creates a new code revision","full_description":"CodeRevision.autosave_for_section creates a new code revision","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":49,"run_time":0.009550123,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:3:2]","description":"matches Frappe autosave_section API behavior","full_description":"CodeRevision.autosave_for_section matches Frappe autosave_section API behavior","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":66,"run_time":0.007614705,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:4:1]","description":"returns the latest revision for section and user","full_description":"CodeRevision.latest_for_section returns the latest revision for section and user","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":99,"run_time":0.008719328,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:4:2]","description":"returns nil when no revisions exist","full_description":"CodeRevision.latest_for_section returns nil when no revisions exist","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":104,"run_time":0.013351416,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:5:1:1]","description":"orders by created_at desc","full_description":"CodeRevision scopes .recent orders by created_at desc","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":123,"run_time":0.017028015,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:5:2:1]","description":"returns revisions for specific user","full_description":"CodeRevision scopes .by_user returns revisions for specific user","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":130,"run_time":0.017192601,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:5:3:1]","description":"returns revisions for specific section","full_description":"CodeRevision scopes .by_section returns revisions for specific section","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":138,"run_time":0.019174515,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:6:1]","description":"supports typical auto-save workflow","full_description":"CodeRevision code versioning workflow supports typical auto-save workflow","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":148,"run_time":0.010197194,"pending_message":null},{"id":"./spec/models/code_revision_spec.rb[1:7:1]","description":"supports additional metadata","full_description":"CodeRevision metadata and notes supports additional metadata","status":"passed","file_path":"./spec/models/code_revision_spec.rb","line_number":187,"run_time":0.006996359,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:1:1]","description":"has a valid default factory","full_description":"Course FactoryBot factories has a valid default factory","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":8,"run_time":0.007177702,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:1:2]","description":"creates valid published course","full_description":"Course FactoryBot factories creates valid published course","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":12,"run_time":0.007950857,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:1:3]","description":"creates valid featured course","full_description":"Course FactoryBot factories creates valid featured course","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":18,"run_time":0.007072667,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:1:4]","description":"can create course in database","full_description":"Course FactoryBot factories can create course in database","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":24,"run_time":0.009702001,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:2:1]","description":"belongs to an instructor","full_description":"Course Associations belongs to an instructor","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":32,"run_time":0.008296008,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:2:2]","description":"belongs to an evaluator","full_description":"Course Associations belongs to an evaluator","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":36,"run_time":0.007502489,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:2:3]","description":"has many chapters","full_description":"Course Associations has many chapters","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":40,"run_time":0.007200877,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:2:4]","description":"has many lessons","full_description":"Course Associations has many lessons","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":44,"run_time":0.00782319,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:2:5]","description":"has many enrollments","full_description":"Course Associations has many enrollments","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":48,"run_time":0.008371305,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:2:6]","description":"has many lms_quizzes","full_description":"Course Associations has many lms_quizzes","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":52,"run_time":0.009254022,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:3:1]","description":"is valid with valid attributes","full_description":"Course Validations is valid with valid attributes","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":58,"run_time":0.006960633,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:3:2]","description":"is not valid without title","full_description":"Course Validations is not valid without title","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":62,"run_time":0.007042952,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:3:3]","description":"is not valid with empty title","full_description":"Course Validations is not valid with empty title","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":68,"run_time":0.006776727,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:3:4]","description":"is valid without description","full_description":"Course Validations is valid without description","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":73,"run_time":0.006771457,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:3:5]","description":"is valid without instructor","full_description":"Course Validations is valid without instructor","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":78,"run_time":0.006700266,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:3:6]","description":"is valid without evaluator","full_description":"Course Validations is valid without evaluator","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":83,"run_time":0.006631629,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:3:7]","description":"is valid with very long title","full_description":"Course Validations is valid with very long title","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":88,"run_time":0.006583806,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:4:1]","description":"has expected attributes","full_description":"Course Database fields has expected attributes","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":95,"run_time":0.007483078,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:5:1]","description":"can find published courses","full_description":"Course Basic queries can find published courses","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":125,"run_time":0.012780807,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:5:2]","description":"can find featured courses","full_description":"Course Basic queries can find featured courses","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":131,"run_time":0.012208933,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:5:3]","description":"can find courses by instructor","full_description":"Course Basic queries can find courses by instructor","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":137,"run_time":0.011568904,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:5:4]","description":"can find courses by category","full_description":"Course Basic queries can find courses by category","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":142,"run_time":0.016543779,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:6:1]","description":"can be created","full_description":"Course Callbacks and lifecycle can be created","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":153,"run_time":0.008157611,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:6:2]","description":"can be updated","full_description":"Course Callbacks and lifecycle can be updated","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":159,"run_time":0.018061497,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:6:3]","description":"can be destroyed","full_description":"Course Callbacks and lifecycle can be destroyed","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":166,"run_time":0.0193316,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:6:4]","description":"stores timestamps","full_description":"Course Callbacks and lifecycle stores timestamps","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":173,"run_time":0.009524584,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:7:1]","description":"handles course with no instructor","full_description":"Course Edge cases handles course with no instructor","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":181,"run_time":0.002961202,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:7:2]","description":"handles course with nil tags","full_description":"Course Edge cases handles course with nil tags","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":187,"run_time":0.007937088,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:7:3]","description":"handles course with empty tags","full_description":"Course Edge cases handles course with empty tags","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":192,"run_time":0.008066268,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:7:4]","description":"handles course with comma-separated tags","full_description":"Course Edge cases handles course with comma-separated tags","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":197,"run_time":0.007646044,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:7:5]","description":"handles course with special characters in title","full_description":"Course Edge cases handles course with special characters in title","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":202,"run_time":0.007366147,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:7:6]","description":"handles course with unicode characters in title","full_description":"Course Edge cases handles course with unicode characters in title","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":207,"run_time":0.007315708,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:8:1]","description":"can count associated enrollments","full_description":"Course Relationships with other models can count associated enrollments","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":214,"run_time":0.034446369,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:8:2]","description":"can count associated chapters","full_description":"Course Relationships with other models can count associated chapters","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":221,"run_time":0.012405902,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:8:3]","description":"can count associated lessons","full_description":"Course Relationships with other models can count associated lessons","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":232,"run_time":0.021332834,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:9:1]","description":"can be published","full_description":"Course Business logic validation can be published","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":241,"run_time":0.010029792,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:9:2]","description":"can be featured","full_description":"Course Business logic validation can be featured","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":247,"run_time":0.009241915,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:9:3]","description":"can be unpublished","full_description":"Course Business logic validation can be unpublished","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":253,"run_time":0.010953765,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:9:4]","description":"can have both published and featured flags","full_description":"Course Business logic validation can have both published and featured flags","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":261,"run_time":0.010318113,"pending_message":null},{"id":"./spec/models/course_spec.rb[1:10:1]","description":"includes associations to prevent N+1 queries","full_description":"Course Performance considerations includes associations to prevent N+1 queries","status":"passed","file_path":"./spec/models/course_spec.rb","line_number":269,"run_time":0.012794767,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:1:1]","description":"is valid with valid attributes","full_description":"Enrollment validations is valid with valid attributes","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":9,"run_time":0.020245676,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:1:2]","description":"is invalid without a course","full_description":"Enrollment validations is invalid without a course","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":14,"run_time":0.015330666,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:1:3]","description":"is invalid without a user","full_description":"Enrollment validations is invalid without a user","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":19,"run_time":0.015362234,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:1:4]","description":"prevents duplicate enrollments for same user and course","full_description":"Enrollment validations prevents duplicate enrollments for same user and course","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":24,"run_time":0.018733126,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:2:1]","description":"belongs to course","full_description":"Enrollment associations belongs to course","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":32,"run_time":0.017280098,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:2:2]","description":"belongs to user","full_description":"Enrollment associations belongs to user","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":37,"run_time":0.017405664,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:2:3]","description":"can belong to batch","full_description":"Enrollment associations can belong to batch","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":42,"run_time":0.026657153,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:2:4]","description":"has many lesson_progresses","full_description":"Enrollment associations has many lesson_progresses","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":47,"run_time":0.016691119,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:3:1]","description":"creates enrollment with course and member name","full_description":"Enrollment enrollment with batch (matching Frappe test_lms_enrollment.py) creates enrollment with course and member name","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":61,"run_time":0.025290349,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:3:2]","description":"allows changing member role","full_description":"Enrollment enrollment with batch (matching Frappe test_lms_enrollment.py) allows changing member role","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":71,"run_time":0.029486688,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:3:3]","description":"sets enrollment date","full_description":"Enrollment enrollment with batch (matching Frappe test_lms_enrollment.py) sets enrollment date","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":82,"run_time":0.016180062,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:4:1]","description":"returns 0 when no lessons completed","full_description":"Enrollment#progress_percentage returns 0 when no lessons completed","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":95,"run_time":0.02204851,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:4:2]","description":"returns 50 when half lessons completed","full_description":"Enrollment#progress_percentage returns 50 when half lessons completed","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":99,"run_time":0.040571117,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:4:3]","description":"returns 100 when all lessons completed","full_description":"Enrollment#progress_percentage returns 100 when all lessons completed","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":104,"run_time":0.031792427,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:5:1]","description":"returns 0 when no lessons completed","full_description":"Enrollment#completed_lessons_count returns 0 when no lessons completed","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":117,"run_time":0.024076866,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:5:2]","description":"returns correct count of completed lessons","full_description":"Enrollment#completed_lessons_count returns correct count of completed lessons","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":121,"run_time":0.028111102,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:6:1]","description":"returns false when not all lessons completed","full_description":"Enrollment#is_completed? returns false when not all lessons completed","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":136,"run_time":0.027605942,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:6:2]","description":"returns true when all lessons completed","full_description":"Enrollment#is_completed? returns true when all lessons completed","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":141,"run_time":0.030514672,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:7:1]","description":"returns first lesson when no progress","full_description":"Enrollment#current_lesson returns first lesson when no progress","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":154,"run_time":0.02634132,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:7:2]","description":"returns next lesson after completing current","full_description":"Enrollment#current_lesson returns next lesson after completing current","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":158,"run_time":0.026716976,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:7:3]","description":"returns last lesson when all completed","full_description":"Enrollment#current_lesson returns last lesson when all completed","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":163,"run_time":0.028413343,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:8:1:1]","description":"returns only active enrollments","full_description":"Enrollment scopes .active returns only active enrollments","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":176,"run_time":0.0251751,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:8:2:1]","description":"returns enrollments for specific course","full_description":"Enrollment scopes .by_course returns enrollments for specific course","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":186,"run_time":0.039813335,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:9:1:1]","description":"sets enrollment status to active by default","full_description":"Enrollment callbacks after_create sets enrollment status to active by default","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":195,"run_time":0.016287709,"pending_message":null},{"id":"./spec/models/enrollment_spec.rb[1:9:1:2]","description":"sends enrollment confirmation if configured","full_description":"Enrollment callbacks after_create sends enrollment confirmation if configured","status":"passed","file_path":"./spec/models/enrollment_spec.rb","line_number":200,"run_time":0.017055697,"pending_message":null},{"id":"./spec/models/lms_file_spec.rb[1:1]","description":"is a valid model","full_description":"LmsFile is a valid model","status":"passed","file_path":"./spec/models/lms_file_spec.rb","line_number":4,"run_time":0.001343046,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:1:1]","description":"is valid with valid attributes","full_description":"LmsQuestion validations is valid with valid attributes","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":7,"run_time":0.0083043,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:1:2]","description":"is invalid without a question","full_description":"LmsQuestion validations is invalid without a question","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":16,"run_time":0.000652589,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:1:3]","description":"is invalid without a question type","full_description":"LmsQuestion validations is invalid without a question type","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":21,"run_time":0.000556958,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:2:1:1]","description":"sets multiple to true","full_description":"LmsQuestion multiple choice questions with multiple correct options sets multiple to true","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":29,"run_time":0.002016427,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:2:2:1]","description":"sets multiple to false","full_description":"LmsQuestion multiple choice questions with single correct option sets multiple to false","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":42,"run_time":0.001597742,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:2:3:1]","description":"raises validation error","full_description":"LmsQuestion multiple choice questions with no correct options raises validation error","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":55,"run_time":0.00085186,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:3:1:1]","description":"raises validation error","full_description":"LmsQuestion user input questions without possible answers raises validation error","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":72,"run_time":0.000706523,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:3:2:1]","description":"is valid","full_description":"LmsQuestion user input questions with possible answers is valid","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":81,"run_time":0.00050682,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:4:1]","description":"returns array of correct option values","full_description":"LmsQuestion#correct_options returns array of correct option values","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":92,"run_time":0.000533653,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:5:1]","description":"returns array of non-empty options","full_description":"LmsQuestion#all_options returns array of non-empty options","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":106,"run_time":0.000516606,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:6:1:1]","description":"returns true for correct answer","full_description":"LmsQuestion#check_answer for choices question returns true for correct answer","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":127,"run_time":0.001508545,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:6:1:2]","description":"returns false for incorrect answer","full_description":"LmsQuestion#check_answer for choices question returns false for incorrect answer","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":131,"run_time":0.001660591,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:6:1:3]","description":"handles multiple correct answers","full_description":"LmsQuestion#check_answer for choices question handles multiple correct answers","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":135,"run_time":0.002275571,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:6:2:1]","description":"returns true for correct answer","full_description":"LmsQuestion#check_answer for user input question returns true for correct answer","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":150,"run_time":0.001541105,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:6:2:2]","description":"returns true for case-insensitive match","full_description":"LmsQuestion#check_answer for user input question returns true for case-insensitive match","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":154,"run_time":0.001541916,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:6:2:3]","description":"returns false for incorrect answer","full_description":"LmsQuestion#check_answer for user input question returns false for incorrect answer","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":158,"run_time":0.001695465,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:7:1]","description":"belongs to quiz","full_description":"LmsQuestion associations belongs to quiz","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":165,"run_time":0.000541345,"pending_message":null},{"id":"./spec/models/lms_question_spec.rb[1:8:1:1]","description":"returns questions of specified type","full_description":"LmsQuestion scopes .by_type returns questions of specified type","status":"passed","file_path":"./spec/models/lms_question_spec.rb","line_number":175,"run_time":0.0039783,"pending_message":null},{"id":"./spec/models/permission_spec.rb[1:1]","description":"is a valid model","full_description":"Permission is a valid model","status":"passed","file_path":"./spec/models/permission_spec.rb","line_number":4,"run_time":0.000381356,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:1:1]","description":"is valid with valid attributes","full_description":"LmsQuiz validations is valid with valid attributes","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":22,"run_time":0.042613364,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:1:2]","description":"is invalid without a title","full_description":"LmsQuiz validations is invalid without a title","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":26,"run_time":0.015468501,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:1:3]","description":"is invalid with negative passing percentage","full_description":"LmsQuiz validations is invalid with negative passing percentage","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":31,"run_time":0.013667901,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:1:4]","description":"is invalid with passing percentage over 100","full_description":"LmsQuiz validations is invalid with passing percentage over 100","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":36,"run_time":0.011466876,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:2:1]","description":"belongs to course","full_description":"LmsQuiz associations belongs to course","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":43,"run_time":0.011807347,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:2:2]","description":"has many lms_questions","full_description":"LmsQuiz associations has many lms_questions","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":47,"run_time":0.013477163,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:2:3]","description":"has many quiz_submissions","full_description":"LmsQuiz associations has many quiz_submissions","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":51,"run_time":0.011282618,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:3:1]","description":"has correct question count","full_description":"LmsQuiz questions has correct question count","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":60,"run_time":0.028563247,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:3:2]","description":"validates question types","full_description":"LmsQuiz questions validates question types","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":64,"run_time":0.01833932,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:4:1]","description":"calculates total marks correctly","full_description":"LmsQuiz#total_marks calculates total marks correctly","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":74,"run_time":0.018904303,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:5:1]","description":"calculates passing marks correctly","full_description":"LmsQuiz#passing_marks calculates passing marks correctly","status":"failed","file_path":"./spec/models/quiz_spec.rb","line_number":83,"run_time":0.01897931,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: 22.5\n     got: 0.175e2\n\n(compared using ==)\n","backtrace":["./spec/models/quiz_spec.rb:85:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/models/quiz_spec.rb[1:6:1]","description":"returns 0 when user has no attempts","full_description":"LmsQuiz#user_attempts returns 0 when user has no attempts","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":92,"run_time":0.022400789,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:6:2]","description":"returns correct attempt count","full_description":"LmsQuiz#user_attempts returns correct attempt count","status":"failed","file_path":"./spec/models/quiz_spec.rb","line_number":96,"run_time":0.036584524,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `quiz_title=' for an instance of QuizSubmission","backtrace":["./spec/models/quiz_spec.rb:97:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/models/quiz_spec.rb[1:7:1:1]","description":"allows attempts","full_description":"LmsQuiz#user_can_attempt? when quiz has no attempt limit allows attempts","status":"failed","file_path":"./spec/models/quiz_spec.rb","line_number":108,"run_time":0.018002536,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `quiz_title=' for an instance of QuizSubmission","backtrace":["./spec/models/quiz_spec.rb:109:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/models/quiz_spec.rb[1:7:2:1]","description":"allows attempts when under limit","full_description":"LmsQuiz#user_can_attempt? when quiz has attempt limit allows attempts when under limit","status":"failed","file_path":"./spec/models/quiz_spec.rb","line_number":117,"run_time":0.015588848,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `quiz_title=' for an instance of QuizSubmission","backtrace":["./spec/models/quiz_spec.rb:118:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/models/quiz_spec.rb[1:7:2:2]","description":"prevents attempts when limit reached","full_description":"LmsQuiz#user_can_attempt? when quiz has attempt limit prevents attempts when limit reached","status":"failed","file_path":"./spec/models/quiz_spec.rb","line_number":122,"run_time":0.015375496,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `quiz_title=' for an instance of QuizSubmission","backtrace":["./spec/models/quiz_spec.rb:123:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/models/quiz_spec.rb[1:8:1]","description":"returns 0 when user has no submissions","full_description":"LmsQuiz#best_score returns 0 when user has no submissions","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":132,"run_time":0.015188934,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:8:2]","description":"returns highest score","full_description":"LmsQuiz#best_score returns highest score","status":"failed","file_path":"./spec/models/quiz_spec.rb","line_number":136,"run_time":0.014765084,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `quiz_title=' for an instance of QuizSubmission","backtrace":["./spec/models/quiz_spec.rb:137:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/models/quiz_spec.rb[1:9:1]","description":"returns false when no submissions","full_description":"LmsQuiz#has_passed? returns false when no submissions","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":147,"run_time":0.015059301,"pending_message":null},{"id":"./spec/models/quiz_spec.rb[1:9:2]","description":"returns true when best score meets passing percentage","full_description":"LmsQuiz#has_passed? returns true when best score meets passing percentage","status":"failed","file_path":"./spec/models/quiz_spec.rb","line_number":151,"run_time":0.029169363,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `quiz_title=' for an instance of QuizSubmission","backtrace":["./spec/models/quiz_spec.rb:153:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/models/quiz_spec.rb[1:9:3]","description":"returns false when best score below passing percentage","full_description":"LmsQuiz#has_passed? returns false when best score below passing percentage","status":"failed","file_path":"./spec/models/quiz_spec.rb","line_number":157,"run_time":0.019112047,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `quiz_title=' for an instance of QuizSubmission","backtrace":["./spec/models/quiz_spec.rb:159:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/models/quiz_spec.rb[1:10:1:1]","description":"returns only published quizzes","full_description":"LmsQuiz scopes .published returns only published quizzes","status":"passed","file_path":"./spec/models/quiz_spec.rb","line_number":166,"run_time":0.046807178,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:1:1]","description":"is valid with valid attributes","full_description":"ScormCompletion validations is valid with valid attributes","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":11,"run_time":0.039770127,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:1:2]","description":"prevents duplicate completions for same user and package","full_description":"ScormCompletion validations prevents duplicate completions for same user and package","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":19,"run_time":0.025359447,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:2:1]","description":"belongs to user","full_description":"ScormCompletion associations belongs to user","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":27,"run_time":0.025339013,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:2:2]","description":"belongs to scorm_package","full_description":"ScormCompletion associations belongs to scorm_package","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":32,"run_time":0.023617859,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:2:3]","description":"belongs to course_lesson","full_description":"ScormCompletion associations belongs to course_lesson","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":37,"run_time":0.02305483,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:3:1]","description":"defines completion_status enum","full_description":"ScormCompletion enums defines completion_status enum","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":44,"run_time":0.023226929,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:3:2]","description":"defines success_status enum","full_description":"ScormCompletion enums defines success_status enum","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":54,"run_time":0.023277357,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:4:1]","description":"returns 100 for completed status","full_description":"ScormCompletion#progress_percentage returns 100 for completed status","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":63,"run_time":0.022000816,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:4:2]","description":"returns 100 for passed status","full_description":"ScormCompletion#progress_percentage returns 100 for passed status","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":72,"run_time":0.022146171,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:4:3]","description":"returns 50 for failed status","full_description":"ScormCompletion#progress_percentage returns 50 for failed status","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":81,"run_time":0.022533888,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:4:4]","description":"returns score_raw for incomplete status","full_description":"ScormCompletion#progress_percentage returns score_raw for incomplete status","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":90,"run_time":0.022993574,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:4:5]","description":"returns 0 for not_attempted status","full_description":"ScormCompletion#progress_percentage returns 0 for not_attempted status","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":100,"run_time":0.02327819,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:5:1]","description":"updates completion from SCORM data","full_description":"ScormCompletion#update_from_scorm_data updates completion from SCORM data","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":125,"run_time":0.02857212,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:5:2]","description":"parses SCORM time format correctly","full_description":"ScormCompletion#update_from_scorm_data parses SCORM time format correctly","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":140,"run_time":0.040093782,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:5:3]","description":"handles ISO 8601 duration format","full_description":"ScormCompletion#update_from_scorm_data handles ISO 8601 duration format","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":148,"run_time":0.027888785,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:5:4]","description":"updates lesson progress when completed","full_description":"ScormCompletion#update_from_scorm_data updates lesson progress when completed","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":156,"run_time":0.032997517,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:6:1]","description":"returns true for completed status","full_description":"ScormCompletion#completed_or_passed? returns true for completed status","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":167,"run_time":0.051263103,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:6:2]","description":"returns true for passed status","full_description":"ScormCompletion#completed_or_passed? returns true for passed status","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":172,"run_time":0.048843227,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:6:3]","description":"returns false for incomplete status","full_description":"ScormCompletion#completed_or_passed? returns false for incomplete status","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":177,"run_time":0.048775501,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:7:1]","description":"creates new completion record","full_description":"ScormCompletion.track_scorm_interaction creates new completion record","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":191,"run_time":0.029165667,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:7:2]","description":"updates existing completion record","full_description":"ScormCompletion.track_scorm_interaction updates existing completion record","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":203,"run_time":0.025392087,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:8:1]","description":"calculates package analytics correctly","full_description":"ScormCompletion.get_analytics_for_package calculates package analytics correctly","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":240,"run_time":0.088861511,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:9:1:1]","description":"returns completions for specific lesson","full_description":"ScormCompletion scopes .by_lesson returns completions for specific lesson","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":268,"run_time":0.074063497,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:9:2:1]","description":"returns completions for specific package","full_description":"ScormCompletion scopes .by_package returns completions for specific package","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":276,"run_time":0.064956765,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:9:3:1]","description":"returns only completed or passed completions","full_description":"ScormCompletion scopes .completed_users returns only completed or passed completions","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":284,"run_time":0.061278393,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:10:1]","description":"maps SCORM lesson status to completion status","full_description":"ScormCompletion SCORM data mapping maps SCORM lesson status to completion status","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":295,"run_time":0.023712907,"pending_message":null},{"id":"./spec/models/scorm_completion_spec.rb[1:10:2]","description":"maps SCORM success status","full_description":"ScormCompletion SCORM data mapping maps SCORM success status","status":"passed","file_path":"./spec/models/scorm_completion_spec.rb","line_number":304,"run_time":0.023868701,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:1:1]","description":"is valid with valid attributes","full_description":"ScormPackage validations is valid with valid attributes","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":10,"run_time":0.016710328,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:1:2]","description":"is invalid without title","full_description":"ScormPackage validations is invalid without title","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":21,"run_time":0.009359727,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:1:3]","description":"is invalid without manifest_file","full_description":"ScormPackage validations is invalid without manifest_file","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":26,"run_time":0.008684463,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:1:4]","description":"is invalid without launch_file","full_description":"ScormPackage validations is invalid without launch_file","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":31,"run_time":0.008819514,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:1:5]","description":"is invalid without version","full_description":"ScormPackage validations is invalid without version","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":36,"run_time":0.008803589,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:2:1]","description":"belongs to course_lesson","full_description":"ScormPackage associations belongs to course_lesson","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":43,"run_time":0.025882713,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:2:2]","description":"belongs to uploaded_by user","full_description":"ScormPackage associations belongs to uploaded_by user","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":47,"run_time":0.023742643,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:2:3]","description":"has many scorm_completions","full_description":"ScormPackage associations has many scorm_completions","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":52,"run_time":0.02505298,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:3:1]","description":"defines status enum","full_description":"ScormPackage enums defines status enum","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":59,"run_time":0.023415142,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:3:2]","description":"defaults to uploaded status","full_description":"ScormPackage enums defaults to uploaded status","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":64,"run_time":0.022954123,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:4:1]","description":"creates SCORM package from file upload","full_description":"ScormPackage.create_from_upload creates SCORM package from file upload","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":73,"run_time":0.028559812,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:4:2]","description":"attaches the uploaded file","full_description":"ScormPackage.create_from_upload attaches the uploaded file","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":80,"run_time":0.025873499,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:5:1]","description":"returns nil for non-extracted package","full_description":"ScormPackage#launch_url returns nil for non-extracted package","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":89,"run_time":0.028397608,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:5:2]","description":"returns launch URL for extracted package","full_description":"ScormPackage#launch_url returns launch URL for extracted package","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":94,"run_time":0.026500237,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:6:1:1]","description":"successfully extracts package","full_description":"ScormPackage#extract_package with attached files successfully extracts package","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":112,"run_time":0.030869776,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:6:2:1]","description":"returns false","full_description":"ScormPackage#extract_package without attached files returns false","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":130,"run_time":0.026998185,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:7:1]","description":"returns completion data for user","full_description":"ScormPackage#completion_data_for_user returns completion data for user","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":144,"run_time":0.055181939,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:7:2]","description":"returns nil when user has no completion data","full_description":"ScormPackage#completion_data_for_user returns nil when user has no completion data","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":157,"run_time":0.035089341,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:8:1:1]","description":"returns packages for specific course","full_description":"ScormPackage scopes .by_course returns packages for specific course","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":172,"run_time":0.037306092,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:9:1]","description":"detects SCORM 1.2","full_description":"ScormPackage SCORM version detection detects SCORM 1.2","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":180,"run_time":0.025523913,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:9:2]","description":"detects SCORM 2004","full_description":"ScormPackage SCORM version detection detects SCORM 2004","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":186,"run_time":0.023635647,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:9:3]","description":"handles unknown version","full_description":"ScormPackage SCORM version detection handles unknown version","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":192,"run_time":0.02395241,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:10:1]","description":"detects malicious JavaScript","full_description":"ScormPackage security checks detects malicious JavaScript","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":202,"run_time":0.022994546,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:10:2]","description":"detects malicious event handlers","full_description":"ScormPackage security checks detects malicious event handlers","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":207,"run_time":0.024271079,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:10:3]","description":"allows clean content","full_description":"ScormPackage security checks allows clean content","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":212,"run_time":0.030840381,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:10:4]","description":"is invalid without title","full_description":"ScormPackage security checks is invalid without title","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":217,"run_time":0.012387313,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:10:5]","description":"is invalid without manifest_file","full_description":"ScormPackage security checks is invalid without manifest_file","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":222,"run_time":0.012121398,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:10:6]","description":"is invalid without launch_file","full_description":"ScormPackage security checks is invalid without launch_file","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":227,"run_time":0.009339155,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:10:7]","description":"is invalid without version","full_description":"ScormPackage security checks is invalid without version","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":232,"run_time":0.009312053,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:11:1]","description":"belongs to course_lesson","full_description":"ScormPackage associations belongs to course_lesson","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":239,"run_time":0.021443195,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:11:2]","description":"belongs to uploaded_by user","full_description":"ScormPackage associations belongs to uploaded_by user","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":244,"run_time":0.028529373,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:11:3]","description":"has many scorm_completions","full_description":"ScormPackage associations has many scorm_completions","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":249,"run_time":0.030697448,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:12:1]","description":"defines status enum","full_description":"ScormPackage enums defines status enum","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":256,"run_time":0.027705338,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:12:2]","description":"defaults to uploaded status","full_description":"ScormPackage enums defaults to uploaded status","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":264,"run_time":0.026048903,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:13:1]","description":"creates SCORM package from file upload","full_description":"ScormPackage.create_from_upload creates SCORM package from file upload","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":273,"run_time":0.022953061,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:13:2]","description":"attaches the uploaded file","full_description":"ScormPackage.create_from_upload attaches the uploaded file","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":286,"run_time":0.020633922,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:14:1]","description":"returns nil for non-extracted package","full_description":"ScormPackage#launch_url returns nil for non-extracted package","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":295,"run_time":0.026103679,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:14:2]","description":"returns launch URL for extracted package","full_description":"ScormPackage#launch_url returns launch URL for extracted package","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":300,"run_time":0.02545764,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:15:1:1]","description":"successfully extracts package","full_description":"ScormPackage#extract_package with valid SCORM package successfully extracts package","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":351,"run_time":0.020580359,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:15:1:2]","description":"parses manifest metadata","full_description":"ScormPackage#extract_package with valid SCORM package parses manifest metadata","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":362,"run_time":0.02108733,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:15:2:1]","description":"detects and rejects malicious content","full_description":"ScormPackage#extract_package with malicious content detects and rejects malicious content","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":386,"run_time":0.021411336,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:15:3:1]","description":"handles extraction errors gracefully","full_description":"ScormPackage#extract_package with extraction error handles extraction errors gracefully","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":402,"run_time":0.022852004,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:16:1]","description":"returns completion data for user","full_description":"ScormPackage#completion_data_for_user returns completion data for user","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":418,"run_time":0.031716016,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:16:2]","description":"returns nil when user has no completion data","full_description":"ScormPackage#completion_data_for_user returns nil when user has no completion data","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":423,"run_time":0.049091304,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:17:1:1]","description":"returns packages for specific course","full_description":"ScormPackage scopes .by_course returns packages for specific course","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":442,"run_time":0.049768461,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:18:1]","description":"detects SCORM 1.2","full_description":"ScormPackage SCORM version detection detects SCORM 1.2","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":453,"run_time":0.027463951,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:18:2]","description":"detects SCORM 2004","full_description":"ScormPackage SCORM version detection detects SCORM 2004","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":467,"run_time":0.026384816,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:18:3]","description":"handles unknown version","full_description":"ScormPackage SCORM version detection handles unknown version","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":478,"run_time":0.025448707,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:19:1]","description":"detects malicious JavaScript","full_description":"ScormPackage security checks detects malicious JavaScript","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":491,"run_time":0.024503412,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:19:2]","description":"detects malicious event handlers","full_description":"ScormPackage security checks detects malicious event handlers","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":497,"run_time":0.025247322,"pending_message":null},{"id":"./spec/models/scorm_package_spec.rb[1:19:3]","description":"allows clean content","full_description":"ScormPackage security checks allows clean content","status":"passed","file_path":"./spec/models/scorm_package_spec.rb","line_number":503,"run_time":0.025211166,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:1:1]","description":"has a valid default factory","full_description":"User FactoryBot factories has a valid default factory","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":10,"run_time":0.00356889,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:1:2]","description":"creates valid instructor factory","full_description":"User FactoryBot factories creates valid instructor factory","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":14,"run_time":0.003843058,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:1:3]","description":"creates valid moderator factory","full_description":"User FactoryBot factories creates valid moderator factory","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":20,"run_time":0.003795093,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:1:4]","description":"creates valid evaluator factory","full_description":"User FactoryBot factories creates valid evaluator factory","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":26,"run_time":0.003664319,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:2:1]","description":"includes database_authenticatable","full_description":"User Devise modules includes database_authenticatable","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":34,"run_time":0.00244788,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:2:2]","description":"includes registerable","full_description":"User Devise modules includes registerable","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":38,"run_time":0.002098476,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:2:3]","description":"includes recoverable","full_description":"User Devise modules includes recoverable","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":42,"run_time":0.002361675,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:2:4]","description":"includes rememberable","full_description":"User Devise modules includes rememberable","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":46,"run_time":0.002332431,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:2:5]","description":"includes validatable","full_description":"User Devise modules includes validatable","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":50,"run_time":0.00301874,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:2:6]","description":"includes trackable","full_description":"User Devise modules includes trackable","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":54,"run_time":0.002112217,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:2:7]","description":"includes timeoutable","full_description":"User Devise modules includes timeoutable","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":62,"run_time":0.002021696,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:3:1]","description":"has many enrollments","full_description":"User Associations has many enrollments","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":68,"run_time":0.002237661,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:3:2]","description":"has many batch_enrollments","full_description":"User Associations has many batch_enrollments","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":72,"run_time":0.002238383,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:3:3]","description":"has many courses through enrollments","full_description":"User Associations has many courses through enrollments","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":76,"run_time":0.002266927,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:3:4]","description":"has many batches through batch_enrollments","full_description":"User Associations has many batches through batch_enrollments","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":80,"run_time":0.002217641,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:3:5]","description":"has many lesson_progress","full_description":"User Associations has many lesson_progress","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":84,"run_time":0.002096942,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:4:1]","description":"is valid with valid attributes","full_description":"User Validations is valid with valid attributes","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":90,"run_time":0.003298999,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:4:2]","description":"is not valid without email","full_description":"User Validations is not valid without email","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":94,"run_time":0.00326812,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:4:3]","description":"is not valid with invalid email format","full_description":"User Validations is not valid with invalid email format","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":99,"run_time":0.003016276,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:4:4]","description":"is not valid with duplicate email","full_description":"User Validations is not valid with duplicate email","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":104,"run_time":0.008519617,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:4:5]","description":"is not valid without password","full_description":"User Validations is not valid without password","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":110,"run_time":0.003001294,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:4:6]","description":"is not valid with short password","full_description":"User Validations is not valid with short password","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":115,"run_time":0.004006012,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:5:1:1]","description":"returns true for instructor users","full_description":"User Role methods #instructor? returns true for instructor users","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":123,"run_time":0.002561648,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:5:1:2]","description":"returns false for non-instructor users","full_description":"User Role methods #instructor? returns false for non-instructor users","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":127,"run_time":0.00241652,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:5:2:1]","description":"returns true for moderator users","full_description":"User Role methods #moderator? returns true for moderator users","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":133,"run_time":0.002356677,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:5:2:2]","description":"returns false for non-moderator users","full_description":"User Role methods #moderator? returns false for non-moderator users","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":137,"run_time":0.002336557,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:5:3:1]","description":"returns true for evaluator users","full_description":"User Role methods #evaluator? returns true for evaluator users","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":143,"run_time":0.002400236,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:5:3:2]","description":"returns false for non-evaluator users","full_description":"User Role methods #evaluator? returns false for non-evaluator users","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":147,"run_time":0.002343858,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:5:4:1]","description":"returns true for student users","full_description":"User Role methods #student? returns true for student users","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":153,"run_time":0.002095039,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:5:4:2]","description":"returns false for non-student users","full_description":"User Role methods #student? returns false for non-student users","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":157,"run_time":0.002311789,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:6:1]","description":"returns LMS Student role for regular users","full_description":"User#roles returns LMS Student role for regular users","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":164,"run_time":0.002151978,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:6:2]","description":"returns Course Creator role for instructors","full_description":"User#roles returns Course Creator role for instructors","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":168,"run_time":0.002304186,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:6:3]","description":"returns Moderator role for moderators","full_description":"User#roles returns Moderator role for moderators","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":172,"run_time":0.002336696,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:6:4]","description":"returns Batch Evaluator role for evaluators","full_description":"User#roles returns Batch Evaluator role for evaluators","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":176,"run_time":0.003215278,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:6:5]","description":"returns single role for users","full_description":"User#roles returns single role for users","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":180,"run_time":0.006775615,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:7:1]","description":"returns first part of full_name","full_description":"User#first_name returns first part of full_name","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":187,"run_time":0.00217856,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:7:2]","description":"returns User when full_name is nil","full_description":"User#first_name returns User when full_name is nil","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":192,"run_time":0.00212686,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:7:3]","description":"handles single name","full_description":"User#first_name handles single name","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":197,"run_time":0.002062369,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:7:4]","description":"handles multiple word names","full_description":"User#first_name handles multiple word names","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":202,"run_time":0.002090302,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:8:1]","description":"returns last part of full_name","full_description":"User#last_name returns last part of full_name","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":209,"run_time":0.002068257,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:8:2]","description":"returns empty string when full_name is nil","full_description":"User#last_name returns empty string when full_name is nil","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":214,"run_time":0.002199612,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:8:3]","description":"handles single name","full_description":"User#last_name handles single name","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":219,"run_time":0.002176477,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:8:4]","description":"handles multiple word names","full_description":"User#last_name handles multiple word names","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":224,"run_time":0.002050491,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:9:1]","description":"returns user session data hash","full_description":"User#session_user returns user session data hash","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":231,"run_time":0.00792039,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:9:2]","description":"includes correct role information","full_description":"User#session_user includes correct role information","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":249,"run_time":0.007090816,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:10:1:1]","description":"can find instructors","full_description":"User Scopes and queries finding users by role can find instructors","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":260,"run_time":0.01739717,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:10:1:2]","description":"can find moderators","full_description":"User Scopes and queries finding users by role can find moderators","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":269,"run_time":0.014134158,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:10:1:3]","description":"can find evaluators","full_description":"User Scopes and queries finding users by role can find evaluators","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":278,"run_time":0.014337255,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:11:1]","description":"can be created with valid attributes","full_description":"User Callbacks and hooks can be created with valid attributes","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":290,"run_time":0.007334987,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:11:2]","description":"can be updated","full_description":"User Callbacks and hooks can be updated","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":296,"run_time":0.010147827,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:11:3]","description":"can be destroyed","full_description":"User Callbacks and hooks can be destroyed","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":303,"run_time":0.014633958,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:12:1]","description":"handles user with student role","full_description":"User Edge cases handles user with student role","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":312,"run_time":0.003298248,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:12:2]","description":"handles user with instructor role","full_description":"User Edge cases handles user with instructor role","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":321,"run_time":0.003010007,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:12:3]","description":"handles empty full_name in session_user","full_description":"User Edge cases handles empty full_name in session_user","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":330,"run_time":0.006761142,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:12:4]","description":"handles nil full_name in session_user","full_description":"User Edge cases handles nil full_name in session_user","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":338,"run_time":0.006494967,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:13:1]","description":"has JWT token field","full_description":"User JWT Authentication has JWT token field","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":348,"run_time":0.002437554,"pending_message":null},{"id":"./spec/models/user_spec.rb[1:13:2]","description":"has JWT token field","full_description":"User JWT Authentication has JWT token field","status":"passed","file_path":"./spec/models/user_spec.rb","line_number":352,"run_time":0.002144938,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:1:1]","description":"is valid with valid attributes","full_description":"VideoWatchDuration validations is valid with valid attributes","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":11,"run_time":0.022818261,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:1:2]","description":"is invalid without video_url","full_description":"VideoWatchDuration validations is invalid without video_url","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":21,"run_time":0.009821638,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:1:3]","description":"is invalid with negative duration_watched","full_description":"VideoWatchDuration validations is invalid with negative duration_watched","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":26,"run_time":0.009253491,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:1:4]","description":"is invalid with zero video_length","full_description":"VideoWatchDuration validations is invalid with zero video_length","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":31,"run_time":0.008944379,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:2:1]","description":"belongs to user","full_description":"VideoWatchDuration associations belongs to user","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":38,"run_time":0.020730894,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:2:2]","description":"belongs to course_lesson","full_description":"VideoWatchDuration associations belongs to course_lesson","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":43,"run_time":0.018451086,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:3:1]","description":"calculates correct percentage","full_description":"VideoWatchDuration#progress_percentage calculates correct percentage","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":50,"run_time":0.01780662,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:3:2]","description":"caps at 100%","full_description":"VideoWatchDuration#progress_percentage caps at 100%","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":59,"run_time":0.018136333,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:3:3]","description":"returns 0 for zero video length","full_description":"VideoWatchDuration#progress_percentage returns 0 for zero video length","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":68,"run_time":0.009416575,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:4:1]","description":"returns true when 90% or more watched","full_description":"VideoWatchDuration#completed? returns true when 90% or more watched","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":76,"run_time":0.025191375,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:4:2]","description":"returns false when less than 90% watched","full_description":"VideoWatchDuration#completed? returns false when less than 90% watched","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":83,"run_time":0.026131142,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:5:1]","description":"creates new record for first tracking","full_description":"VideoWatchDuration.track_duration creates new record for first tracking","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":92,"run_time":0.020547487,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:5:2]","description":"updates existing record with maximum duration","full_description":"VideoWatchDuration.track_duration updates existing record with maximum duration","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":105,"run_time":0.018919257,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:5:3]","description":"does not decrease duration if new value is less","full_description":"VideoWatchDuration.track_duration does not decrease duration if new value is less","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":118,"run_time":0.017545261,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:5:4]","description":"updates last_position with current duration","full_description":"VideoWatchDuration.track_duration updates last_position with current duration","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":131,"run_time":0.017297105,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:6:1]","description":"calculates correct analytics","full_description":"VideoWatchDuration.get_analytics_for_lesson calculates correct analytics","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":159,"run_time":0.030138055,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:7:1:1]","description":"returns durations for specific lesson","full_description":"VideoWatchDuration scopes .by_lesson returns durations for specific lesson","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":181,"run_time":0.057750988,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:7:2:1]","description":"returns durations for specific user","full_description":"VideoWatchDuration scopes .by_user returns durations for specific user","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":189,"run_time":0.047644897,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:7:3:1]","description":"orders by updated_at desc","full_description":"VideoWatchDuration scopes .recent orders by updated_at desc","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":197,"run_time":0.042980277,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:8:1]","description":"tracks first watch time","full_description":"VideoWatchDuration watch session tracking tracks first watch time","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":205,"run_time":0.017707554,"pending_message":null},{"id":"./spec/models/video_watch_duration_spec.rb[1:8:2]","description":"updates last watched time on save","full_description":"VideoWatchDuration watch session tracking updates last watched time on save","status":"passed","file_path":"./spec/models/video_watch_duration_spec.rb","line_number":210,"run_time":0.121298924,"pending_message":null},{"id":"./spec/models/workflow_spec.rb[1:1]","description":"is a valid model","full_description":"Workflow is a valid model","status":"passed","file_path":"./spec/models/workflow_spec.rb","line_number":4,"run_time":0.000623372,"pending_message":null},{"id":"./spec/models/workflow_state_spec.rb[1:1]","description":"is a valid model","full_description":"WorkflowState is a valid model","status":"passed","file_path":"./spec/models/workflow_state_spec.rb","line_number":4,"run_time":0.000528365,"pending_message":null},{"id":"./spec/models/workflow_transition_spec.rb[1:1]","description":"is a valid model","full_description":"WorkflowTransition is a valid model","status":"passed","file_path":"./spec/models/workflow_transition_spec.rb","line_number":4,"run_time":0.000367564,"pending_message":null},{"id":"./spec/requests/api/authentication_spec.rb[1:1:1:1]","description":"logs in successfully and returns Frappe-compatible response","full_description":"API::Authentication POST /api/login with valid credentials logs in successfully and returns Frappe-compatible response","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":11,"run_time":0.005915923,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:12:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:1:1:2]","description":"returns correct user data structure","full_description":"API::Authentication POST /api/login with valid credentials returns correct user data structure","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":23,"run_time":0.003954872,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:24:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:1:1:3]","description":"sets proper cookies for Frappe compatibility","full_description":"API::Authentication POST /api/login with valid credentials sets proper cookies for Frappe compatibility","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":40,"run_time":0.003737834,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:41:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:1:1:4]","description":"sets CORS headers for Frappe compatibility","full_description":"API::Authentication POST /api/login with valid credentials sets CORS headers for Frappe compatibility","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":50,"run_time":0.003830287,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:51:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:1:1:5]","description":"returns instructor-specific data for instructor users","full_description":"API::Authentication POST /api/login with valid credentials returns instructor-specific data for instructor users","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":58,"run_time":0.004229031,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:59:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:1:1:6]","description":"returns moderator-specific data for moderator users","full_description":"API::Authentication POST /api/login with valid credentials returns moderator-specific data for moderator users","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":70,"run_time":0.004118877,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:71:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:1:1:7]","description":"returns evaluator-specific data for evaluator users","full_description":"API::Authentication POST /api/login with valid credentials returns evaluator-specific data for evaluator users","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":82,"run_time":0.004206655,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:83:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:1:1:8]","description":"updates user JTI for JWT invalidation","full_description":"API::Authentication POST /api/login with valid credentials updates user JTI for JWT invalidation","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":94,"run_time":0.003522107,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:95:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:1:1:9]","description":"returns valid JWT token","full_description":"API::Authentication POST /api/login with valid credentials returns valid JWT token","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":104,"run_time":0.003660463,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:105:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:1:2:1]","description":"returns unauthorized for wrong password","full_description":"API::Authentication POST /api/login with invalid credentials returns unauthorized for wrong password","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":121,"run_time":0.003764535,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:122:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:1:2:2]","description":"returns unauthorized for non-existent user","full_description":"API::Authentication POST /api/login with invalid credentials returns unauthorized for non-existent user","status":"passed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":130,"run_time":0.026523634,"pending_message":null},{"id":"./spec/requests/api/authentication_spec.rb[1:1:2:3]","description":"returns unauthorized for missing parameters","full_description":"API::Authentication POST /api/login with invalid credentials returns unauthorized for missing parameters","status":"passed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":139,"run_time":0.002299028,"pending_message":null},{"id":"./spec/requests/api/authentication_spec.rb[1:1:3:1]","description":"returns unauthorized for disabled user","full_description":"API::Authentication POST /api/login with disabled user returns unauthorized for disabled user","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":147,"run_time":0.00455531,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:148:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:2:1:1]","description":"creates new user successfully","full_description":"API::Authentication POST /api/signup with valid parameters creates new user successfully","status":"passed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":167,"run_time":0.014460618,"pending_message":null},{"id":"./spec/requests/api/authentication_spec.rb[1:2:1:2]","description":"creates user with correct attributes","full_description":"API::Authentication POST /api/signup with valid parameters creates user with correct attributes","status":"passed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":179,"run_time":0.01086747,"pending_message":null},{"id":"./spec/requests/api/authentication_spec.rb[1:2:1:3]","description":"accepts optional user_category parameter","full_description":"API::Authentication POST /api/signup with valid parameters accepts optional user_category parameter","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":188,"run_time":0.004006181,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user_category' for nil","backtrace":["./spec/requests/api/authentication_spec.rb:192:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:2:2:1]","description":"returns bad request for missing email","full_description":"API::Authentication POST /api/signup with invalid parameters returns bad request for missing email","status":"passed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":197,"run_time":0.001561006,"pending_message":null},{"id":"./spec/requests/api/authentication_spec.rb[1:2:2:2]","description":"returns bad request for missing full_name","full_description":"API::Authentication POST /api/signup with invalid parameters returns bad request for missing full_name","status":"passed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":206,"run_time":0.001367604,"pending_message":null},{"id":"./spec/requests/api/authentication_spec.rb[1:2:2:3]","description":"returns unprocessable entity for existing enabled user","full_description":"API::Authentication POST /api/signup with invalid parameters returns unprocessable entity for existing enabled user","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":215,"run_time":0.007653233,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `enabled?' for an instance of User","backtrace":["./app/controllers/api/authentication_controller.rb:70:in `signup'","./spec/requests/api/authentication_spec.rb:218:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:2:2:4]","description":"returns unprocessable entity for existing disabled user","full_description":"API::Authentication POST /api/signup with invalid parameters returns unprocessable entity for existing disabled user","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":230,"run_time":0.007348989,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `enabled?' for an instance of User","backtrace":["./app/controllers/api/authentication_controller.rb:70:in `signup'","./spec/requests/api/authentication_spec.rb:233:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:2:3:1]","description":"allows normal signup rate","full_description":"API::Authentication POST /api/signup rate limiting allows normal signup rate","status":"passed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":247,"run_time":0.010411829,"pending_message":null},{"id":"./spec/requests/api/authentication_spec.rb[1:2:3:2]","description":"blocks excessive signups","full_description":"API::Authentication POST /api/signup rate limiting blocks excessive signups","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":257,"run_time":0.21403462,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Username has already been taken","backtrace":["./spec/requests/api/authentication_spec.rb:259:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:2:4:1]","description":"handles validation errors gracefully","full_description":"API::Authentication POST /api/signup error handling handles validation errors gracefully","status":"passed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":275,"run_time":0.006279631,"pending_message":null},{"id":"./spec/requests/api/authentication_spec.rb[1:3:1]","description":"logs out successfully","full_description":"API::Authentication POST /api/logout logs out successfully","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":296,"run_time":0.003846423,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:293:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:3:2]","description":"clears Frappe-style cookies","full_description":"API::Authentication POST /api/logout clears Frappe-style cookies","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":305,"run_time":0.003859283,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:293:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:3:3]","description":"clears user JTI","full_description":"API::Authentication POST /api/logout clears user JTI","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":315,"run_time":0.003688867,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:293:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:3:4]","description":"works without authenticated user","full_description":"API::Authentication POST /api/logout works without authenticated user","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":322,"run_time":0.003766128,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Password confirmation doesn't match Password","backtrace":["./spec/requests/api/authentication_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/authentication_spec.rb:293:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:4:1]","description":"handles OPTIONS requests for login","full_description":"API::Authentication CORS preflight requests handles OPTIONS requests for login","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":333,"run_time":0.244811052,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 404","backtrace":["./spec/requests/api/authentication_spec.rb:336:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/authentication_spec.rb[1:4:2]","description":"handles OPTIONS requests for signup","full_description":"API::Authentication CORS preflight requests handles OPTIONS requests for signup","status":"failed","file_path":"./spec/requests/api/authentication_spec.rb","line_number":341,"run_time":0.313239826,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 404","backtrace":["./spec/requests/api/authentication_spec.rb:344:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:1:1]","description":"returns user information in Frappe-compatible format","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_user_info returns user information in Frappe-compatible format","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":16,"run_time":0.016513341,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:19:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:1:2]","description":"includes instructor-specific data for instructor user","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_user_info includes instructor-specific data for instructor user","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":32,"run_time":0.010460556,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected nil to include \"Course Creator\", but it does not respond to `include?`","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:36:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:1:3]","description":"includes moderator-specific data for moderator user","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_user_info includes moderator-specific data for moderator user","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":40,"run_time":0.010055553,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected nil to include \"Moderator\", but it does not respond to `include?`","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:44:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:1:4]","description":"includes evaluator-specific data for evaluator user","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_user_info includes evaluator-specific data for evaluator user","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":48,"run_time":0.010616658,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected nil to include \"Batch Evaluator\", but it does not respond to `include?`","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:52:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:2:1]","description":"returns list of users with limited fields","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_all_users returns list of users with limited fields","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":58,"run_time":0.026218017,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected nil to be a kind of Array","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:67:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:3:1]","description":"returns user notifications","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_notifications returns user notifications","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":83,"run_time":0.014836686,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:86:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:4:1]","description":"marks notification as read","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.mark_as_read marks notification as read","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":96,"run_time":0.012996953,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:100:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:4:2:1]","description":"returns error","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.mark_as_read with non-existent notification returns error","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":108,"run_time":0.009621064,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:112:in `block (6 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:5:1]","description":"marks all notifications as read","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.mark_all_as_read marks all notifications as read","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":123,"run_time":0.011827278,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:126:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:6:1]","description":"returns branding information","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_branding returns branding information","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":138,"run_time":0.008942977,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:7:1]","description":"returns LMS settings","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_lms_setting returns LMS settings","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":149,"run_time":0.010484222,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected `false.present?` to be truthy, got false","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:156:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:8:1]","description":"returns translations","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_translations returns translations","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":161,"run_time":0.009417528,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:9:1]","description":"returns sidebar settings","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_sidebar_settings returns sidebar settings","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":172,"run_time":0.009012356,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:10:1]","description":"returns certification categories","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_certification_categories returns certification categories","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":183,"run_time":0.011423288,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected {\"data\"=\u003e[]} to be a kind of Array","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:189:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:11:1]","description":"returns count of certified members","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_count_of_certified_members returns count of certified members","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":194,"run_time":0.011929017,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected {\"count\"=\u003e0} to be a kind of Integer","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:200:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:12:1]","description":"returns certified participants","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_certified_participants returns certified participants","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":205,"run_time":0.011743587,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected {\"data\"=\u003e[]} to be a kind of Array","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:211:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:13:1]","description":"returns job opportunities","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_job_opportunities returns job opportunities","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":218,"run_time":0.007079199,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of JobOpportunity","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:216:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:14:1]","description":"returns user courses with full details","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_my_courses returns user courses with full details","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":231,"run_time":0.097156716,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected: \u003e 0\n     got:   0","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:238:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:14:2]","description":"returns featured courses when no enrollments exist","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_my_courses returns featured courses when no enrollments exist","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":252,"run_time":0.09964446,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected [] to include 7","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:260:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:15:1]","description":"returns courses with filtering","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_courses returns courses with filtering","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":265,"run_time":0.010774264,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected nil to respond to `has_key?`","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:276:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:16:1]","description":"returns course completion analytics","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_course_completion_data returns course completion analytics","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":287,"run_time":0.010009321,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected [] to be a kind of Hash","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:293:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:17:1]","description":"returns course tags as array","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_tags returns course tags as array","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":302,"run_time":0.084602584,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:18:1]","description":"returns course reviews","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_reviews returns course reviews","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":314,"run_time":0.069289807,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:19:1]","description":"returns user batches with details","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_my_batches returns user batches with details","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":328,"run_time":0.025712848,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected: \u003e 0\n     got:   0","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:335:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:20:1]","description":"returns batches with filtering","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_batches returns batches with filtering","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":348,"run_time":0.007761184,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected {\"data\"=\u003e[]} to be a kind of Array","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:354:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:21:1]","description":"returns upcoming evaluations","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_upcoming_evals returns upcoming evaluations","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":363,"run_time":0.088840978,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `batch_name=' for an instance of CertificateRequest","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:360:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:22:1]","description":"returns user streak information","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_streak_info returns user streak information","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":382,"run_time":0.030499899,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:23:1]","description":"returns upcoming live classes","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_my_live_classes returns upcoming live classes","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":402,"run_time":0.027319686,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected: \u003e 0\n     got:   0","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:409:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:24:1]","description":"returns heatmap activity data","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_heatmap_data returns heatmap activity data","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":424,"run_time":0.029152495,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:25:1]","description":"returns chart data","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.get_chart_data returns chart data","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":437,"run_time":0.008930729,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected [] to be a kind of Hash","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:444:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:26:1]","description":"saves current lesson for user","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.save_current_lesson saves current lesson for user","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":452,"run_time":0.073443329,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `id' for nil","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:454:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:26:2]","description":"returns error when not enrolled","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.utils.save_current_lesson returns error when not enrolled","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":466,"run_time":0.06708087,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `id' for nil","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:470:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:27:1]","description":"returns chart details","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user lms.api.get_chart_details returns chart details","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":481,"run_time":0.009843021,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:28:1]","description":"returns available apps","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user frappe.apps.get_apps returns available apps","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":492,"run_time":0.009244176,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected {\"data\"=\u003e[{\"app_name\"=\u003e\"lms\", \"category\"=\u003e\"Education\", \"color\"=\u003e\"green\", \"description\"=\u003e\"Complete lea...b.com/lms/lms\", \"route\"=\u003e\"/lms\", \"title\"=\u003e\"Learning Management System\", \"update_available\"=\u003efalse}]} to be a kind of Array","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:498:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:29:1]","description":"gets document by doctype and filters","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user frappe.client.get gets document by doctype and filters","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":503,"run_time":0.018367594,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:30:1]","description":"gets single value from document","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user frappe.client.get_single_value gets single value from document","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":515,"run_time":0.008819335,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected `nil.present?` to be truthy, got false","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:522:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:31:1]","description":"gets count of documents","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user frappe.client.get_count gets count of documents","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":527,"run_time":0.00800258,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:32:1]","description":"searches for linked documents","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user frappe.desk.search.search_link searches for linked documents","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":539,"run_time":0.009660816,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected {\"data\"=\u003e[]} to be a kind of Array","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:546:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:1:33:1]","description":"logs out user","full_description":"API::Compatibility POST /api/method/*method_path with authenticated user logout logs out user","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":551,"run_time":0.011222143,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:2:1:1]","description":"allows access to get_branding","full_description":"API::Compatibility POST /api/method/*method_path without authentication public endpoints allows access to get_branding","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":564,"run_time":0.002185681,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:2:1:2]","description":"allows access to get_translations","full_description":"API::Compatibility POST /api/method/*method_path without authentication public endpoints allows access to get_translations","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":570,"run_time":0.001757663,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:2:1:3]","description":"allows access to get_courses","full_description":"API::Compatibility POST /api/method/*method_path without authentication public endpoints allows access to get_courses","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":576,"run_time":0.002162325,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:2:1:4]","description":"allows access to get_tags","full_description":"API::Compatibility POST /api/method/*method_path without authentication public endpoints allows access to get_tags","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":582,"run_time":0.067055651,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:2:1:5]","description":"allows access to get_reviews","full_description":"API::Compatibility POST /api/method/*method_path without authentication public endpoints allows access to get_reviews","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":588,"run_time":0.064942051,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:2:2:1]","description":"returns unauthorized for get_user_info","full_description":"API::Compatibility POST /api/method/*method_path without authentication protected endpoints returns unauthorized for get_user_info","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":596,"run_time":0.001720706,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:2:2:2]","description":"returns unauthorized for get_my_courses","full_description":"API::Compatibility POST /api/method/*method_path without authentication protected endpoints returns unauthorized for get_my_courses","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":604,"run_time":0.001596261,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :unauthorized (401) but it was :ok (200)","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:607:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:2:2:3]","description":"returns unauthorized for get_my_batches","full_description":"API::Compatibility POST /api/method/*method_path without authentication protected endpoints returns unauthorized for get_my_batches","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":612,"run_time":0.001310125,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :unauthorized (401) but it was :ok (200)","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:615:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:2:2:4]","description":"returns unauthorized for get_streak_info","full_description":"API::Compatibility POST /api/method/*method_path without authentication protected endpoints returns unauthorized for get_streak_info","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":618,"run_time":0.001266988,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :unauthorized (401) but it was :ok (200)","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:621:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:2:2:5]","description":"returns unauthorized for save_current_lesson","full_description":"API::Compatibility POST /api/method/*method_path without authentication protected endpoints returns unauthorized for save_current_lesson","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":624,"run_time":0.061960168,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `id' for nil","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:626:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:3:1]","description":"returns 404 for unknown method","full_description":"API::Compatibility POST /api/method/*method_path with invalid method path returns 404 for unknown method","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":634,"run_time":0.00815043,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:4:1]","description":"handles service errors gracefully","full_description":"API::Compatibility POST /api/method/*method_path with server errors handles service errors gracefully","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":644,"run_time":0.007230634,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :internal_server_error (500) but it was :ok (200)","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:649:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:5:1]","description":"handles JSON parameters correctly","full_description":"API::Compatibility POST /api/method/*method_path parameter handling handles JSON parameters correctly","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":656,"run_time":0.077380693,"pending_message":null},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:5:2]","description":"handles form parameters correctly","full_description":"API::Compatibility POST /api/method/*method_path parameter handling handles form parameters correctly","status":"failed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":664,"run_time":0.410297637,"pending_message":null,"exception":{"class":"ActionView::Template::Error","message":"Error occurred while parsing request parameters","backtrace":["./spec/requests/api/compatibility/compatibility_controller_spec.rb:665:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","JSON::ParserError:","  unexpected character: 'course=1' at line 1 column 1","  ./app/controllers/api/compatibility_controller.rb:9:in `handle_method'"]}},{"id":"./spec/requests/api/compatibility/compatibility_controller_spec.rb[1:1:5:3]","description":"handles missing parameters gracefully","full_description":"API::Compatibility POST /api/method/*method_path parameter handling handles missing parameters gracefully","status":"passed","file_path":"./spec/requests/api/compatibility/compatibility_controller_spec.rb","line_number":671,"run_time":0.012612533,"pending_message":null},{"id":"./spec/requests/api/courses_spec.rb[1:1:1]","description":"returns published courses","full_description":"Api::Courses GET /api/courses returns published courses","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":20,"run_time":0.052087341,"pending_message":null,"exception":{"class":"TypeError","message":"no implicit conversion of String into Integer","backtrace":["./spec/requests/api/courses_spec.rb:25:in `[]'","./spec/requests/api/courses_spec.rb:25:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:1:2]","description":"includes course details","full_description":"Api::Courses GET /api/courses includes course details","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":29,"run_time":0.04200216,"pending_message":null,"exception":{"class":"TypeError","message":"no implicit conversion of String into Integer","backtrace":["./spec/requests/api/courses_spec.rb:33:in `[]'","./spec/requests/api/courses_spec.rb:33:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:1:3]","description":"supports pagination","full_description":"Api::Courses GET /api/courses supports pagination","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":41,"run_time":0.041539257,"pending_message":null,"exception":{"class":"TypeError","message":"no implicit conversion of String into Integer","backtrace":["./spec/requests/api/courses_spec.rb:46:in `[]'","./spec/requests/api/courses_spec.rb:46:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:1:4]","description":"supports filtering by category","full_description":"Api::Courses GET /api/courses supports filtering by category","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":49,"run_time":0.037963527,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_category\"","backtrace":["./spec/requests/api/courses_spec.rb:50:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_category\"","  ./spec/requests/api/courses_spec.rb:50:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:2:1]","description":"returns course details","full_description":"Api::Courses GET /api/courses/:course returns course details","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":66,"run_time":0.017728518,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:63:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:2:2]","description":"includes course chapters and lessons","full_description":"Api::Courses GET /api/courses/:course includes course chapters and lessons","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":79,"run_time":0.032937333,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:63:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:2:3]","description":"includes enrollment status for authenticated user","full_description":"Api::Courses GET /api/courses/:course includes enrollment status for authenticated user","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":87,"run_time":0.027423798,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:63:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:2:4]","description":"returns 404 for non-existent course","full_description":"Api::Courses GET /api/courses/:course returns 404 for non-existent course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":97,"run_time":0.045622351,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:63:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:2:5]","description":"returns 404 for unpublished course for non-instructor","full_description":"Api::Courses GET /api/courses/:course returns 404 for unpublished course for non-instructor","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":103,"run_time":0.055523974,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:63:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:2:6]","description":"allows instructor to view unpublished course","full_description":"Api::Courses GET /api/courses/:course allows instructor to view unpublished course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":111,"run_time":0.049683258,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:63:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:3:1:1]","description":"creates a new course","full_description":"Api::Courses POST /api/courses when user is authorized creates a new course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":137,"run_time":0.018982906,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'roles' for User.","backtrace":["./spec/requests/api/courses_spec.rb:133:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `roles=' for an instance of User","  ./spec/requests/api/courses_spec.rb:133:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:3:1:2]","description":"assigns current user as instructor","full_description":"Api::Courses POST /api/courses when user is authorized assigns current user as instructor","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":147,"run_time":0.016280618,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'roles' for User.","backtrace":["./spec/requests/api/courses_spec.rb:133:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `roles=' for an instance of User","  ./spec/requests/api/courses_spec.rb:133:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:3:1:3]","description":"returns validation errors for invalid data","full_description":"Api::Courses POST /api/courses when user is authorized returns validation errors for invalid data","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":154,"run_time":0.009527419,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'roles' for User.","backtrace":["./spec/requests/api/courses_spec.rb:133:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `roles=' for an instance of User","  ./spec/requests/api/courses_spec.rb:133:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:3:2:1]","description":"returns unauthorized status","full_description":"Api::Courses POST /api/courses when user is not authorized returns unauthorized status","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":164,"run_time":0.012600555,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :unauthorized (401) but it was :created (201)","backtrace":["./spec/requests/api/courses_spec.rb:167:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:4:3]","description":"returns 404 for non-existent course","full_description":"Api::Courses PUT /api/courses/:course returns 404 for non-existent course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":211,"run_time":0.015607277,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a not_found status code (404) but it was 401","backtrace":["./spec/requests/api/courses_spec.rb:215:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:4:1:1]","description":"updates the course","full_description":"Api::Courses PUT /api/courses/:course when user is course instructor updates the course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":185,"run_time":0.020518782,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:186:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:4:1:2]","description":"returns validation errors for invalid data","full_description":"Api::Courses PUT /api/courses/:course when user is course instructor returns validation errors for invalid data","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":194,"run_time":0.019690059,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:195:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:4:2:1]","description":"returns unauthorized status","full_description":"Api::Courses PUT /api/courses/:course when user is not course instructor returns unauthorized status","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":204,"run_time":0.020550111,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:205:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:5:3]","description":"returns 404 for non-existent course","full_description":"Api::Courses DELETE /api/courses/:course returns 404 for non-existent course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":253,"run_time":0.014847601,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a not_found status code (404) but it was 401","backtrace":["./spec/requests/api/courses_spec.rb:257:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:5:1:1]","description":"deletes the course","full_description":"Api::Courses DELETE /api/courses/:course when user is course instructor deletes the course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":225,"run_time":0.019694847,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:226:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:5:1:2]","description":"deletes associated data","full_description":"Api::Courses DELETE /api/courses/:course when user is course instructor deletes associated data","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":236,"run_time":0.019397472,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:237:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:5:2:1]","description":"returns unauthorized status","full_description":"Api::Courses DELETE /api/courses/:course when user is not course instructor returns unauthorized status","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":246,"run_time":0.018065513,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:247:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:6:1]","description":"enrolls user in course","full_description":"Api::Courses POST /api/courses/:course/enroll enrolls user in course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":266,"run_time":0.017520393,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:263:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:6:2]","description":"prevents duplicate enrollment","full_description":"Api::Courses POST /api/courses/:course/enroll prevents duplicate enrollment","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":276,"run_time":0.017406134,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:263:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:6:3]","description":"prevents enrollment in unpublished course","full_description":"Api::Courses POST /api/courses/:course/enroll prevents enrollment in unpublished course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":286,"run_time":0.022476548,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:263:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:6:4:1]","description":"requires payment for paid course","full_description":"Api::Courses POST /api/courses/:course/enroll when enrollment requires payment requires payment for paid course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":301,"run_time":0.020627783,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:263:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:7:1]","description":"returns user progress in course","full_description":"Api::Courses GET /api/courses/:course/progress returns user progress in course","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":315,"run_time":0.019034747,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:313:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/courses_spec.rb[1:7:2]","description":"returns 404 for non-enrolled user","full_description":"Api::Courses GET /api/courses/:course/progress returns 404 for non-enrolled user","status":"failed","file_path":"./spec/requests/api/courses_spec.rb","line_number":327,"run_time":0.028177644,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `instructors=' for an instance of Course","backtrace":["./spec/requests/api/courses_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/api/courses_spec.rb:313:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:1:1:1]","description":"returns unauthorized","full_description":"API::Onboarding GET /api/onboarding/status when user is not authenticated returns unauthorized","status":"passed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":15,"run_time":0.005348537,"pending_message":null},{"id":"./spec/requests/api/onboarding_spec.rb[1:1:2:1]","description":"returns onboarded status immediately","full_description":"API::Onboarding GET /api/onboarding/status when user is not a moderator returns onboarded status immediately","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":22,"run_time":0.01143078,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:25:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:1:3:1:1]","description":"returns not onboarded with all flags false","full_description":"API::Onboarding GET /api/onboarding/status when user is a moderator with no content created returns not onboarded with all flags false","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":37,"run_time":0.013317375,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:40:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:1:3:2:1]","description":"returns partial onboarding status","full_description":"API::Onboarding GET /api/onboarding/status when user is a moderator with only course created returns partial onboarding status","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":54,"run_time":0.020685463,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:57:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:1:3:3:1]","description":"returns partial onboarding status","full_description":"API::Onboarding GET /api/onboarding/status when user is a moderator with course and chapter created returns partial onboarding status","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":74,"run_time":0.027737067,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:77:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:1:3:4:1]","description":"returns partial onboarding status","full_description":"API::Onboarding GET /api/onboarding/status when user is a moderator with course, chapter, and lesson created returns partial onboarding status","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":95,"run_time":0.033804596,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:98:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:1:3:5:1]","description":"returns fully onboarded status","full_description":"API::Onboarding GET /api/onboarding/status when user is a moderator with all content created returns fully onboarded status","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":117,"run_time":0.034432276,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:120:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:1:3:5:2]","description":"updates LMS Settings to mark onboarding complete","full_description":"API::Onboarding GET /api/onboarding/status when user is a moderator with all content created updates LMS Settings to mark onboarding complete","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":130,"run_time":0.035905015,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected true\n     got false\n","backtrace":["./spec/requests/api/onboarding_spec.rb:135:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:2:1:1]","description":"returns unauthorized","full_description":"API::Onboarding GET /api/onboarding/first-course when user is not authenticated returns unauthorized","status":"passed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":143,"run_time":0.001883389,"pending_message":null},{"id":"./spec/requests/api/onboarding_spec.rb[1:2:2:1]","description":"returns nil","full_description":"API::Onboarding GET /api/onboarding/first-course when no courses exist returns nil","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":150,"run_time":0.007774844,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:153:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:2:3:1]","description":"returns the first course title","full_description":"API::Onboarding GET /api/onboarding/first-course when courses exist returns the first course title","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":162,"run_time":0.015649113,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:165:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:3:1:1]","description":"returns unauthorized","full_description":"API::Onboarding GET /api/onboarding/first-batch when user is not authenticated returns unauthorized","status":"passed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":176,"run_time":0.001630925,"pending_message":null},{"id":"./spec/requests/api/onboarding_spec.rb[1:3:2:1]","description":"returns nil","full_description":"API::Onboarding GET /api/onboarding/first-batch when no batches exist returns nil","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":183,"run_time":0.007488747,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:186:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:3:3:1]","description":"returns the first batch title","full_description":"API::Onboarding GET /api/onboarding/first-batch when batches exist returns the first batch title","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":195,"run_time":0.024514077,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:198:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:4:1:1]","description":"returns onboarding status","full_description":"API::Onboarding POST /api/onboarding/handle_method (Frappe Compatibility) when handling is_onboarding_complete method returns onboarding status","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":207,"run_time":0.00907312,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:212:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:4:2:1]","description":"returns first course name","full_description":"API::Onboarding POST /api/onboarding/handle_method (Frappe Compatibility) when handling get_first_course method returns first course name","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":225,"run_time":0.01742847,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:230:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:4:3:1]","description":"sets onboarding complete status","full_description":"API::Onboarding POST /api/onboarding/handle_method (Frappe Compatibility) when handling set_value method for onboarding completion sets onboarding complete status","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":237,"run_time":0.009069844,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:249:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:4:4:1]","description":"returns error","full_description":"API::Onboarding POST /api/onboarding/handle_method (Frappe Compatibility) when handling unknown method returns error","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":255,"run_time":0.007412219,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a not_found status code (404) but it was 401","backtrace":["./spec/requests/api/onboarding_spec.rb:260:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/api/onboarding_spec.rb[1:4:5:1]","description":"returns error","full_description":"API::Onboarding POST /api/onboarding/handle_method (Frappe Compatibility) when handling set_value with invalid parameters returns error","status":"failed","file_path":"./spec/requests/api/onboarding_spec.rb","line_number":267,"run_time":0.007282887,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :unprocessable_entity (422) but it was :unauthorized (401)","backtrace":["./spec/requests/api/onboarding_spec.rb:277:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/dashboard_spec.rb[1:1:1]","description":"returns http success","full_description":"Dashboards GET /index returns http success","status":"failed","file_path":"./spec/requests/dashboard_spec.rb","line_number":5,"run_time":0.159880777,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have a success status code (2xx) but it was 404","backtrace":["./spec/requests/dashboard_spec.rb:7:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/frappe_test_parity_spec.rb[1:1:1]","description":"replicates Frappe course creation workflow","full_description":"Frappe LMS Test Parity Course Creation Test Parity (equivalent to course_creation.cy.js) replicates Frappe course creation workflow","status":"failed","file_path":"./spec/requests/frappe_test_parity_spec.rb","line_number":17,"run_time":0.009933523,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `headers' for nil","backtrace":["./spec/requests/frappe_test_parity_spec.rb:291:in `sign_in'","./spec/requests/frappe_test_parity_spec.rb:13:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/frappe_test_parity_spec.rb[1:2:1]","description":"replicates Frappe batch creation and student management workflow","full_description":"Frappe LMS Test Parity Batch Creation Test Parity (equivalent to batch_creation.cy.js) replicates Frappe batch creation and student management workflow","status":"failed","file_path":"./spec/requests/frappe_test_parity_spec.rb","line_number":71,"run_time":0.006537714,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `headers' for nil","backtrace":["./spec/requests/frappe_test_parity_spec.rb:291:in `sign_in'","./spec/requests/frappe_test_parity_spec.rb:13:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/frappe_test_parity_spec.rb[1:3:1]","description":"replicates Frappe discussion creation and reply workflow","full_description":"Frappe LMS Test Parity Discussion Test Parity (equivalent to Frappe discussion posting) replicates Frappe discussion creation and reply workflow","status":"failed","file_path":"./spec/requests/frappe_test_parity_spec.rb","line_number":127,"run_time":0.005920359,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `headers' for nil","backtrace":["./spec/requests/frappe_test_parity_spec.rb:291:in `sign_in'","./spec/requests/frappe_test_parity_spec.rb:13:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/frappe_test_parity_spec.rb[1:4:1]","description":"replicates Frappe course enrollment and progress tracking","full_description":"Frappe LMS Test Parity Enrollment Test Parity (equivalent to Frappe enrollment workflows) replicates Frappe course enrollment and progress tracking","status":"failed","file_path":"./spec/requests/frappe_test_parity_spec.rb","line_number":163,"run_time":0.00590165,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `headers' for nil","backtrace":["./spec/requests/frappe_test_parity_spec.rb:291:in `sign_in'","./spec/requests/frappe_test_parity_spec.rb:13:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/frappe_test_parity_spec.rb[1:5:1]","description":"replicates Frappe quiz creation and submission workflow","full_description":"Frappe LMS Test Parity Quiz Test Parity (equivalent to Frappe quiz functionality) replicates Frappe quiz creation and submission workflow","status":"failed","file_path":"./spec/requests/frappe_test_parity_spec.rb","line_number":190,"run_time":0.00595849,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `headers' for nil","backtrace":["./spec/requests/frappe_test_parity_spec.rb:291:in `sign_in'","./spec/requests/frappe_test_parity_spec.rb:13:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/frappe_test_parity_spec.rb[1:6:1]","description":"replicates Frappe payment initialization and verification","full_description":"Frappe LMS Test Parity Payment Test Parity (equivalent to Frappe payment workflows) replicates Frappe payment initialization and verification","status":"failed","file_path":"./spec/requests/frappe_test_parity_spec.rb","line_number":232,"run_time":0.005851643,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `headers' for nil","backtrace":["./spec/requests/frappe_test_parity_spec.rb:291:in `sign_in'","./spec/requests/frappe_test_parity_spec.rb:13:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/frappe_test_parity_spec.rb[1:7:1]","description":"replicates Frappe SCORM package upload and tracking","full_description":"Frappe LMS Test Parity SCORM Test Parity (equivalent to Frappe SCORM functionality) replicates Frappe SCORM package upload and tracking","status":"failed","file_path":"./spec/requests/frappe_test_parity_spec.rb","line_number":255,"run_time":0.005980614,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `headers' for nil","backtrace":["./spec/requests/frappe_test_parity_spec.rb:291:in `sign_in'","./spec/requests/frappe_test_parity_spec.rb:13:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:1:1]","description":"returns is_onboarded: true for non-moderators (exact Frappe logic)","full_description":"Frappe LMS Onboarding Replica Onboarding Status API (exact replica of lms.utils.is_onboarding_complete) returns is_onboarded: true for non-moderators (exact Frappe logic)","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":19,"run_time":0.014316724,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :ok (200) but it was :unauthorized (401)","backtrace":["./spec/requests/onboarding_replica_spec.rb:24:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:1:2]","description":"returns detailed onboarding status for moderators (exact Frappe logic)","full_description":"Frappe LMS Onboarding Replica Onboarding Status API (exact replica of lms.utils.is_onboarding_complete) returns detailed onboarding status for moderators (exact Frappe logic)","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":32,"run_time":0.009885997,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :ok (200) but it was :unauthorized (401)","backtrace":["./spec/requests/onboarding_replica_spec.rb:37:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:1:3]","description":"marks onboarding complete when moderator creates content (exact Frappe logic)","full_description":"Frappe LMS Onboarding Replica Onboarding Status API (exact replica of lms.utils.is_onboarding_complete) marks onboarding complete when moderator creates content (exact Frappe logic)","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":46,"run_time":0.020360486,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/requests/onboarding_replica_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/onboarding_replica_spec.rb:50:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:2:1]","description":"captures user persona with role and use case (exact Frappe logic)","full_description":"Frappe LMS Onboarding Replica Persona Capture API (exact replica of Frappe persona flow) captures user persona with role and use case (exact Frappe logic)","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":67,"run_time":0.015095098,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :ok (200) but it was :unauthorized (401)","backtrace":["./spec/requests/onboarding_replica_spec.rb:79:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:2:2]","description":"sets persona_captured flag in LMS Settings (exact Frappe logic)","full_description":"Frappe LMS Onboarding Replica Persona Capture API (exact replica of Frappe persona flow) sets persona_captured flag in LMS Settings (exact Frappe logic)","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":89,"run_time":0.303089654,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :ok (200) but it was :not_found (404)","backtrace":["./spec/requests/onboarding_replica_spec.rb:107:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:3:1]","description":"shows onboarding header for moderators who havent completed onboarding","full_description":"Frappe LMS Onboarding Replica Onboarding UI Flow (exact replica of Frappe onboarding header) shows onboarding header for moderators who havent completed onboarding","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":114,"run_time":0.017275261,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :ok (200) but it was :unauthorized (401)","backtrace":["./spec/requests/onboarding_replica_spec.rb:119:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:3:2]","description":"hides onboarding header for moderators who have completed onboarding","full_description":"Frappe LMS Onboarding Replica Onboarding UI Flow (exact replica of Frappe onboarding header) hides onboarding header for moderators who have completed onboarding","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":127,"run_time":0.022203972,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/requests/onboarding_replica_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/onboarding_replica_spec.rb:131:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:3:3]","description":"hides onboarding header for non-moderators","full_description":"Frappe LMS Onboarding Replica Onboarding UI Flow (exact replica of Frappe onboarding header) hides onboarding header for non-moderators","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":141,"run_time":0.015856266,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :ok (200) but it was :unauthorized (401)","backtrace":["./spec/requests/onboarding_replica_spec.rb:146:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:4:1]","description":"shows disabled chapter link when no course exists","full_description":"Frappe LMS Onboarding Replica Onboarding Step Links (exact replica of Frappe step progression) shows disabled chapter link when no course exists","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":152,"run_time":0.011680239,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected \"{\\\"error\\\":\\\"Not Authorized\\\"}\" to include \"disabled\"","backtrace":["./spec/requests/onboarding_replica_spec.rb:157:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:4:2]","description":"enables chapter link when course exists","full_description":"Frappe LMS Onboarding Replica Onboarding Step Links (exact replica of Frappe step progression) enables chapter link when course exists","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":161,"run_time":0.012961897,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected \"{\\\"error\\\":\\\"Not Authorized\\\"}\" to include \"href=\\\"/courses/biomedical-science-450/outline\\\"\"","backtrace":["./spec/requests/onboarding_replica_spec.rb:168:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:4:3]","description":"enables lesson link when chapter exists","full_description":"Frappe LMS Onboarding Replica Onboarding Step Links (exact replica of Frappe step progression) enables lesson link when chapter exists","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":171,"run_time":0.013742306,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected \"{\\\"error\\\":\\\"Not Authorized\\\"}\" to include \"href=\\\"/courses/teaching-317/learn/1.1/edit\\\"\"","backtrace":["./spec/requests/onboarding_replica_spec.rb:179:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:5:1]","description":"allows skipping onboarding by setting LMS Settings flag","full_description":"Frappe LMS Onboarding Replica Onboarding Skip Functionality (exact replica of Frappe skip) allows skipping onboarding by setting LMS Settings flag","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":184,"run_time":0.177167214,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :ok (200) but it was :not_found (404)","backtrace":["./spec/requests/onboarding_replica_spec.rb:193:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:6:1]","description":"redirects to persona form when no courses exist and persona not captured","full_description":"Frappe LMS Onboarding Replica Persona Form Integration (exact replica of Frappe persona flow) redirects to persona form when no courses exist and persona not captured","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":202,"run_time":0.170442669,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected the response to have status code :ok (200) but it was :not_found (404)","backtrace":["./spec/requests/onboarding_replica_spec.rb:213:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:6:2]","description":"does not redirect to persona form when persona is captured","full_description":"Frappe LMS Onboarding Replica Persona Form Integration (exact replica of Frappe persona flow) does not redirect to persona form when persona is captured","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":218,"run_time":0.176986422,"pending_message":null,"exception":{"class":"JSON::ParserError","message":"unexpected character: '\u003c!DOCTYPE' at line 1 column 1","backtrace":["./spec/requests/onboarding_replica_spec.rb:237:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:7:1]","description":"tracks course creation progress","full_description":"Frappe LMS Onboarding Replica Onboarding Progress Tracking (exact replica of Frappe progress logic) tracks course creation progress","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":243,"run_time":0.01826771,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected: truthy value\n     got: nil","backtrace":["./spec/requests/onboarding_replica_spec.rb:256:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:7:2]","description":"tracks chapter creation progress","full_description":"Frappe LMS Onboarding Replica Onboarding Progress Tracking (exact replica of Frappe progress logic) tracks chapter creation progress","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":260,"run_time":0.015017077,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected: truthy value\n     got: nil","backtrace":["./spec/requests/onboarding_replica_spec.rb:274:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/requests/onboarding_replica_spec.rb[1:7:3]","description":"tracks lesson creation progress and completes onboarding","full_description":"Frappe LMS Onboarding Replica Onboarding Progress Tracking (exact replica of Frappe progress logic) tracks lesson creation progress and completes onboarding","status":"failed","file_path":"./spec/requests/onboarding_replica_spec.rb","line_number":278,"run_time":0.025518655,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Chapter must exist, Chapter can't be blank","backtrace":["./spec/requests/onboarding_replica_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","./spec/requests/onboarding_replica_spec.rb:290:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/analytics/chart_service_spec.rb[1:1:1:1]","description":"returns signup data for the last 7 days","full_description":"Analytics::ChartService.call when requesting New Signups chart returns signup data for the last 7 days","status":"passed","file_path":"./spec/services/analytics/chart_service_spec.rb","line_number":6,"run_time":0.0011497739999999999,"pending_message":null},{"id":"./spec/services/analytics/chart_service_spec.rb[1:1:2:1]","description":"returns enrollment data for the last 7 days","full_description":"Analytics::ChartService.call when requesting Course Enrollments chart returns enrollment data for the last 7 days","status":"passed","file_path":"./spec/services/analytics/chart_service_spec.rb","line_number":20,"run_time":0.000878792,"pending_message":null},{"id":"./spec/services/analytics/chart_service_spec.rb[1:1:3:1]","description":"returns certification data","full_description":"Analytics::ChartService.call when requesting Certification chart returns certification data","status":"passed","file_path":"./spec/services/analytics/chart_service_spec.rb","line_number":34,"run_time":0.000834544,"pending_message":null},{"id":"./spec/services/analytics/chart_service_spec.rb[1:1:4:1]","description":"returns empty array","full_description":"Analytics::ChartService.call when requesting unknown chart returns empty array","status":"passed","file_path":"./spec/services/analytics/chart_service_spec.rb","line_number":46,"run_time":0.000286647,"pending_message":null},{"id":"./spec/services/analytics/chart_service_spec.rb[1:1:5:1]","description":"returns all chart data","full_description":"Analytics::ChartService.call when no chart name provided returns all chart data","status":"passed","file_path":"./spec/services/analytics/chart_service_spec.rb","line_number":54,"run_time":0.001347974,"pending_message":null},{"id":"./spec/services/analytics/heatmap_data_service_spec.rb[1:1:1:1]","description":"returns empty heatmap data","full_description":"Analytics::HeatmapDataService.call when user has no activity returns empty heatmap data","status":"failed","file_path":"./spec/services/analytics/heatmap_data_service_spec.rb","line_number":9,"run_time":0.012446555,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected `[{:data=\u003e[{:count=\u003e0, :date=\u003e\"2025-05-04\", :label=\u003e\"0 activities on 04 May\"}, {:count=\u003e0, :date=\u003e\"202...ies on 22 Nov\"}, {:count=\u003e0, :date=\u003e\"2025-11-29\", :label=\u003e\"0 activities on 29 Nov\"}], :name=\u003e\"Sat\"}].empty?` to be truthy, got false","backtrace":["./spec/services/analytics/heatmap_data_service_spec.rb:12:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/analytics/heatmap_data_service_spec.rb[1:1:2:1]","description":"returns heatmap data with activities","full_description":"Analytics::HeatmapDataService.call when user has activity returns heatmap data with activities","status":"failed","file_path":"./spec/services/analytics/heatmap_data_service_spec.rb","line_number":28,"run_time":0.032542297,"pending_message":null,"exception":{"class":"ActiveRecord::RecordNotUnique","message":"SQLite3::ConstraintException: UNIQUE constraint failed: lesson_progresses.user_id, lesson_progresses.lesson_id","backtrace":["./spec/services/analytics/heatmap_data_service_spec.rb:21:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  UNIQUE constraint failed: lesson_progresses.user_id, lesson_progresses.lesson_id","  ./spec/services/analytics/heatmap_data_service_spec.rb:21:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/analytics/heatmap_data_service_spec.rb[1:1:3:1]","description":"returns empty data","full_description":"Analytics::HeatmapDataService.call when no user provided returns empty data","status":"passed","file_path":"./spec/services/analytics/heatmap_data_service_spec.rb","line_number":42,"run_time":0.002273058,"pending_message":null},{"id":"./spec/services/analytics/streak_info_service_spec.rb[1:1:1:1]","description":"returns zero streaks","full_description":"Analytics::StreakInfoService.call when user has no activity returns zero streaks","status":"passed","file_path":"./spec/services/analytics/streak_info_service_spec.rb","line_number":9,"run_time":0.007518314,"pending_message":null},{"id":"./spec/services/analytics/streak_info_service_spec.rb[1:1:2:1]","description":"calculates current and longest streak","full_description":"Analytics::StreakInfoService.call when user has activity calculates current and longest streak","status":"failed","file_path":"./spec/services/analytics/streak_info_service_spec.rb","line_number":31,"run_time":0.028747013,"pending_message":null,"exception":{"class":"ActiveRecord::RecordNotUnique","message":"SQLite3::ConstraintException: UNIQUE constraint failed: lesson_progresses.user_id, lesson_progresses.lesson_id","backtrace":["./spec/services/analytics/streak_info_service_spec.rb:23:in `block (5 levels) in \u003cmain\u003e'","./spec/services/analytics/streak_info_service_spec.rb:22:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  UNIQUE constraint failed: lesson_progresses.user_id, lesson_progresses.lesson_id","  ./spec/services/analytics/streak_info_service_spec.rb:23:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/analytics/streak_info_service_spec.rb[1:1:3:1]","description":"returns default streak info","full_description":"Analytics::StreakInfoService.call when no user provided returns default streak info","status":"passed","file_path":"./spec/services/analytics/streak_info_service_spec.rb","line_number":42,"run_time":0.000496985,"pending_message":null},{"id":"./spec/services/analytics/streak_info_service_spec.rb[1:1:4:1]","description":"calculates correct current streak","full_description":"Analytics::StreakInfoService.call when user has broken streak calculates correct current streak","status":"failed","file_path":"./spec/services/analytics/streak_info_service_spec.rb","line_number":64,"run_time":0.027408784,"pending_message":null,"exception":{"class":"ActiveRecord::RecordNotUnique","message":"SQLite3::ConstraintException: UNIQUE constraint failed: lesson_progresses.user_id, lesson_progresses.lesson_id","backtrace":["./spec/services/analytics/streak_info_service_spec.rb:56:in `block (5 levels) in \u003cmain\u003e'","./spec/services/analytics/streak_info_service_spec.rb:55:in `each'","./spec/services/analytics/streak_info_service_spec.rb:55:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  UNIQUE constraint failed: lesson_progresses.user_id, lesson_progresses.lesson_id","  ./spec/services/analytics/streak_info_service_spec.rb:56:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/assignment_service_spec.rb[1:1:1:1]","description":"uploads file successfully","full_description":"AssignmentService.upload with valid parameters uploads file successfully","status":"failed","file_path":"./spec/services/assignment_service_spec.rb","line_number":22,"run_time":0.026622348,"pending_message":null,"exception":{"class":"SyntaxError","message":"/config/workspace/gpearls/app/services/system/file_upload_service.rb:160: syntax error, unexpected `end'","backtrace":["./spec/services/assignment_service_spec.rb:23:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/assignment_service_spec.rb[1:1:1:2]","description":"creates LmsFile record","full_description":"AssignmentService.upload with valid parameters creates LmsFile record","status":"failed","file_path":"./spec/services/assignment_service_spec.rb","line_number":41,"run_time":0.017105745,"pending_message":null,"exception":{"class":"SyntaxError","message":"/config/workspace/gpearls/app/services/system/file_upload_service.rb:160: syntax error, unexpected `end'","backtrace":["./spec/services/assignment_service_spec.rb:42:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/assignment_service_spec.rb[1:1:1:3]","description":"creates or updates assignment submission","full_description":"AssignmentService.upload with valid parameters creates or updates assignment submission","status":"failed","file_path":"./spec/services/assignment_service_spec.rb","line_number":63,"run_time":0.017174143,"pending_message":null,"exception":{"class":"SyntaxError","message":"/config/workspace/gpearls/app/services/system/file_upload_service.rb:160: syntax error, unexpected `end'","backtrace":["./spec/services/assignment_service_spec.rb:64:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/assignment_service_spec.rb[1:1:2:1]","description":"returns error","full_description":"AssignmentService.upload without assignment returns error","status":"failed","file_path":"./spec/services/assignment_service_spec.rb","line_number":88,"run_time":0.001050109,"pending_message":null,"exception":{"class":"ArgumentError","message":"the directory 'spec/fixtures/files/' does not contain a file named 'test.pdf'","backtrace":["./spec/services/assignment_service_spec.rb:10:in `block (3 levels) in \u003cmain\u003e'","./spec/services/assignment_service_spec.rb:89:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/assignment_service_spec.rb[1:1:3:1]","description":"returns error","full_description":"AssignmentService.upload without file returns error","status":"passed","file_path":"./spec/services/assignment_service_spec.rb","line_number":97,"run_time":0.037248941,"pending_message":null},{"id":"./spec/services/assignment_service_spec.rb[1:1:4:1]","description":"returns error","full_description":"AssignmentService.upload with non-existent assignment returns error","status":"failed","file_path":"./spec/services/assignment_service_spec.rb","line_number":106,"run_time":0.000915008,"pending_message":null,"exception":{"class":"ArgumentError","message":"the directory 'spec/fixtures/files/' does not contain a file named 'test.pdf'","backtrace":["./spec/services/assignment_service_spec.rb:10:in `block (3 levels) in \u003cmain\u003e'","./spec/services/assignment_service_spec.rb:109:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/assignment_service_spec.rb[1:1:5:1]","description":"returns error","full_description":"AssignmentService.upload with user not enrolled in course returns error","status":"failed","file_path":"./spec/services/assignment_service_spec.rb","line_number":118,"run_time":0.010842622,"pending_message":null,"exception":{"class":"ArgumentError","message":"the directory 'spec/fixtures/files/' does not contain a file named 'test.pdf'","backtrace":["./spec/services/assignment_service_spec.rb:10:in `block (3 levels) in \u003cmain\u003e'","./spec/services/assignment_service_spec.rb:122:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/assignment_service_spec.rb[1:1:6:1]","description":"returns error","full_description":"AssignmentService.upload with file upload failure returns error","status":"failed","file_path":"./spec/services/assignment_service_spec.rb","line_number":135,"run_time":0.017318247,"pending_message":null,"exception":{"class":"SyntaxError","message":"/config/workspace/gpearls/app/services/system/file_upload_service.rb:160: syntax error, unexpected `end'","backtrace":["./spec/services/assignment_service_spec.rb:136:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:1:1]","description":"creates batch enrollment","full_description":"Batches::BatchEnrollmentService.enroll_in_batch successful enrollment creates batch enrollment","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":14,"run_time":0.027023194,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:1:2]","description":"creates course enrollments for batch courses","full_description":"Batches::BatchEnrollmentService.enroll_in_batch successful enrollment creates course enrollments for batch courses","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":22,"run_time":0.022860596,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:1:3]","description":"returns success for already enrolled user","full_description":"Batches::BatchEnrollmentService.enroll_in_batch successful enrollment returns success for already enrolled user","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":33,"run_time":0.036404243,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:2:1]","description":"fails for non-existent batch","full_description":"Batches::BatchEnrollmentService.enroll_in_batch validation failures fails for non-existent batch","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":44,"run_time":0.028216547,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:2:2]","description":"fails for nil user","full_description":"Batches::BatchEnrollmentService.enroll_in_batch validation failures fails for nil user","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":51,"run_time":0.025462057,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:2:3]","description":"fails for batch not allowing self-enrollment","full_description":"Batches::BatchEnrollmentService.enroll_in_batch validation failures fails for batch not allowing self-enrollment","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":58,"run_time":0.026956139,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:2:4]","description":"fails for unpublished batch","full_description":"Batches::BatchEnrollmentService.enroll_in_batch validation failures fails for unpublished batch","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":66,"run_time":0.02582284,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:2:5]","description":"fails for full batch","full_description":"Batches::BatchEnrollmentService.enroll_in_batch validation failures fails for full batch","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":74,"run_time":0.025961135,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:2:6]","description":"fails for batch not accepting enrollments","full_description":"Batches::BatchEnrollmentService.enroll_in_batch validation failures fails for batch not accepting enrollments","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":84,"run_time":0.025844013,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:3:1]","description":"fails when there are time conflicts","full_description":"Batches::BatchEnrollmentService.enroll_in_batch time conflicts fails when there are time conflicts","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":110,"run_time":0.027363284,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:4:1]","description":"fails when there are course conflicts","full_description":"Batches::BatchEnrollmentService.enroll_in_batch course conflicts fails when there are course conflicts","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":128,"run_time":0.026049133,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:5:1]","description":"sends confirmation email","full_description":"Batches::BatchEnrollmentService.enroll_in_batch email notifications sends confirmation email","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":137,"run_time":0.023670002,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:6:1]","description":"returns proper success response format","full_description":"Batches::BatchEnrollmentService.enroll_in_batch Frappe API compatibility returns proper success response format","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":145,"run_time":0.022504982,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_enrollment_service_spec.rb[1:1:6:2]","description":"returns proper error response format","full_description":"Batches::BatchEnrollmentService.enroll_in_batch Frappe API compatibility returns proper error response format","status":"failed","file_path":"./spec/services/batches/batch_enrollment_service_spec.rb","line_number":154,"run_time":0.023476639,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_enrollment_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:1:1]","description":"returns all enrolled students with Frappe-compatible format","full_description":"Batches::BatchStudentsService.call with valid batch returns all enrolled students with Frappe-compatible format","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":12,"run_time":0.053801624,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: 2\n     got: 0\n\n(compared using ==)\n","backtrace":["./spec/services/batches/batch_students_service_spec.rb:16:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:1:2]","description":"includes user details","full_description":"Batches::BatchStudentsService.call with valid batch includes user details","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":25,"run_time":0.037053527,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `[]' for nil","backtrace":["./spec/services/batches/batch_students_service_spec.rb:28:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:1:3]","description":"includes enrollment information","full_description":"Batches::BatchStudentsService.call with valid batch includes enrollment information","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":37,"run_time":0.037030701,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected nil to respond to `has_key?`","backtrace":["./spec/services/batches/batch_students_service_spec.rb:41:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:2:1]","description":"filters by active status","full_description":"Batches::BatchStudentsService.call with status filter filters by active status","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":53,"run_time":0.051067928,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: End date cannot be before the start date","backtrace":["./spec/services/batches/batch_students_service_spec.rb:50:in `block (4 levels) in \u003cmain\u003e'","./spec/services/batches/batch_students_service_spec.rb:51:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:2:2]","description":"filters by completed status","full_description":"Batches::BatchStudentsService.call with status filter filters by completed status","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":61,"run_time":0.049663456,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: End date cannot be before the start date","backtrace":["./spec/services/batches/batch_students_service_spec.rb:50:in `block (4 levels) in \u003cmain\u003e'","./spec/services/batches/batch_students_service_spec.rb:51:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:2:3]","description":"filters by upcoming status","full_description":"Batches::BatchStudentsService.call with status filter filters by upcoming status","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":68,"run_time":0.044023694,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: End date cannot be before the start date","backtrace":["./spec/services/batches/batch_students_service_spec.rb:50:in `block (4 levels) in \u003cmain\u003e'","./spec/services/batches/batch_students_service_spec.rb:51:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:3:1]","description":"calculates user progress correctly","full_description":"Batches::BatchStudentsService.call with progress calculation calculates user progress correctly","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":90,"run_time":0.050783375,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_students_service_spec.rb:85:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:3:2]","description":"includes last activity timestamp","full_description":"Batches::BatchStudentsService.call with progress calculation includes last activity timestamp","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":97,"run_time":0.045120667,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batch_students_service_spec.rb:85:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:4:1]","description":"includes certificate count","full_description":"Batches::BatchStudentsService.call with certificates includes certificate count","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":108,"run_time":0.03246147,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certificate\"","backtrace":["./spec/services/batches/batch_students_service_spec.rb:106:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certificate\"","  ./spec/services/batches/batch_students_service_spec.rb:106:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:5:1]","description":"returns empty array for non-existent batch","full_description":"Batches::BatchStudentsService.call with invalid batch returns empty array for non-existent batch","status":"passed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":117,"run_time":0.032317486,"pending_message":null},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:6:1]","description":"returns exact field structure matching Frappe LMS","full_description":"Batches::BatchStudentsService.call Frappe API compatibility returns exact field structure matching Frappe LMS","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":125,"run_time":0.032388948,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"Missing field: name","backtrace":["./spec/services/batches/batch_students_service_spec.rb:137:in `block (5 levels) in \u003cmain\u003e'","./spec/services/batches/batch_students_service_spec.rb:136:in `each'","./spec/services/batches/batch_students_service_spec.rb:136:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_students_service_spec.rb[1:1:6:2]","description":"formats dates correctly","full_description":"Batches::BatchStudentsService.call Frappe API compatibility formats dates correctly","status":"failed","file_path":"./spec/services/batches/batch_students_service_spec.rb","line_number":141,"run_time":0.035131698,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `[]' for nil","backtrace":["./spec/services/batches/batch_students_service_spec.rb:145:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_timetable_service_spec.rb[1:1:1:1]","description":"returns timetable entries with Frappe-compatible format","full_description":"Batches::BatchTimetableService.call with valid batch returns timetable entries with Frappe-compatible format","status":"failed","file_path":"./spec/services/batches/batch_timetable_service_spec.rb","line_number":31,"run_time":0.032238863,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"batch_timetable\"","backtrace":["./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"batch_timetable\"","  ./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_timetable_service_spec.rb[1:1:1:2]","description":"includes live classes when show_live_class is enabled","full_description":"Batches::BatchTimetableService.call with valid batch includes live classes when show_live_class is enabled","status":"failed","file_path":"./spec/services/batches/batch_timetable_service_spec.rb","line_number":51,"run_time":0.031932706,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"batch_timetable\"","backtrace":["./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"batch_timetable\"","  ./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_timetable_service_spec.rb[1:1:1:3]","description":"excludes live classes when show_live_class is disabled","full_description":"Batches::BatchTimetableService.call with valid batch excludes live classes when show_live_class is disabled","status":"failed","file_path":"./spec/services/batches/batch_timetable_service_spec.rb","line_number":69,"run_time":0.043157474,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"batch_timetable\"","backtrace":["./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"batch_timetable\"","  ./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_timetable_service_spec.rb[1:1:2:1]","description":"filters by start_date","full_description":"Batches::BatchTimetableService.call with date filters filters by start_date","status":"failed","file_path":"./spec/services/batches/batch_timetable_service_spec.rb","line_number":87,"run_time":0.036118848,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"batch_timetable\"","backtrace":["./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"batch_timetable\"","  ./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_timetable_service_spec.rb[1:1:2:2]","description":"filters by end_date","full_description":"Batches::BatchTimetableService.call with date filters filters by end_date","status":"failed","file_path":"./spec/services/batches/batch_timetable_service_spec.rb","line_number":95,"run_time":0.035843669,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"batch_timetable\"","backtrace":["./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"batch_timetable\"","  ./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_timetable_service_spec.rb[1:1:2:3]","description":"filters by both start_date and end_date","full_description":"Batches::BatchTimetableService.call with date filters filters by both start_date and end_date","status":"failed","file_path":"./spec/services/batches/batch_timetable_service_spec.rb","line_number":102,"run_time":0.034517569,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"batch_timetable\"","backtrace":["./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"batch_timetable\"","  ./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_timetable_service_spec.rb[1:1:3:1]","description":"returns empty array for non-existent batch","full_description":"Batches::BatchTimetableService.call with invalid batch returns empty array for non-existent batch","status":"failed","file_path":"./spec/services/batches/batch_timetable_service_spec.rb","line_number":113,"run_time":0.036138509,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"batch_timetable\"","backtrace":["./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"batch_timetable\"","  ./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_timetable_service_spec.rb[1:1:4:1]","description":"orders by date and start_time","full_description":"Batches::BatchTimetableService.call ordering orders by date and start_time","status":"failed","file_path":"./spec/services/batches/batch_timetable_service_spec.rb","line_number":129,"run_time":0.032583832,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"batch_timetable\"","backtrace":["./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"batch_timetable\"","  ./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_timetable_service_spec.rb[1:1:5:1]","description":"returns exact field names matching Frappe LMS","full_description":"Batches::BatchTimetableService.call Frappe API compatibility returns exact field names matching Frappe LMS","status":"failed","file_path":"./spec/services/batches/batch_timetable_service_spec.rb","line_number":140,"run_time":0.03216654,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"batch_timetable\"","backtrace":["./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"batch_timetable\"","  ./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batch_timetable_service_spec.rb[1:1:5:2]","description":"formats dates and times correctly","full_description":"Batches::BatchTimetableService.call Frappe API compatibility formats dates and times correctly","status":"failed","file_path":"./spec/services/batches/batch_timetable_service_spec.rb","line_number":155,"run_time":0.04146334,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"batch_timetable\"","backtrace":["./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"batch_timetable\"","  ./spec/services/batches/batch_timetable_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:1:1]","description":"returns all published batches with Frappe-compatible format","full_description":"Batches::BatchesService.call without filters returns all published batches with Frappe-compatible format","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":11,"run_time":0.019174785,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:1:2]","description":"includes course information","full_description":"Batches::BatchesService.call without filters includes course information","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":32,"run_time":0.018215349,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:1:3]","description":"includes proper timestamps","full_description":"Batches::BatchesService.call without filters includes proper timestamps","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":41,"run_time":0.019232836,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:2:1]","description":"filters by published status","full_description":"Batches::BatchesService.call with filters filters by published status","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":53,"run_time":0.01740259,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:2:2]","description":"filters by start_date","full_description":"Batches::BatchesService.call with filters filters by start_date","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":61,"run_time":0.017607669,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:3:1]","description":"applies limit","full_description":"Batches::BatchesService.call with pagination applies limit","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":73,"run_time":0.016979129,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:3:2]","description":"applies offset","full_description":"Batches::BatchesService.call with pagination applies offset","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":80,"run_time":0.017298808,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:4:1]","description":"orders by start_date desc by default","full_description":"Batches::BatchesService.call with ordering orders by start_date desc by default","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":91,"run_time":0.02028014,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:4:2]","description":"orders by custom field","full_description":"Batches::BatchesService.call with ordering orders by custom field","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":97,"run_time":0.016356257,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:5:1]","description":"returns exact field names matching Frappe LMS","full_description":"Batches::BatchesService.call Frappe API compatibility returns exact field names matching Frappe LMS","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":106,"run_time":0.016393984,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/batches_service_spec.rb[1:1:5:2]","description":"formats dates correctly","full_description":"Batches::BatchesService.call Frappe API compatibility formats dates correctly","status":"failed","file_path":"./spec/services/batches/batches_service_spec.rb","line_number":126,"run_time":0.016343626,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/batches/batches_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/my_batches_service_spec.rb[1:1:1:1]","description":"returns user enrolled batches with Frappe-compatible format","full_description":"Batches::MyBatchesService.call with enrolled user returns user enrolled batches with Frappe-compatible format","status":"failed","file_path":"./spec/services/batches/my_batches_service_spec.rb","line_number":11,"run_time":0.03488348,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected {:description =\u003e \"Eaque in esse. Tenetur quia aut.\", :end_date =\u003e \"2026-01-20\", :enrollment =\u003e {:batch =\u003e 1, ...}, :name =\u003e 1, :published =\u003e false, :start_date =\u003e \"2025-12-02\", :title =\u003e \"Nisi Recusandae Necessitatibus\"} to include {\"name\" =\u003e 1, \"title\" =\u003e \"Nisi Recusandae Necessitatibus\", \"description\" =\u003e \"Eaque in esse. Tenetur quia aut.\", \"start_date\" =\u003e \"2025-12-02\", \"end_date\" =\u003e \"2026-01-20\", \"published\" =\u003e false}\nDiff:\n@@ -1,6 +1,7 @@\n-\"description\" =\u003e \"Eaque in esse. Tenetur quia aut.\",\n-\"end_date\" =\u003e \"2026-01-20\",\n-\"name\" =\u003e 1,\n-\"published\" =\u003e false,\n-\"start_date\" =\u003e \"2025-12-02\",\n-\"title\" =\u003e \"Nisi Recusandae Necessitatibus\",\n+:description =\u003e \"Eaque in esse. Tenetur quia aut.\",\n+:end_date =\u003e \"2026-01-20\",\n+:enrollment =\u003e {:batch=\u003e1, :enrolled_at=\u003e\"2025-11-25 10:31:18\", :member=\u003e1, :name=\u003e1, :status=\u003e\"Upcoming\"},\n+:name =\u003e 1,\n+:published =\u003e false,\n+:start_date =\u003e \"2025-12-02\",\n+:title =\u003e \"Nisi Recusandae Necessitatibus\",\n","backtrace":["./spec/services/batches/my_batches_service_spec.rb:18:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/my_batches_service_spec.rb[1:1:1:2]","description":"includes enrollment information","full_description":"Batches::MyBatchesService.call with enrolled user includes enrollment information","status":"failed","file_path":"./spec/services/batches/my_batches_service_spec.rb","line_number":28,"run_time":0.028356163,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected nil to include {\"name\" =\u003e 1, \"batch\" =\u003e 1, \"member\" =\u003e 1, \"enrolled_at\" =\u003e \"2025-11-25 10:31:18\", \"status\" =\u003e \"Upcoming\"}, but it does not respond to `include?`","backtrace":["./spec/services/batches/my_batches_service_spec.rb:32:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/my_batches_service_spec.rb[1:1:2:1]","description":"returns empty array","full_description":"Batches::MyBatchesService.call with user not enrolled in any batches returns empty array","status":"passed","file_path":"./spec/services/batches/my_batches_service_spec.rb","line_number":45,"run_time":0.027897007,"pending_message":null},{"id":"./spec/services/batches/my_batches_service_spec.rb[1:1:3:1]","description":"returns empty array","full_description":"Batches::MyBatchesService.call with nil user returns empty array","status":"passed","file_path":"./spec/services/batches/my_batches_service_spec.rb","line_number":53,"run_time":0.023912318,"pending_message":null},{"id":"./spec/services/batches/my_batches_service_spec.rb[1:1:4:1]","description":"returns all enrolled batches","full_description":"Batches::MyBatchesService.call multiple enrollments returns all enrolled batches","status":"failed","file_path":"./spec/services/batches/my_batches_service_spec.rb","line_number":64,"run_time":0.037381689,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected [nil, nil] to include 1 and 2","backtrace":["./spec/services/batches/my_batches_service_spec.rb:69:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/my_batches_service_spec.rb[1:1:5:1]","description":"returns exact field structure matching Frappe LMS","full_description":"Batches::MyBatchesService.call Frappe API compatibility returns exact field structure matching Frappe LMS","status":"failed","file_path":"./spec/services/batches/my_batches_service_spec.rb","line_number":74,"run_time":0.043643973,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"Missing field: name","backtrace":["./spec/services/batches/my_batches_service_spec.rb:84:in `block (5 levels) in \u003cmain\u003e'","./spec/services/batches/my_batches_service_spec.rb:83:in `each'","./spec/services/batches/my_batches_service_spec.rb:83:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/batches/my_batches_service_spec.rb[1:1:5:2]","description":"formats dates correctly","full_description":"Batches::MyBatchesService.call Frappe API compatibility formats dates correctly","status":"failed","file_path":"./spec/services/batches/my_batches_service_spec.rb","line_number":93,"run_time":0.04274551,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected nil to match /\\d{4}-\\d{2}-\\d{2}/","backtrace":["./spec/services/batches/my_batches_service_spec.rb:96:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/admin_evals_service_spec.rb[1:1:1:1]","description":"returns certifications needing admin evaluation","full_description":"Certifications::AdminEvalsService.call without filters returns certifications needing admin evaluation","status":"failed","file_path":"./spec/services/certifications/admin_evals_service_spec.rb","line_number":46,"run_time":0.059682694,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification\"","backtrace":["./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification\"","  ./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/admin_evals_service_spec.rb[1:1:1:2]","description":"orders by creation date descending","full_description":"Certifications::AdminEvalsService.call without filters orders by creation date descending","status":"failed","file_path":"./spec/services/certifications/admin_evals_service_spec.rb","line_number":57,"run_time":0.055641887,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification\"","backtrace":["./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification\"","  ./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/admin_evals_service_spec.rb[1:1:1:3]","description":"includes evaluation details","full_description":"Certifications::AdminEvalsService.call without filters includes evaluation details","status":"failed","file_path":"./spec/services/certifications/admin_evals_service_spec.rb","line_number":66,"run_time":0.055288425,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification\"","backtrace":["./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification\"","  ./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/admin_evals_service_spec.rb[1:1:2:1]","description":"filters by specific status","full_description":"Certifications::AdminEvalsService.call with status filter filters by specific status","status":"failed","file_path":"./spec/services/certifications/admin_evals_service_spec.rb","line_number":79,"run_time":0.022530323,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification\"","backtrace":["./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification\"","  ./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/admin_evals_service_spec.rb[1:1:3:1]","description":"filters by evaluator","full_description":"Certifications::AdminEvalsService.call with evaluator filter filters by evaluator","status":"failed","file_path":"./spec/services/certifications/admin_evals_service_spec.rb","line_number":98,"run_time":0.018840753,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification\"","backtrace":["./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification\"","  ./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/admin_evals_service_spec.rb[1:1:4:1]","description":"filters by course","full_description":"Certifications::AdminEvalsService.call with course filter filters by course","status":"failed","file_path":"./spec/services/certifications/admin_evals_service_spec.rb","line_number":109,"run_time":0.018267309,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification\"","backtrace":["./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification\"","  ./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/admin_evals_service_spec.rb[1:1:5:1]","description":"calculates days pending correctly","full_description":"Certifications::AdminEvalsService.call evaluation details calculates days pending correctly","status":"failed","file_path":"./spec/services/certifications/admin_evals_service_spec.rb","line_number":119,"run_time":0.018414078,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification\"","backtrace":["./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification\"","  ./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/admin_evals_service_spec.rb[1:1:5:2]","description":"includes proper timestamps","full_description":"Certifications::AdminEvalsService.call evaluation details includes proper timestamps","status":"failed","file_path":"./spec/services/certifications/admin_evals_service_spec.rb","line_number":134,"run_time":0.01833902,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification\"","backtrace":["./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification\"","  ./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/admin_evals_service_spec.rb[1:1:6:1]","description":"returns exact field structure matching Frappe LMS","full_description":"Certifications::AdminEvalsService.call Frappe API compatibility returns exact field structure matching Frappe LMS","status":"failed","file_path":"./spec/services/certifications/admin_evals_service_spec.rb","line_number":145,"run_time":0.018228848,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification\"","backtrace":["./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification\"","  ./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/admin_evals_service_spec.rb[1:1:6:2]","description":"includes evaluation details with correct structure","full_description":"Certifications::AdminEvalsService.call Frappe API compatibility includes evaluation details with correct structure","status":"failed","file_path":"./spec/services/certifications/admin_evals_service_spec.rb","line_number":161,"run_time":0.017993911,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification\"","backtrace":["./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification\"","  ./spec/services/certifications/admin_evals_service_spec.rb:11:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:1:1]","description":"creates a certificate for completed course","full_description":"Certifications::CertificateService.create_certificate successful certificate creation creates a certificate for completed course","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":12,"run_time":0.012906864,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:1:2]","description":"returns success response with certificate data","full_description":"Certifications::CertificateService.create_certificate successful certificate creation returns success response with certificate data","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":19,"run_time":0.016492709,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:1:3]","description":"sets default values correctly","full_description":"Certifications::CertificateService.create_certificate successful certificate creation sets default values correctly","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":27,"run_time":0.012976261,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:1:4]","description":"allows custom parameters","full_description":"Certifications::CertificateService.create_certificate successful certificate creation allows custom parameters","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":39,"run_time":0.012844766,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:2:1]","description":"fails for non-existent user","full_description":"Certifications::CertificateService.create_certificate validation failures fails for non-existent user","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":59,"run_time":0.012414164,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:2:2]","description":"fails for missing course parameter","full_description":"Certifications::CertificateService.create_certificate validation failures fails for missing course parameter","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":66,"run_time":0.012616308,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:2:3]","description":"fails for non-existent course","full_description":"Certifications::CertificateService.create_certificate validation failures fails for non-existent course","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":73,"run_time":0.012473115,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:2:4]","description":"fails if user is not enrolled in course","full_description":"Certifications::CertificateService.create_certificate validation failures fails if user is not enrolled in course","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":80,"run_time":0.012294627,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:2:5]","description":"fails if course is not completed","full_description":"Certifications::CertificateService.create_certificate validation failures fails if course is not completed","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":88,"run_time":0.016075558,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:2:6]","description":"returns existing certificate if already created","full_description":"Certifications::CertificateService.create_certificate validation failures returns existing certificate if already created","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":96,"run_time":0.014359091,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:3:1]","description":"returns proper success response format","full_description":"Certifications::CertificateService.create_certificate Frappe API compatibility returns proper success response format","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":109,"run_time":0.012875083,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certificate_service_spec.rb[1:1:3:2]","description":"returns proper error response format","full_description":"Certifications::CertificateService.create_certificate Frappe API compatibility returns proper error response format","status":"failed","file_path":"./spec/services/certifications/certificate_service_spec.rb","line_number":118,"run_time":0.012914474,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/certifications/certificate_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certification_categories_service_spec.rb[1:1:1]","description":"returns only enabled categories","full_description":"Certifications::CertificationCategoriesService.call returns only enabled categories","status":"failed","file_path":"./spec/services/certifications/certification_categories_service_spec.rb","line_number":9,"run_time":0.000523666,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certification_categories_service_spec.rb[1:1:2]","description":"orders categories by name","full_description":"Certifications::CertificationCategoriesService.call orders categories by name","status":"failed","file_path":"./spec/services/certifications/certification_categories_service_spec.rb","line_number":20,"run_time":0.000363157,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certification_categories_service_spec.rb[1:1:3]","description":"returns categories in Frappe-compatible format","full_description":"Certifications::CertificationCategoriesService.call returns categories in Frappe-compatible format","status":"failed","file_path":"./spec/services/certifications/certification_categories_service_spec.rb","line_number":27,"run_time":0.000337295,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certification_categories_service_spec.rb[1:1:4]","description":"includes proper timestamps","full_description":"Certifications::CertificationCategoriesService.call includes proper timestamps","status":"failed","file_path":"./spec/services/certifications/certification_categories_service_spec.rb","line_number":37,"run_time":0.000325548,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certification_categories_service_spec.rb[1:1:5:1]","description":"returns empty array","full_description":"Certifications::CertificationCategoriesService.call when no enabled categories exist returns empty array","status":"failed","file_path":"./spec/services/certifications/certification_categories_service_spec.rb","line_number":50,"run_time":0.000351708,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certification_categories_service_spec.rb[1:1:6:1]","description":"returns exact field structure matching Frappe LMS","full_description":"Certifications::CertificationCategoriesService.call Frappe API compatibility returns exact field structure matching Frappe LMS","status":"failed","file_path":"./spec/services/certifications/certification_categories_service_spec.rb","line_number":58,"run_time":0.000472096,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certification_categories_service_spec.rb[1:1:6:2]","description":"formats timestamps correctly","full_description":"Certifications::CertificationCategoriesService.call Frappe API compatibility formats timestamps correctly","status":"failed","file_path":"./spec/services/certifications/certification_categories_service_spec.rb","line_number":67,"run_time":0.000319198,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certification_categories_service_spec.rb:4:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certified_participants_service_spec.rb[1:1:1:1]","description":"returns all issued certifications","full_description":"Certifications::CertifiedParticipantsService.call without filters returns all issued certifications","status":"failed","file_path":"./spec/services/certifications/certified_participants_service_spec.rb","line_number":40,"run_time":0.012792145,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'","./spec/services/certifications/certified_participants_service_spec.rb:14:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certified_participants_service_spec.rb[1:1:1:2]","description":"excludes non-issued certifications","full_description":"Certifications::CertifiedParticipantsService.call without filters excludes non-issued certifications","status":"failed","file_path":"./spec/services/certifications/certified_participants_service_spec.rb","line_number":50,"run_time":0.012845917,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'","./spec/services/certifications/certified_participants_service_spec.rb:14:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certified_participants_service_spec.rb[1:1:2:1]","description":"filters by category name","full_description":"Certifications::CertifiedParticipantsService.call with category filter filters by category name","status":"failed","file_path":"./spec/services/certifications/certified_participants_service_spec.rb","line_number":69,"run_time":0.012755267,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'","./spec/services/certifications/certified_participants_service_spec.rb:14:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certified_participants_service_spec.rb[1:1:3:1]","description":"filters by course title","full_description":"Certifications::CertifiedParticipantsService.call with course filter filters by course title","status":"failed","file_path":"./spec/services/certifications/certified_participants_service_spec.rb","line_number":80,"run_time":0.012685167,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'","./spec/services/certifications/certified_participants_service_spec.rb:14:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certified_participants_service_spec.rb[1:1:4:1]","description":"applies both category and course filters","full_description":"Certifications::CertifiedParticipantsService.call with both filters applies both category and course filters","status":"failed","file_path":"./spec/services/certifications/certified_participants_service_spec.rb","line_number":90,"run_time":0.012517856,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'","./spec/services/certifications/certified_participants_service_spec.rb:14:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certified_participants_service_spec.rb[1:1:5:1]","description":"orders by creation date descending","full_description":"Certifications::CertifiedParticipantsService.call ordering orders by creation date descending","status":"failed","file_path":"./spec/services/certifications/certified_participants_service_spec.rb","line_number":102,"run_time":0.012763147,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'","./spec/services/certifications/certified_participants_service_spec.rb:14:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certified_participants_service_spec.rb[1:1:6:1]","description":"returns exact field structure matching Frappe LMS","full_description":"Certifications::CertifiedParticipantsService.call Frappe API compatibility returns exact field structure matching Frappe LMS","status":"failed","file_path":"./spec/services/certifications/certified_participants_service_spec.rb","line_number":122,"run_time":0.012691968,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'","./spec/services/certifications/certified_participants_service_spec.rb:14:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certified_participants_service_spec.rb[1:1:6:2]","description":"formats dates correctly","full_description":"Certifications::CertifiedParticipantsService.call Frappe API compatibility formats dates correctly","status":"failed","file_path":"./spec/services/certifications/certified_participants_service_spec.rb","line_number":137,"run_time":0.012691316,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'","./spec/services/certifications/certified_participants_service_spec.rb:14:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/certifications/certified_participants_service_spec.rb[1:1:6:3]","description":"includes proper user and course information","full_description":"Certifications::CertifiedParticipantsService.call Frappe API compatibility includes proper user and course information","status":"failed","file_path":"./spec/services/certifications/certified_participants_service_spec.rb","line_number":146,"run_time":0.012880943,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"certification_category\"","backtrace":["./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'","./spec/services/certifications/certified_participants_service_spec.rb:14:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"certification_category\"","  ./spec/services/certifications/certified_participants_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:1:1]","description":"returns course details with proper structure","full_description":"Courses::CourseDetailsService.call with valid course id returns course details with proper structure","status":"passed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":12,"run_time":0.01357113,"pending_message":null},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:1:2]","description":"includes all required Frappe-compatible fields","full_description":"Courses::CourseDetailsService.call with valid course id includes all required Frappe-compatible fields","status":"passed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":21,"run_time":0.01195627,"pending_message":null},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:1:3]","description":"formats dates correctly","full_description":"Courses::CourseDetailsService.call with valid course id formats dates correctly","status":"passed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":40,"run_time":0.011925212,"pending_message":null},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:1:4]","description":"includes instructor information","full_description":"Courses::CourseDetailsService.call with valid course id includes instructor information","status":"passed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":47,"run_time":0.01184174,"pending_message":null},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:2:1]","description":"includes membership data for enrolled user","full_description":"Courses::CourseDetailsService.call with user parameter includes membership data for enrolled user","status":"failed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":61,"run_time":0.013803334,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `progress=' for an instance of Enrollment","backtrace":["./spec/services/courses/course_details_service_spec.rb:59:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:2:2]","description":"includes current lesson for enrolled user","full_description":"Courses::CourseDetailsService.call with user parameter includes current lesson for enrolled user","status":"failed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":69,"run_time":0.013245522,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `progress=' for an instance of Enrollment","backtrace":["./spec/services/courses/course_details_service_spec.rb:59:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:2:3]","description":"returns nil membership for non-enrolled user","full_description":"Courses::CourseDetailsService.call with user parameter returns nil membership for non-enrolled user","status":"failed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":78,"run_time":0.012641208,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `progress=' for an instance of Enrollment","backtrace":["./spec/services/courses/course_details_service_spec.rb:59:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:3:1]","description":"returns error for non-existent course","full_description":"Courses::CourseDetailsService.call with invalid course id returns error for non-existent course","status":"passed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":87,"run_time":0.000981401,"pending_message":null},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:4:1]","description":"includes accurate enrollment count","full_description":"Courses::CourseDetailsService.call course statistics includes accurate enrollment count","status":"failed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":103,"run_time":0.038564205,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/services/courses/course_details_service_spec.rb:99:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:4:2]","description":"includes formatted enrollment count","full_description":"Courses::CourseDetailsService.call course statistics includes formatted enrollment count","status":"failed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":110,"run_time":0.040030263,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/services/courses/course_details_service_spec.rb:99:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:4:3]","description":"includes review statistics","full_description":"Courses::CourseDetailsService.call course statistics includes review statistics","status":"failed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":116,"run_time":0.040315537,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/services/courses/course_details_service_spec.rb:99:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_details_service_spec.rb[1:1:5:1]","description":"includes payment information for paid courses","full_description":"Courses::CourseDetailsService.call paid course information includes payment information for paid courses","status":"passed","file_path":"./spec/services/courses/course_details_service_spec.rb","line_number":130,"run_time":0.012539279,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:1:1:1]","description":"creates enrollment successfully","full_description":"Courses::CourseEnrollmentService.enroll with valid user and course creates enrollment successfully","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":12,"run_time":0.018334443,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:1:1:2]","description":"returns Frappe-compatible enrollment data","full_description":"Courses::CourseEnrollmentService.enroll with valid user and course returns Frappe-compatible enrollment data","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":20,"run_time":0.017636844,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:1:1:3]","description":"creates enrollment record in database","full_description":"Courses::CourseEnrollmentService.enroll with valid user and course creates enrollment record in database","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":31,"run_time":0.020035278,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:1:1:4]","description":"prevents duplicate enrollment","full_description":"Courses::CourseEnrollmentService.enroll with valid user and course prevents duplicate enrollment","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":42,"run_time":0.029093736,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:1:2:1]","description":"returns error for nil user","full_description":"Courses::CourseEnrollmentService.enroll with invalid parameters returns error for nil user","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":53,"run_time":0.011439724,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:1:2:2]","description":"returns error for nil course","full_description":"Courses::CourseEnrollmentService.enroll with invalid parameters returns error for nil course","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":60,"run_time":0.007351643,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:1:2:3]","description":"returns error for unpublished course","full_description":"Courses::CourseEnrollmentService.enroll with invalid parameters returns error for unpublished course","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":67,"run_time":0.016304716,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:1:2:4]","description":"returns error for upcoming course","full_description":"Courses::CourseEnrollmentService.enroll with invalid parameters returns error for upcoming course","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":76,"run_time":0.014823484,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:2:1]","description":"removes enrollment successfully","full_description":"Courses::CourseEnrollmentService.unenroll removes enrollment successfully","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":90,"run_time":0.018668104,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:2:2]","description":"deletes enrollment record from database","full_description":"Courses::CourseEnrollmentService.unenroll deletes enrollment record from database","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":97,"run_time":0.019662246,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:2:3]","description":"returns error for non-enrolled user","full_description":"Courses::CourseEnrollmentService.unenroll returns error for non-enrolled user","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":103,"run_time":0.022719917,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:2:4]","description":"returns error for nil user","full_description":"Courses::CourseEnrollmentService.unenroll returns error for nil user","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":112,"run_time":0.017306499,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:3:1]","description":"returns true for published course and valid user","full_description":"Courses::CourseEnrollmentService.can_enroll? returns true for published course and valid user","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":121,"run_time":0.014499618,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:3:2]","description":"returns false for unpublished course","full_description":"Courses::CourseEnrollmentService.can_enroll? returns false for unpublished course","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":127,"run_time":0.015885371,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:3:3]","description":"returns false for upcoming course","full_description":"Courses::CourseEnrollmentService.can_enroll? returns false for upcoming course","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":135,"run_time":0.014117002,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:3:4]","description":"returns false for already enrolled user","full_description":"Courses::CourseEnrollmentService.can_enroll? returns false for already enrolled user","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":143,"run_time":0.016932605,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:3:5]","description":"returns false for nil user","full_description":"Courses::CourseEnrollmentService.can_enroll? returns false for nil user","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":151,"run_time":0.008348308,"pending_message":null},{"id":"./spec/services/courses/course_enrollment_service_spec.rb[1:3:6]","description":"returns false for nil course","full_description":"Courses::CourseEnrollmentService.can_enroll? returns false for nil course","status":"passed","file_path":"./spec/services/courses/course_enrollment_service_spec.rb","line_number":157,"run_time":0.005658721,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:1:1]","description":"marks lesson as complete","full_description":"Courses::CourseProgressService.update_progress with valid parameters marks lesson as complete","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":15,"run_time":0.038593711,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:1:2]","description":"marks lesson as incomplete","full_description":"Courses::CourseProgressService.update_progress with valid parameters marks lesson as incomplete","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":23,"run_time":0.027749237,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:1:3]","description":"creates course progress record","full_description":"Courses::CourseProgressService.update_progress with valid parameters creates course progress record","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":31,"run_time":0.028321479,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:1:4]","description":"updates existing progress record","full_description":"Courses::CourseProgressService.update_progress with valid parameters updates existing progress record","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":43,"run_time":0.032980029,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:1:5]","description":"returns course progress percentage","full_description":"Courses::CourseProgressService.update_progress with valid parameters returns course progress percentage","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":55,"run_time":0.026401854,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:2:1]","description":"returns error for nil user","full_description":"Courses::CourseProgressService.update_progress with invalid parameters returns error for nil user","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":63,"run_time":0.018482945,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:2:2]","description":"returns error for nil course","full_description":"Courses::CourseProgressService.update_progress with invalid parameters returns error for nil course","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":70,"run_time":0.018493891,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:2:3]","description":"returns error for nil lesson","full_description":"Courses::CourseProgressService.update_progress with invalid parameters returns error for nil lesson","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":77,"run_time":0.014547133,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:2:4]","description":"returns error for unenrolled user","full_description":"Courses::CourseProgressService.update_progress with invalid parameters returns error for unenrolled user","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":84,"run_time":0.032170036,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:3:1]","description":"updates enrollment progress when lesson completed","full_description":"Courses::CourseProgressService.update_progress enrollment progress updates updates enrollment progress when lesson completed","status":"failed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":97,"run_time":0.046375295,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: 50.0\n     got: 0\n\n(compared using ==)\n","backtrace":["./spec/services/courses/course_progress_service_spec.rb:101:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:1:3:2]","description":"marks enrollment as completed when all lessons done","full_description":"Courses::CourseProgressService.update_progress enrollment progress updates marks enrollment as completed when all lessons done","status":"failed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":104,"run_time":0.046534995,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: 100.0\n     got: 0\n\n(compared using ==)\n","backtrace":["./spec/services/courses/course_progress_service_spec.rb:109:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:2:1:1]","description":"returns course progress information","full_description":"Courses::CourseProgressService.get_progress with valid parameters returns course progress information","status":"failed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":117,"run_time":0.018150166,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: 1\n     got: 0\n\n(compared using ==)\n","backtrace":["./spec/services/courses/course_progress_service_spec.rb:122:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:2:1:2]","description":"calculates progress correctly with completed lessons","full_description":"Courses::CourseProgressService.get_progress with valid parameters calculates progress correctly with completed lessons","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":128,"run_time":0.029203877,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:2:1:3]","description":"returns partial progress for in-progress courses","full_description":"Courses::CourseProgressService.get_progress with valid parameters returns partial progress for in-progress courses","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":138,"run_time":0.038976528,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:2:2:1]","description":"returns error for nil user","full_description":"Courses::CourseProgressService.get_progress with invalid parameters returns error for nil user","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":152,"run_time":0.019667745,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:2:2:2]","description":"returns error for nil course","full_description":"Courses::CourseProgressService.get_progress with invalid parameters returns error for nil course","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":159,"run_time":0.019876681,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:2:3:1]","description":"handles courses with no lessons","full_description":"Courses::CourseProgressService.get_progress edge cases handles courses with no lessons","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":168,"run_time":0.023555722,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:3:1]","description":"returns success for valid parameters","full_description":"Courses::CourseProgressService.save_current_lesson returns success for valid parameters","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":181,"run_time":0.027740924,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:3:2]","description":"returns error for nil user","full_description":"Courses::CourseProgressService.save_current_lesson returns error for nil user","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":188,"run_time":0.021382149,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:3:3]","description":"returns error for nil course","full_description":"Courses::CourseProgressService.save_current_lesson returns error for nil course","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":195,"run_time":0.01999136,"pending_message":null},{"id":"./spec/services/courses/course_progress_service_spec.rb[1:3:4]","description":"returns error for nil lesson","full_description":"Courses::CourseProgressService.save_current_lesson returns error for nil lesson","status":"passed","file_path":"./spec/services/courses/course_progress_service_spec.rb","line_number":202,"run_time":0.016139668,"pending_message":null},{"id":"./spec/services/courses/course_review_service_spec.rb[1:1:1:1]","description":"returns all reviews for the course","full_description":"Courses::CourseReviewService.get_reviews with course that has reviews returns all reviews for the course","status":"failed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":16,"run_time":0.021316359,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/services/courses/course_review_service_spec.rb:13:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_review_service_spec.rb[1:1:1:2]","description":"returns reviews in correct format","full_description":"Courses::CourseReviewService.get_reviews with course that has reviews returns reviews in correct format","status":"failed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":23,"run_time":0.020932819,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/services/courses/course_review_service_spec.rb:13:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_review_service_spec.rb[1:1:1:3]","description":"orders reviews by creation date descending","full_description":"Courses::CourseReviewService.get_reviews with course that has reviews orders reviews by creation date descending","status":"failed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":36,"run_time":0.020541578,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/services/courses/course_review_service_spec.rb:13:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_review_service_spec.rb[1:1:1:4]","description":"limits results to 50 reviews","full_description":"Courses::CourseReviewService.get_reviews with course that has reviews limits results to 50 reviews","status":"failed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":46,"run_time":0.020444337,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/services/courses/course_review_service_spec.rb:13:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_review_service_spec.rb[1:1:2:1]","description":"returns empty array","full_description":"Courses::CourseReviewService.get_reviews with course that has no reviews returns empty array","status":"passed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":56,"run_time":0.016073885,"pending_message":null},{"id":"./spec/services/courses/course_review_service_spec.rb[1:1:3:1]","description":"returns empty array","full_description":"Courses::CourseReviewService.get_reviews with nil course returns empty array","status":"passed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":64,"run_time":0.026377475,"pending_message":null},{"id":"./spec/services/courses/course_review_service_spec.rb[1:1:4:1]","description":"only returns published reviews","full_description":"Courses::CourseReviewService.get_reviews with unpublished reviews only returns published reviews","status":"failed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":74,"run_time":0.026109787,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/services/courses/course_review_service_spec.rb:72:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_review_service_spec.rb[1:2:1:1]","description":"creates review successfully","full_description":"Courses::CourseReviewService.add_review with valid parameters creates review successfully","status":"failed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":84,"run_time":0.020390953,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected true\n     got false\n","backtrace":["./spec/services/courses/course_review_service_spec.rb:87:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_review_service_spec.rb[1:2:1:2]","description":"creates review record in database","full_description":"Courses::CourseReviewService.add_review with valid parameters creates review record in database","status":"failed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":92,"run_time":0.021638750000000002,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: #\u003cCourse id: 1, title: \"Arts 254\", description: \"Omnis tempora ducimus. Consequatur soluta enim. Ul.....t: \"2025-11-25 10:31:20.550958000 +0000\", upcoming: nil, evaluator_id: nil, workflow_state: \"Draft\"\u003e\n     got: \"arts-254\"\n\n(compared using ==)\n\nDiff:\n@@ -1,42 +1 @@\n-#\u003cCourse:0x00007ff9137d7a80\n- id: 1,\n- title: \"Arts 254\",\n- description: \"Omnis tempora ducimus. Consequatur soluta enim. Ul...\",\n- short_introduction: \"Sed blanditiis omnis est.\",\n- category: \"Business\",\n- status: \"Draft\",\n- video_link: \"http://schuppe.example/rina\",\n- image: nil,\n- tags: \"placeat, fuga, voluptatem\",\n- price: 0.0,\n- currency: \"USD\",\n- published: true,\n- featured: false,\n- allow_self_enrollment: true,\n- require_approval: false,\n- max_students: 0,\n- duration_hours: 0,\n- difficulty_level: \"Beginner\",\n- language: \"English\",\n- prerequisites: nil,\n- learning_objectives: nil,\n- target_audience: nil,\n- instructor_name: nil,\n- instructor_id: 2,\n- enrollments_count: 0,\n- rating: 0.0,\n- reviews_count: 0,\n- published_at: \"2025-11-25 10:31:20.550915000 +0000\",\n- last_updated_on: nil,\n- metadata: nil,\n- course_code: nil,\n- certificate_enabled: [FILTERED],\n- seo_title: nil,\n- seo_description: nil,\n- slug: nil,\n- sort_order: 0,\n- created_at: \"2025-11-25 10:31:20.550958000 +0000\",\n- updated_at: \"2025-11-25 10:31:20.550958000 +0000\",\n- upcoming: nil,\n- evaluator_id: nil,\n- workflow_state: \"Draft\"\u003e\n+\"arts-254\"\n","backtrace":["./spec/services/courses/course_review_service_spec.rb:98:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_review_service_spec.rb[1:2:1:3]","description":"returns Frappe-compatible review data","full_description":"Courses::CourseReviewService.add_review with valid parameters returns Frappe-compatible review data","status":"failed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":105,"run_time":0.018400167,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `[]' for nil","backtrace":["./spec/services/courses/course_review_service_spec.rb:109:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_review_service_spec.rb[1:2:1:4]","description":"allows review without text","full_description":"Courses::CourseReviewService.add_review with valid parameters allows review without text","status":"failed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":116,"run_time":0.01798671,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected true\n     got false\n","backtrace":["./spec/services/courses/course_review_service_spec.rb:119:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_review_service_spec.rb[1:2:2:1]","description":"returns error for nil user","full_description":"Courses::CourseReviewService.add_review with invalid parameters returns error for nil user","status":"passed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":125,"run_time":0.016139228,"pending_message":null},{"id":"./spec/services/courses/course_review_service_spec.rb[1:2:2:2]","description":"returns error for nil course","full_description":"Courses::CourseReviewService.add_review with invalid parameters returns error for nil course","status":"passed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":132,"run_time":0.015971376,"pending_message":null},{"id":"./spec/services/courses/course_review_service_spec.rb[1:2:2:3]","description":"returns error for invalid rating","full_description":"Courses::CourseReviewService.add_review with invalid parameters returns error for invalid rating","status":"passed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":139,"run_time":0.015528944,"pending_message":null},{"id":"./spec/services/courses/course_review_service_spec.rb[1:2:2:4]","description":"returns error for unenrolled user","full_description":"Courses::CourseReviewService.add_review with invalid parameters returns error for unenrolled user","status":"passed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":146,"run_time":0.020273079,"pending_message":null},{"id":"./spec/services/courses/course_review_service_spec.rb[1:2:2:5]","description":"prevents duplicate reviews from same user","full_description":"Courses::CourseReviewService.add_review with invalid parameters prevents duplicate reviews from same user","status":"passed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":155,"run_time":0.01741578,"pending_message":null},{"id":"./spec/services/courses/course_review_service_spec.rb[1:3:1:1]","description":"calculates average rating correctly","full_description":"Courses::CourseReviewService.get_average_rating with reviews calculates average rating correctly","status":"failed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":173,"run_time":0.020468804,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `user=' for an instance of CourseReview","backtrace":["./spec/services/courses/course_review_service_spec.rb:169:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/courses/course_review_service_spec.rb[1:3:2:1]","description":"returns 0.0","full_description":"Courses::CourseReviewService.get_average_rating without reviews returns 0.0","status":"passed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":181,"run_time":0.015619728,"pending_message":null},{"id":"./spec/services/courses/course_review_service_spec.rb[1:3:3:1]","description":"returns 0.0","full_description":"Courses::CourseReviewService.get_average_rating with nil course returns 0.0","status":"passed","file_path":"./spec/services/courses/course_review_service_spec.rb","line_number":189,"run_time":0.015431483,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:1:1]","description":"returns courses with all required fields","full_description":"Courses::CoursesService.call with no parameters returns courses with all required fields","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":17,"run_time":0.011885199,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:1:2]","description":"includes instructor information","full_description":"Courses::CoursesService.call with no parameters includes instructor information","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":32,"run_time":0.011046569,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:1:3]","description":"formats dates correctly","full_description":"Courses::CoursesService.call with no parameters formats dates correctly","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":39,"run_time":0.010221541,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:1:4]","description":"splits tags into array","full_description":"Courses::CoursesService.call with no parameters splits tags into array","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":45,"run_time":0.013265733,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:1:5]","description":"returns Published status for published courses","full_description":"Courses::CoursesService.call with no parameters returns Published status for published courses","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":53,"run_time":0.010056274,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:2:1:1]","description":"filters only published courses when published=1","full_description":"Courses::CoursesService.call with filters published filter filters only published courses when published=1","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":61,"run_time":0.01159172,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:2:2:1]","description":"excludes upcoming courses when upcoming=0","full_description":"Courses::CoursesService.call with filters upcoming filter excludes upcoming courses when upcoming=0","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":74,"run_time":0.012384097,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:2:3:1]","description":"applies multiple filters together","full_description":"Courses::CoursesService.call with filters multiple filters applies multiple filters together","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":87,"run_time":0.013546751,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:3:1]","description":"applies limit parameter","full_description":"Courses::CoursesService.call with pagination applies limit parameter","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":107,"run_time":0.01799222,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:3:2]","description":"applies offset parameter","full_description":"Courses::CoursesService.call with pagination applies offset parameter","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":113,"run_time":0.023179155,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:3:3]","description":"uses default pagination values","full_description":"Courses::CoursesService.call with pagination uses default pagination values","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":123,"run_time":0.023301656,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:4:1]","description":"calculates rating based on completion rate","full_description":"Courses::CoursesService.call rating calculation calculates rating based on completion rate","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":138,"run_time":0.105380271,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:4:2]","description":"returns 0 rating for courses with no enrollments","full_description":"Courses::CoursesService.call rating calculation returns 0 rating for courses with no enrollments","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":149,"run_time":0.051226695,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:4:3]","description":"caps rating at 5.0","full_description":"Courses::CoursesService.call rating calculation caps rating at 5.0","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":158,"run_time":0.119754063,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:5:1]","description":"includes accurate enrollment count","full_description":"Courses::CoursesService.call enrollment count includes accurate enrollment count","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":176,"run_time":0.034497096,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:5:2]","description":"returns 0 for courses with no enrollments","full_description":"Courses::CoursesService.call enrollment count returns 0 for courses with no enrollments","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":183,"run_time":0.036752066,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:6:1]","description":"maps all required fields correctly","full_description":"Courses::CoursesService.call course fields mapping maps all required fields correctly","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":194,"run_time":0.00995075,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:7:1]","description":"handles courses without instructors","full_description":"Courses::CoursesService.call edge cases handles courses without instructors","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":221,"run_time":0.004302794,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:7:2]","description":"handles courses with nil tags","full_description":"Courses::CoursesService.call edge cases handles courses with nil tags","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":232,"run_time":0.010528231,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:7:3]","description":"handles empty database","full_description":"Courses::CoursesService.call edge cases handles empty database","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":241,"run_time":0.000926807,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:7:4]","description":"handles invalid filter parameters gracefully","full_description":"Courses::CoursesService.call edge cases handles invalid filter parameters gracefully","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":249,"run_time":0.00062084,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:1:8:1]","description":"includes instructor data to prevent N+1 queries","full_description":"Courses::CoursesService.call performance considerations includes instructor data to prevent N+1 queries","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":257,"run_time":0.00057652,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:2:1:1:1]","description":"returns 0","full_description":"Courses::CoursesService private methods #calculate_course_rating with no enrollments returns 0","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":272,"run_time":0.007831091,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:2:1:2:1]","description":"calculates weighted average rating","full_description":"Courses::CoursesService private methods #calculate_course_rating with mixed completion rates calculates weighted average rating","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":285,"run_time":0.030334461,"pending_message":null},{"id":"./spec/services/courses/courses_service_spec.rb[1:2:1:3:1]","description":"caps at 5.0","full_description":"Courses::CoursesService private methods #calculate_course_rating with all high completions caps at 5.0","status":"passed","file_path":"./spec/services/courses/courses_service_spec.rb","line_number":300,"run_time":0.041472523,"pending_message":null},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:1:1]","description":"returns root messages by default","full_description":"Discussions::DiscussionRepliesService.call with valid discussion returns root messages by default","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":13,"run_time":0.012458844,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:1:2]","description":"includes replies for each message","full_description":"Discussions::DiscussionRepliesService.call with valid discussion includes replies for each message","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":24,"run_time":0.006800094,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:2:1]","description":"returns replies to specific message","full_description":"Discussions::DiscussionRepliesService.call with parent message filter returns replies to specific message","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":34,"run_time":0.006750695,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:3:1]","description":"filters by message type","full_description":"Discussions::DiscussionRepliesService.call with message type filter filters by message type","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":45,"run_time":0.006380979,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:4:1]","description":"applies limit","full_description":"Discussions::DiscussionRepliesService.call with pagination applies limit","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":57,"run_time":0.013494049,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:4:2]","description":"applies offset","full_description":"Discussions::DiscussionRepliesService.call with pagination applies offset","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":64,"run_time":0.007937077,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:5:1]","description":"orders by creation date descending by default","full_description":"Discussions::DiscussionRepliesService.call with ordering orders by creation date descending by default","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":75,"run_time":0.007759399,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:5:2]","description":"orders by custom field","full_description":"Discussions::DiscussionRepliesService.call with ordering orders by custom field","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":81,"run_time":0.007237165,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:6:1]","description":"returns empty array for non-existent discussion","full_description":"Discussions::DiscussionRepliesService.call with invalid discussion returns empty array for non-existent discussion","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":90,"run_time":0.007589063,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:7:1]","description":"returns exact field structure matching Frappe LMS","full_description":"Discussions::DiscussionRepliesService.call Frappe API compatibility returns exact field structure matching Frappe LMS","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":98,"run_time":0.007973113,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:7:2]","description":"formats dates correctly","full_description":"Discussions::DiscussionRepliesService.call Frappe API compatibility formats dates correctly","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":113,"run_time":0.007576144,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_replies_service_spec.rb[1:1:7:3]","description":"includes reply count","full_description":"Discussions::DiscussionRepliesService.call Frappe API compatibility includes reply count","status":"failed","file_path":"./spec/services/discussions/discussion_replies_service_spec.rb","line_number":121,"run_time":0.006537593,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/discussion_replies_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/discussion_replies_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:1:1]","description":"returns all open discussions with Frappe-compatible format","full_description":"Discussions::DiscussionTopicsService.call without filters returns all open discussions with Frappe-compatible format","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":13,"run_time":0.014429059,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:2:1]","description":"filters discussions by course","full_description":"Discussions::DiscussionTopicsService.call with course filter filters discussions by course","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":38,"run_time":0.014815111,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:2:2]","description":"filters discussions by course title","full_description":"Discussions::DiscussionTopicsService.call with course filter filters discussions by course title","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":46,"run_time":0.014553612,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:3:1]","description":"filters by specific status","full_description":"Discussions::DiscussionTopicsService.call with status filter filters by specific status","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":56,"run_time":0.01439807,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:3:2]","description":"returns all statuses when status filter is provided","full_description":"Discussions::DiscussionTopicsService.call with status filter returns all statuses when status filter is provided","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":64,"run_time":0.014653068,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:4:1]","description":"applies limit","full_description":"Discussions::DiscussionTopicsService.call with pagination applies limit","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":77,"run_time":0.01437912,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:4:2]","description":"applies offset","full_description":"Discussions::DiscussionTopicsService.call with pagination applies offset","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":84,"run_time":0.014121489,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:5:1]","description":"orders by creation date descending by default","full_description":"Discussions::DiscussionTopicsService.call with ordering orders by creation date descending by default","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":95,"run_time":0.014138756,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:5:2]","description":"orders by custom field","full_description":"Discussions::DiscussionTopicsService.call with ordering orders by custom field","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":101,"run_time":0.014986409,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:6:1]","description":"includes correct reply count","full_description":"Discussions::DiscussionTopicsService.call reply count and last reply includes correct reply count","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":110,"run_time":0.014672378,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:6:2]","description":"includes last reply timestamp","full_description":"Discussions::DiscussionTopicsService.call reply count and last reply includes last reply timestamp","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":117,"run_time":0.015082178,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:6:3]","description":"includes last reply author","full_description":"Discussions::DiscussionTopicsService.call reply count and last reply includes last reply author","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":124,"run_time":0.015149783,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:7:1]","description":"returns exact field structure matching Frappe LMS","full_description":"Discussions::DiscussionTopicsService.call Frappe API compatibility returns exact field structure matching Frappe LMS","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":133,"run_time":0.014512929,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/discussion_topics_service_spec.rb[1:1:7:2]","description":"formats dates correctly","full_description":"Discussions::DiscussionTopicsService.call Frappe API compatibility formats dates correctly","status":"failed","file_path":"./spec/services/discussions/discussion_topics_service_spec.rb","line_number":148,"run_time":0.014616661,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such table: main.courses","backtrace":["./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such table: main.courses","  ./spec/services/discussions/discussion_topics_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:1:1]","description":"creates a message","full_description":"Discussions::SaveMessageService.call successful message creation creates a message","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":11,"run_time":0.011236355,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:9:in `block (4 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:13:in `block (5 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:12:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:1:2]","description":"returns success response with message data","full_description":"Discussions::SaveMessageService.call successful message creation returns success response with message data","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":18,"run_time":0.006981476,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:9:in `block (4 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:19:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:1:3]","description":"sets default message type to text","full_description":"Discussions::SaveMessageService.call successful message creation sets default message type to text","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":26,"run_time":0.006707619,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:9:in `block (4 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:27:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:1:4]","description":"allows custom message type","full_description":"Discussions::SaveMessageService.call successful message creation allows custom message type","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":36,"run_time":0.006553255,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:9:in `block (4 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:37:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:2:1]","description":"creates a reply message","full_description":"Discussions::SaveMessageService.call reply message creation creates a reply message","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":49,"run_time":0.00618305,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:47:in `block (4 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:50:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:3:1]","description":"fails for nil user","full_description":"Discussions::SaveMessageService.call validation failures fails for nil user","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":60,"run_time":0.005917264,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:61:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:3:2]","description":"fails for missing discussion","full_description":"Discussions::SaveMessageService.call validation failures fails for missing discussion","status":"passed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":67,"run_time":0.005247118,"pending_message":null},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:3:3]","description":"fails for missing content","full_description":"Discussions::SaveMessageService.call validation failures fails for missing content","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":74,"run_time":0.005950176,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:75:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:3:4]","description":"fails for non-existent discussion","full_description":"Discussions::SaveMessageService.call validation failures fails for non-existent discussion","status":"passed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":81,"run_time":0.005688588,"pending_message":null},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:3:5]","description":"fails for closed discussion","full_description":"Discussions::SaveMessageService.call validation failures fails for closed discussion","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":88,"run_time":0.006355188,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:89:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:3:6]","description":"fails for non-existent parent message","full_description":"Discussions::SaveMessageService.call validation failures fails for non-existent parent message","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":96,"run_time":0.006270986,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:98:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:3:7]","description":"fails for parent message in different discussion","full_description":"Discussions::SaveMessageService.call validation failures fails for parent message in different discussion","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":107,"run_time":0.006032294,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Status is not included in the list, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:108:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:4:1]","description":"returns proper success response format","full_description":"Discussions::SaveMessageService.call Frappe API compatibility returns proper success response format","status":"failed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":123,"run_time":0.006192334,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Course must exist, Course can't be blank","backtrace":["./spec/services/discussions/save_message_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/discussions/save_message_service_spec.rb:124:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/save_message_service_spec.rb[1:1:4:2]","description":"returns proper error response format","full_description":"Discussions::SaveMessageService.call Frappe API compatibility returns proper error response format","status":"passed","file_path":"./spec/services/discussions/save_message_service_spec.rb","line_number":133,"run_time":0.005238154,"pending_message":null},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:1:1]","description":"creates a review message","full_description":"Discussions::SubmitReviewService.call successful review submission creates a review message","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":12,"run_time":0.01233442,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:1:2]","description":"creates or updates course review","full_description":"Discussions::SubmitReviewService.call successful review submission creates or updates course review","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":19,"run_time":0.012021311,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:1:3]","description":"returns success response with review data","full_description":"Discussions::SubmitReviewService.call successful review submission returns success response with review data","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":26,"run_time":0.012272293,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:1:4]","description":"sets message type to review","full_description":"Discussions::SubmitReviewService.call successful review submission sets message type to review","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":34,"run_time":0.011961488,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:1:5]","description":"includes rating if provided","full_description":"Discussions::SubmitReviewService.call successful review submission includes rating if provided","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":44,"run_time":0.011880862,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:2:1]","description":"fails for nil user","full_description":"Discussions::SubmitReviewService.call validation failures fails for nil user","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":58,"run_time":0.011947827,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:2:2]","description":"fails for missing course","full_description":"Discussions::SubmitReviewService.call validation failures fails for missing course","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":65,"run_time":0.012209074,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:2:3]","description":"fails for missing content","full_description":"Discussions::SubmitReviewService.call validation failures fails for missing content","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":72,"run_time":0.012026849,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:2:4]","description":"fails for non-existent course","full_description":"Discussions::SubmitReviewService.call validation failures fails for non-existent course","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":79,"run_time":0.021520955,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:2:5]","description":"fails if user is not enrolled in course","full_description":"Discussions::SubmitReviewService.call validation failures fails if user is not enrolled in course","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":86,"run_time":0.015781599,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:2:6]","description":"fails if course is not completed","full_description":"Discussions::SubmitReviewService.call validation failures fails if course is not completed","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":94,"run_time":0.015301078,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:2:7]","description":"fails if review already exists","full_description":"Discussions::SubmitReviewService.call validation failures fails if review already exists","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":102,"run_time":0.013897108,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:3:1]","description":"creates new course review","full_description":"Discussions::SubmitReviewService.call course review creation creates new course review","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":112,"run_time":0.013262708,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:3:2]","description":"updates existing course review","full_description":"Discussions::SubmitReviewService.call course review creation updates existing course review","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":125,"run_time":0.013552691,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:4:1]","description":"returns proper success response format","full_description":"Discussions::SubmitReviewService.call Frappe API compatibility returns proper success response format","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":140,"run_time":0.01346896,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/discussions/submit_review_service_spec.rb[1:1:4:2]","description":"returns proper error response format","full_description":"Discussions::SubmitReviewService.call Frappe API compatibility returns proper error response format","status":"failed","file_path":"./spec/services/discussions/submit_review_service_spec.rb","line_number":150,"run_time":0.013081987,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `completed=' for an instance of Enrollment","backtrace":["./spec/services/discussions/submit_review_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/file_info_service_spec.rb[1:1:1:1]","description":"returns file information","full_description":"FileInfoService.call with valid file URL for existing LmsFile returns file information","status":"passed","file_path":"./spec/services/file_info_service_spec.rb","line_number":8,"run_time":0.009071758,"pending_message":null},{"id":"./spec/services/file_info_service_spec.rb[1:1:2:1]","description":"returns file information from file system","full_description":"FileInfoService.call with file URL for non-existent LmsFile but existing file on disk returns file information from file system","status":"passed","file_path":"./spec/services/file_info_service_spec.rb","line_number":35,"run_time":0.003169115,"pending_message":null},{"id":"./spec/services/file_info_service_spec.rb[1:1:3:1]","description":"returns error","full_description":"FileInfoService.call with non-existent file URL returns error","status":"passed","file_path":"./spec/services/file_info_service_spec.rb","line_number":48,"run_time":0.000539581,"pending_message":null},{"id":"./spec/services/file_info_service_spec.rb[1:1:4:1]","description":"returns error","full_description":"FileInfoService.call with empty file URL returns error","status":"passed","file_path":"./spec/services/file_info_service_spec.rb","line_number":56,"run_time":0.000311527,"pending_message":null},{"id":"./spec/services/file_info_service_spec.rb[1:1:5:1]","description":"returns error","full_description":"FileInfoService.call with nil file URL returns error","status":"passed","file_path":"./spec/services/file_info_service_spec.rb","line_number":64,"run_time":0.000513461,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:1:1:1]","description":"returns tags as array matching Frappe behavior","full_description":"Frappe::LmsUtilsService.get_tags when course exists with tags returns tags as array matching Frappe behavior","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":19,"run_time":0.07316927,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:1:1:2]","description":"handles single tag without comma","full_description":"Frappe::LmsUtilsService.get_tags when course exists with tags handles single tag without comma","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":27,"run_time":0.068661345,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:1:2:1]","description":"returns empty array","full_description":"Frappe::LmsUtilsService.get_tags when course does not exist returns empty array","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":37,"run_time":0.006521559,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:1:3:1]","description":"returns empty array","full_description":"Frappe::LmsUtilsService.get_tags when course has no tags returns empty array","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":45,"run_time":0.06641608,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:1:3:2]","description":"handles empty string tags","full_description":"Frappe::LmsUtilsService.get_tags when course has no tags handles empty string tags","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":53,"run_time":0.093088557,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:2:1:1]","description":"returns empty array (placeholder until reviews table exists)","full_description":"Frappe::LmsUtilsService.get_reviews when course exists returns empty array (placeholder until reviews table exists)","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":65,"run_time":0.077953867,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:2:2:1]","description":"returns empty array","full_description":"Frappe::LmsUtilsService.get_reviews when course does not exist returns empty array","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":73,"run_time":0.006423584,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:3:1:1]","description":"returns nil","full_description":"Frappe::LmsUtilsService.get_average_rating when no reviews exist returns nil","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":83,"run_time":0.071863603,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:3:2:1]","description":"calculates average correctly","full_description":"Frappe::LmsUtilsService.get_average_rating when reviews exist (mocked) calculates average correctly","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":99,"run_time":0.066672061,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:3:3:1]","description":"returns nil","full_description":"Frappe::LmsUtilsService.get_average_rating when reviews have no rating returns nil","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":114,"run_time":0.092418522,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:4:1:1]","description":"calculates progress based on completed lessons","full_description":"Frappe::LmsUtilsService.get_course_progress when user is enrolled in course calculates progress based on completed lessons","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":126,"run_time":0.078674964,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Lesson must exist, Lesson can't be blank","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:128:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:4:1:2]","description":"returns 0 when no lessons are completed","full_description":"Frappe::LmsUtilsService.get_course_progress when user is enrolled in course returns 0 when no lessons are completed","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":136,"run_time":0.071156178,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:4:1:3]","description":"returns 100 when all lessons are completed","full_description":"Frappe::LmsUtilsService.get_course_progress when user is enrolled in course returns 100 when all lessons are completed","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":142,"run_time":0.064997899,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: 100.0\n     got: 0\n\n(compared using ==)\n","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:149:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:4:1:4]","description":"handles course with no lessons","full_description":"Frappe::LmsUtilsService.get_course_progress when user is enrolled in course handles course with no lessons","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":152,"run_time":0.015464004,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:4:2:1]","description":"returns 0","full_description":"Frappe::LmsUtilsService.get_course_progress when user is not enrolled returns 0","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":163,"run_time":0.082364912,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:4:3:1]","description":"returns 0","full_description":"Frappe::LmsUtilsService.get_course_progress when course does not exist returns 0","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":171,"run_time":0.006476627,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:4:4:1]","description":"calculates progress for specified member","full_description":"Frappe::LmsUtilsService.get_course_progress with custom member parameter calculates progress for specified member","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":182,"run_time":0.078654311,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Lesson must exist, Lesson can't be blank","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:183:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:5:1:1]","description":"returns membership details matching Frappe format","full_description":"Frappe::LmsUtilsService.get_membership when user is enrolled returns membership details matching Frappe format","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":194,"run_time":0.01906314,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `purchased_certificate' for an instance of Enrollment","backtrace":["./app/services/frappe/lms_utils_service.rb:82:in `get_membership'","./spec/services/frappe/lms_utils_service_spec.rb:199:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:5:2:1]","description":"returns false","full_description":"Frappe::LmsUtilsService.get_membership when user is not enrolled returns false","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":212,"run_time":0.006329679,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:5:3:1]","description":"returns membership for specified member","full_description":"Frappe::LmsUtilsService.get_membership with custom member parameter returns membership for specified member","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":221,"run_time":0.023448445,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `purchased_certificate' for an instance of Enrollment","backtrace":["./app/services/frappe/lms_utils_service.rb:82:in `get_membership'","./spec/services/frappe/lms_utils_service_spec.rb:227:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:6:1:1]","description":"returns enrolled courses with details","full_description":"Frappe::LmsUtilsService.get_my_courses when user has enrollments returns enrolled courses with details","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":238,"run_time":0.07542441,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:6:1:2]","description":"includes membership details for enrolled courses","full_description":"Frappe::LmsUtilsService.get_my_courses when user has enrollments includes membership details for enrolled courses","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":255,"run_time":0.078590641,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:6:2:1]","description":"returns featured courses as fallback","full_description":"Frappe::LmsUtilsService.get_my_courses when user has no enrollments returns featured courses as fallback","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":265,"run_time":0.017908127,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:6:2:2]","description":"returns popular courses as second fallback","full_description":"Frappe::LmsUtilsService.get_my_courses when user has no enrollments returns popular courses as second fallback","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":274,"run_time":0.0533246,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:6:2:3]","description":"returns empty array when no courses available","full_description":"Frappe::LmsUtilsService.get_my_courses when user has no enrollments returns empty array when no courses available","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":284,"run_time":0.008377474,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:6:3:1]","description":"returns empty array","full_description":"Frappe::LmsUtilsService.get_my_courses when no current user returns empty array","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":294,"run_time":0.0062601,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:7:1:1]","description":"returns enrolled batches with details","full_description":"Frappe::LmsUtilsService.get_my_batches when user has batch enrollments returns enrolled batches with details","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":306,"run_time":0.026916856,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:7:1:2]","description":"includes enrollment details for enrolled batches","full_description":"Frappe::LmsUtilsService.get_my_batches when user has batch enrollments includes enrollment details for enrolled batches","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":321,"run_time":0.025507918,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:7:2:1]","description":"returns upcoming batches as fallback","full_description":"Frappe::LmsUtilsService.get_my_batches when user has no batch enrollments returns upcoming batches as fallback","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":333,"run_time":0.044354482,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:7:2:2]","description":"returns empty array when no batches available","full_description":"Frappe::LmsUtilsService.get_my_batches when user has no batch enrollments returns empty array when no batches available","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":344,"run_time":0.026427904,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:7:3:1]","description":"returns empty array","full_description":"Frappe::LmsUtilsService.get_my_batches when no current user returns empty array","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":353,"run_time":0.025092639,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:7:4:1]","description":"returns upcoming batches as fallback","full_description":"Frappe::LmsUtilsService.get_my_batches when user has no batch enrollments returns upcoming batches as fallback","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":362,"run_time":0.039866748,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:8:1:1]","description":"returns upcoming live classes","full_description":"Frappe::LmsUtilsService.get_my_live_classes when user has batch enrollments with live classes returns upcoming live classes","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":388,"run_time":0.022029139,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:383:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:8:1:2]","description":"includes course title for live classes","full_description":"Frappe::LmsUtilsService.get_my_live_classes when user has batch enrollments with live classes includes course title for live classes","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":406,"run_time":0.02120331,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:383:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:8:1:3]","description":"limits to 2 upcoming classes","full_description":"Frappe::LmsUtilsService.get_my_live_classes when user has batch enrollments with live classes limits to 2 upcoming classes","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":415,"run_time":0.021401139,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:383:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:8:2:1]","description":"returns empty array","full_description":"Frappe::LmsUtilsService.get_my_live_classes when no current user returns empty array","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":427,"run_time":0.020682649,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:383:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:8:3:1]","description":"returns empty array","full_description":"Frappe::LmsUtilsService.get_my_live_classes when no live classes found returns empty array","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":435,"run_time":0.020771967,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `position=' for an instance of BatchCourse","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:383:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:9:1:1]","description":"calculates current and longest streak","full_description":"Frappe::LmsUtilsService.get_streak_info when user has activity calculates current and longest streak","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":447,"run_time":0.074473596,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: lms_course_progresses.user","backtrace":["./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:371:in `each'","./app/services/frappe/lms_utils_service.rb:371:in `fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:208:in `get_streak_info'","./spec/services/frappe/lms_utils_service_spec.rb:453:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: lms_course_progresses.user","  ./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:9:2:1]","description":"returns zero streaks","full_description":"Frappe::LmsUtilsService.get_streak_info when user has no activity returns zero streaks","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":464,"run_time":0.006108183,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: lms_course_progresses.user","backtrace":["./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:371:in `each'","./app/services/frappe/lms_utils_service.rb:371:in `fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:208:in `get_streak_info'","./spec/services/frappe/lms_utils_service_spec.rb:465:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: lms_course_progresses.user","  ./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:9:3:1]","description":"returns empty hash","full_description":"Frappe::LmsUtilsService.get_streak_info when no current user returns empty hash","status":"passed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":477,"run_time":0.005952801,"pending_message":null},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:9:4:1]","description":"skips weekends in streak calculation","full_description":"Frappe::LmsUtilsService.get_streak_info weekend handling skips weekends in streak calculation","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":485,"run_time":0.048424443,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: lms_course_progresses.user","backtrace":["./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:371:in `each'","./app/services/frappe/lms_utils_service.rb:371:in `fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:208:in `get_streak_info'","./spec/services/frappe/lms_utils_service_spec.rb:491:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: lms_course_progresses.user","  ./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:10:1:1]","description":"returns evaluation details","full_description":"Frappe::LmsUtilsService.get_upcoming_evals when user has upcoming evaluations returns evaluation details","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":504,"run_time":0.075378018,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `batch_name=' for an instance of CertificateRequest","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:500:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:10:2:1]","description":"filters evaluations by courses","full_description":"Frappe::LmsUtilsService.get_upcoming_evals with course filter filters evaluations by courses","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":523,"run_time":0.070936166,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `batch_name=' for an instance of CertificateRequest","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:500:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:10:3:1]","description":"filters evaluations by batch","full_description":"Frappe::LmsUtilsService.get_upcoming_evals with batch filter filters evaluations by batch","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":537,"run_time":0.065062759,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `batch_name=' for an instance of CertificateRequest","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:500:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:10:4:1]","description":"returns empty array","full_description":"Frappe::LmsUtilsService.get_upcoming_evals when no current user returns empty array","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":550,"run_time":0.081291916,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `batch_name=' for an instance of CertificateRequest","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:500:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:10:5:1]","description":"returns empty array","full_description":"Frappe::LmsUtilsService.get_upcoming_evals when no upcoming evaluations returns empty array","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":560,"run_time":0.071790689,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `batch_name=' for an instance of CertificateRequest","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:500:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:11:1:1]","description":"updates current lesson in enrollment","full_description":"Frappe::LmsUtilsService.save_current_lesson when user is enrolled updates current lesson in enrollment","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":573,"run_time":0.110975091,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `id' for nil","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:574:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:11:2:1]","description":"returns error","full_description":"Frappe::LmsUtilsService.save_current_lesson when user is not enrolled returns error","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":585,"run_time":0.072056195,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `id' for nil","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:586:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:11:3:1]","description":"returns authentication error","full_description":"Frappe::LmsUtilsService.save_current_lesson when no current user returns authentication error","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":596,"run_time":0.090607385,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `id' for nil","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:597:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:12:1:1]","description":"includes lesson progress dates","full_description":"Frappe::LmsUtilsService private helper methods fetch_activity_dates calculation includes lesson progress dates","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":610,"run_time":0.051509708,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: lms_course_progresses.user","backtrace":["./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:371:in `each'","./app/services/frappe/lms_utils_service.rb:371:in `fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:208:in `get_streak_info'","./spec/services/frappe/lms_utils_service_spec.rb:614:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: lms_course_progresses.user","  ./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:12:1:2]","description":"includes quiz submission dates","full_description":"Frappe::LmsUtilsService private helper methods fetch_activity_dates calculation includes quiz submission dates","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":619,"run_time":0.094985988,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `quiz_title=' for an instance of QuizSubmission","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:621:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:12:1:3]","description":"includes assignment submission dates","full_description":"Frappe::LmsUtilsService private helper methods fetch_activity_dates calculation includes assignment submission dates","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":628,"run_time":0.007408272,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"assignment_submission\"","backtrace":["./spec/services/frappe/lms_utils_service_spec.rb:629:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"assignment_submission\"","  ./spec/services/frappe/lms_utils_service_spec.rb:629:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:12:2:1]","description":"handles single day activity","full_description":"Frappe::LmsUtilsService private helper methods streak calculation edge cases handles single day activity","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":638,"run_time":0.029238071,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: lms_course_progresses.user","backtrace":["./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:371:in `each'","./app/services/frappe/lms_utils_service.rb:371:in `fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:208:in `get_streak_info'","./spec/services/frappe/lms_utils_service_spec.rb:641:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: lms_course_progresses.user","  ./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'"]}},{"id":"./spec/services/frappe/lms_utils_service_spec.rb[1:12:2:2]","description":"handles activity with gaps","full_description":"Frappe::LmsUtilsService private helper methods streak calculation edge cases handles activity with gaps","status":"failed","file_path":"./spec/services/frappe/lms_utils_service_spec.rb","line_number":647,"run_time":0.047124495,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: lms_course_progresses.user","backtrace":["./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:371:in `each'","./app/services/frappe/lms_utils_service.rb:371:in `fetch_activity_dates'","./app/services/frappe/lms_utils_service.rb:208:in `get_streak_info'","./spec/services/frappe/lms_utils_service_spec.rb:651:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: lms_course_progresses.user","  ./app/services/frappe/lms_utils_service.rb:372:in `block in fetch_activity_dates'"]}},{"id":"./spec/services/notifications/mark_all_as_read_service_spec.rb[1:1:1:1]","description":"marks all user notifications as read","full_description":"Notifications::MarkAllAsReadService.call with unread notifications marks all user notifications as read","status":"passed","file_path":"./spec/services/notifications/mark_all_as_read_service_spec.rb","line_number":13,"run_time":0.021778128,"pending_message":null},{"id":"./spec/services/notifications/mark_all_as_read_service_spec.rb[1:1:1:2]","description":"does not affect other users notifications","full_description":"Notifications::MarkAllAsReadService.call with unread notifications does not affect other users notifications","status":"passed","file_path":"./spec/services/notifications/mark_all_as_read_service_spec.rb","line_number":23,"run_time":0.01960177,"pending_message":null},{"id":"./spec/services/notifications/mark_all_as_read_service_spec.rb[1:1:1:3]","description":"only updates unread notifications","full_description":"Notifications::MarkAllAsReadService.call with unread notifications only updates unread notifications","status":"passed","file_path":"./spec/services/notifications/mark_all_as_read_service_spec.rb","line_number":31,"run_time":0.020326472,"pending_message":null},{"id":"./spec/services/notifications/mark_all_as_read_service_spec.rb[1:1:2:1]","description":"returns success","full_description":"Notifications::MarkAllAsReadService.call with no unread notifications returns success","status":"passed","file_path":"./spec/services/notifications/mark_all_as_read_service_spec.rb","line_number":44,"run_time":0.008727601,"pending_message":null},{"id":"./spec/services/notifications/mark_all_as_read_service_spec.rb[1:1:3:1]","description":"returns success","full_description":"Notifications::MarkAllAsReadService.call with no notifications returns success","status":"passed","file_path":"./spec/services/notifications/mark_all_as_read_service_spec.rb","line_number":52,"run_time":0.005953771,"pending_message":null},{"id":"./spec/services/notifications/mark_as_read_service_spec.rb[1:1:1:1]","description":"marks the notification as read","full_description":"Notifications::MarkAsReadService.call with valid notification and authorized user marks the notification as read","status":"passed","file_path":"./spec/services/notifications/mark_as_read_service_spec.rb","line_number":11,"run_time":0.008825022,"pending_message":null},{"id":"./spec/services/notifications/mark_as_read_service_spec.rb[1:1:2:1]","description":"returns error","full_description":"Notifications::MarkAsReadService.call with non-existent notification returns error","status":"passed","file_path":"./spec/services/notifications/mark_as_read_service_spec.rb","line_number":20,"run_time":0.006111327,"pending_message":null},{"id":"./spec/services/notifications/mark_as_read_service_spec.rb[1:1:3:1]","description":"returns unauthorized error","full_description":"Notifications::MarkAsReadService.call with notification belonging to different user returns unauthorized error","status":"passed","file_path":"./spec/services/notifications/mark_as_read_service_spec.rb","line_number":28,"run_time":0.020818018,"pending_message":null},{"id":"./spec/services/notifications/mark_as_read_service_spec.rb[1:1:4:1]","description":"still returns success","full_description":"Notifications::MarkAsReadService.call with already read notification still returns success","status":"passed","file_path":"./spec/services/notifications/mark_as_read_service_spec.rb","line_number":39,"run_time":0.00966231,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:1:1:1]","description":"returns onboarded status immediately","full_description":"Onboarding::OnboardingService.call when user is not a moderator returns onboarded status immediately","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":13,"run_time":0.007670931,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:1:2:1:1]","description":"returns not onboarded with all flags false","full_description":"Onboarding::OnboardingService.call when user is a moderator with no content created returns not onboarded with all flags false","status":"failed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":26,"run_time":0.010085009,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected false\n     got nil\n","backtrace":["./spec/services/onboarding/onboarding_service_spec.rb:33:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:1:2:2:1]","description":"returns partial onboarding status","full_description":"Onboarding::OnboardingService.call when user is a moderator with partial content created returns partial onboarding status","status":"failed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":41,"run_time":0.018511579,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected false\n     got nil\n","backtrace":["./spec/services/onboarding/onboarding_service_spec.rb:48:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:1:2:3:1]","description":"returns fully onboarded status","full_description":"Onboarding::OnboardingService.call when user is a moderator with all content created returns fully onboarded status","status":"failed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":61,"run_time":0.038064594,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected true\n     got nil\n","backtrace":["./spec/services/onboarding/onboarding_service_spec.rb:68:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:1:2:3:2]","description":"updates LMS Settings to mark onboarding complete","full_description":"Onboarding::OnboardingService.call when user is a moderator with all content created updates LMS Settings to mark onboarding complete","status":"failed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":72,"run_time":0.038129246,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected true\n     got false\n","backtrace":["./spec/services/onboarding/onboarding_service_spec.rb:77:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:2:1:1]","description":"returns nil","full_description":"Onboarding::OnboardingService#get_first_course when no courses exist returns nil","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":85,"run_time":0.006683881,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:2:2:1]","description":"returns the first course title","full_description":"Onboarding::OnboardingService#get_first_course when courses exist returns the first course title","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":94,"run_time":0.015575829,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:3:1:1]","description":"returns nil","full_description":"Onboarding::OnboardingService#get_first_batch when no batches exist returns nil","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":105,"run_time":0.00716435,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:3:2:1]","description":"returns the first batch title","full_description":"Onboarding::OnboardingService#get_first_batch when batches exist returns the first batch title","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":114,"run_time":0.025386038,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:4:1:1]","description":"returns false","full_description":"Onboarding::OnboardingService#has_course_moderator_role? when user is nil returns false","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":123,"run_time":0.000709828,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:4:2:1]","description":"returns true","full_description":"Onboarding::OnboardingService#has_course_moderator_role? when user has Moderator role returns true","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":130,"run_time":0.007418718,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:4:3:1]","description":"returns false for Course Creator","full_description":"Onboarding::OnboardingService#has_course_moderator_role? when user has other roles but not Moderator returns false for Course Creator","status":"failed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":140,"run_time":0.00059585,"pending_message":null,"exception":{"class":"KeyError","message":"Trait not registered: \"course_creator\"","backtrace":["./spec/services/onboarding/onboarding_service_spec.rb:137:in `block (4 levels) in \u003cmain\u003e'","./spec/services/onboarding/onboarding_service_spec.rb:141:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"course_creator\"","  ./spec/services/onboarding/onboarding_service_spec.rb:137:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:4:3:2]","description":"returns false for Student","full_description":"Onboarding::OnboardingService#has_course_moderator_role? when user has other roles but not Moderator returns false for Student","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":145,"run_time":0.006985592,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:4:4:1]","description":"returns false","full_description":"Onboarding::OnboardingService#has_course_moderator_role? when user has no roles returns false","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":152,"run_time":0.006498812,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:5:1:1:1]","description":"updates onboarding status to complete","full_description":"Onboarding::OnboardingService private methods #is_onboarding_complete with all content types created updates onboarding status to complete","status":"failed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":175,"run_time":0.041683652,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected true\n     got false\n","backtrace":["./spec/services/onboarding/onboarding_service_spec.rb:178:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:5:1:2:1]","description":"does not update onboarding status","full_description":"Onboarding::OnboardingService private methods #is_onboarding_complete with missing content types does not update onboarding status","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":185,"run_time":0.02140767,"pending_message":null},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:6:1]","description":"uses LmsSetting methods correctly","full_description":"Onboarding::OnboardingService integration with LmsSetting uses LmsSetting methods correctly","status":"failed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":195,"run_time":0.054764619,"pending_message":null,"exception":{"class":"RSpec::Mocks::MockExpectationError","message":"(LmsSetting(id: integer, enable_learner_dashboard: string, enable_moderator_dashboard: string, enable_course_creation: string, default_course_category: string, enable_certificates: string, enable_badges: string, enable_discussions: string, enable_live_classes: string, enable_assignments: string, enable_quizzes: string, enable_programs: string, enable_cohorts: string, zoom_api_key: string, zoom_api_secret: text, default_currency: string, payment_gateway_settings: string, created_at: datetime, updated_at: datetime) (class)).is_onboarding_complete(*(any args))\n    expected: 1 time with any arguments\n    received: 0 times with any arguments","backtrace":["./spec/services/onboarding/onboarding_service_spec.rb:196:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:7:1]","description":"uses efficient queries for content existence checks","full_description":"Onboarding::OnboardingService performance considerations uses efficient queries for content existence checks","status":"failed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":209,"run_time":0.000910992,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant Chapter","backtrace":["./spec/services/onboarding/onboarding_service_spec.rb:211:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/onboarding/onboarding_service_spec.rb[1:7:2]","description":"uses efficient query for first course","full_description":"Onboarding::OnboardingService performance considerations uses efficient query for first course","status":"passed","file_path":"./spec/services/onboarding/onboarding_service_spec.rb","line_number":218,"run_time":0.008813685,"pending_message":null},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:1:1:1]","description":"returns payment required when user has no access","full_description":"Payments::BillingAccessService.call course access validation paid course returns payment required when user has no access","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":16,"run_time":0.016026121,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/billing_access_service.rb:122:in `get_payment_status'","./app/services/payments/billing_access_service.rb:53:in `check_billing_access'","./app/services/payments/billing_access_service.rb:20:in `call'","./app/services/payments/billing_access_service.rb:4:in `call'","./spec/services/payments/billing_access_service_spec.rb:17:in `block (5 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/billing_access_service.rb:122:in `get_payment_status'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:1:1:2]","description":"includes pricing information for paid courses","full_description":"Payments::BillingAccessService.call course access validation paid course includes pricing information for paid courses","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":27,"run_time":0.014643073,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/billing_access_service.rb:122:in `get_payment_status'","./app/services/payments/billing_access_service.rb:53:in `check_billing_access'","./app/services/payments/billing_access_service.rb:20:in `call'","./app/services/payments/billing_access_service.rb:4:in `call'","./spec/services/payments/billing_access_service_spec.rb:28:in `block (5 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/billing_access_service.rb:122:in `get_payment_status'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:1:1:3]","description":"returns access granted when user has enrollment","full_description":"Payments::BillingAccessService.call course access validation paid course returns access granted when user has enrollment","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":35,"run_time":0.01797955,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/billing_access_service.rb:122:in `get_payment_status'","./app/services/payments/billing_access_service.rb:53:in `check_billing_access'","./app/services/payments/billing_access_service.rb:20:in `call'","./app/services/payments/billing_access_service.rb:4:in `call'","./spec/services/payments/billing_access_service_spec.rb:38:in `block (5 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/billing_access_service.rb:122:in `get_payment_status'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:1:2:1]","description":"returns no payment required for free courses","full_description":"Payments::BillingAccessService.call course access validation free course returns no payment required for free courses","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":50,"run_time":0.014939405,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/billing_access_service.rb:122:in `get_payment_status'","./app/services/payments/billing_access_service.rb:53:in `check_billing_access'","./app/services/payments/billing_access_service.rb:20:in `call'","./app/services/payments/billing_access_service.rb:4:in `call'","./spec/services/payments/billing_access_service_spec.rb:51:in `block (5 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/billing_access_service.rb:122:in `get_payment_status'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:2:1:1]","description":"returns payment required when user has no access","full_description":"Payments::BillingAccessService.call batch access validation paid batch returns payment required when user has no access","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":64,"run_time":0.014833009,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `paid_batch=' for an instance of Batch","backtrace":["./spec/services/payments/billing_access_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'","./spec/services/payments/billing_access_service_spec.rb:62:in `block (5 levels) in \u003cmain\u003e'","./spec/services/payments/billing_access_service_spec.rb:65:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:2:1:2]","description":"returns access granted when user has enrollment","full_description":"Payments::BillingAccessService.call batch access validation paid batch returns access granted when user has enrollment","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":73,"run_time":0.019559125,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `paid_batch=' for an instance of Batch","backtrace":["./spec/services/payments/billing_access_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'","./spec/services/payments/billing_access_service_spec.rb:74:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:2:2:1]","description":"returns no payment required for free batches","full_description":"Payments::BillingAccessService.call batch access validation free batch returns no payment required for free batches","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":87,"run_time":0.015329844,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `paid_batch=' for an instance of Batch","backtrace":["./spec/services/payments/billing_access_service_spec.rb:8:in `block (2 levels) in \u003cmain\u003e'","./spec/services/payments/billing_access_service_spec.rb:85:in `block (5 levels) in \u003cmain\u003e'","./spec/services/payments/billing_access_service_spec.rb:88:in `block (5 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:3:1]","description":"returns payment required when user has no access","full_description":"Payments::BillingAccessService.call program access validation returns payment required when user has no access","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":100,"run_time":0.000571742,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/payments/billing_access_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","./spec/services/payments/billing_access_service_spec.rb:98:in `block (4 levels) in \u003cmain\u003e'","./spec/services/payments/billing_access_service_spec.rb:101:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/payments/billing_access_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:3:2]","description":"returns access granted when user has membership","full_description":"Payments::BillingAccessService.call program access validation returns access granted when user has membership","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":108,"run_time":0.005870001,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/payments/billing_access_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'","./spec/services/payments/billing_access_service_spec.rb:109:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/payments/billing_access_service_spec.rb:9:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:4:1]","description":"includes payment status when payment exists","full_description":"Payments::BillingAccessService.call payment status tracking includes payment status when payment exists","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":122,"run_time":0.027779393,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/billing_access_service_spec.rb:123:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:4:2]","description":"returns nil payment status when no payment exists","full_description":"Payments::BillingAccessService.call payment status tracking returns nil payment status when no payment exists","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":130,"run_time":0.020711743,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/billing_access_service.rb:122:in `get_payment_status'","./app/services/payments/billing_access_service.rb:53:in `check_billing_access'","./app/services/payments/billing_access_service.rb:20:in `call'","./app/services/payments/billing_access_service.rb:4:in `call'","./spec/services/payments/billing_access_service_spec.rb:131:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/billing_access_service.rb:122:in `get_payment_status'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:5:1]","description":"fails for nil user","full_description":"Payments::BillingAccessService.call validation failures fails for nil user","status":"passed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":138,"run_time":0.013052519,"pending_message":null},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:5:2]","description":"fails for missing item_type","full_description":"Payments::BillingAccessService.call validation failures fails for missing item_type","status":"passed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":145,"run_time":0.016867704,"pending_message":null},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:5:3]","description":"fails for missing item_id","full_description":"Payments::BillingAccessService.call validation failures fails for missing item_id","status":"passed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":152,"run_time":0.007749664,"pending_message":null},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:5:4]","description":"fails for non-existent item","full_description":"Payments::BillingAccessService.call validation failures fails for non-existent item","status":"passed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":159,"run_time":0.007123999,"pending_message":null},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:6:1]","description":"returns proper success response format","full_description":"Payments::BillingAccessService.call Frappe API compatibility returns proper success response format","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":168,"run_time":0.016292316,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/billing_access_service.rb:122:in `get_payment_status'","./app/services/payments/billing_access_service.rb:53:in `check_billing_access'","./app/services/payments/billing_access_service.rb:20:in `call'","./app/services/payments/billing_access_service.rb:4:in `call'","./spec/services/payments/billing_access_service_spec.rb:169:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/billing_access_service.rb:122:in `get_payment_status'"]}},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:6:2]","description":"returns proper error response format","full_description":"Payments::BillingAccessService.call Frappe API compatibility returns proper error response format","status":"passed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":176,"run_time":0.006425339,"pending_message":null},{"id":"./spec/services/payments/billing_access_service_spec.rb[1:1:6:3]","description":"includes all required access fields","full_description":"Payments::BillingAccessService.call Frappe API compatibility includes all required access fields","status":"failed","file_path":"./spec/services/payments/billing_access_service_spec.rb","line_number":184,"run_time":0.020283867,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/billing_access_service.rb:122:in `get_payment_status'","./app/services/payments/billing_access_service.rb:53:in `check_billing_access'","./app/services/payments/billing_access_service.rb:20:in `call'","./app/services/payments/billing_access_service.rb:4:in `call'","./spec/services/payments/billing_access_service_spec.rb:185:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/billing_access_service.rb:122:in `get_payment_status'"]}},{"id":"./spec/services/payments/order_summary_service_spec.rb[1:1:1:1]","description":"returns complete order summary","full_description":"Payments::OrderSummaryService.call with valid payment and authorized user returns complete order summary","status":"failed","file_path":"./spec/services/payments/order_summary_service_spec.rb","line_number":11,"run_time":0.017138537,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/order_summary_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/order_summary_service_spec.rb[1:1:1:2]","description":"includes payment logs","full_description":"Payments::OrderSummaryService.call with valid payment and authorized user includes payment logs","status":"failed","file_path":"./spec/services/payments/order_summary_service_spec.rb","line_number":29,"run_time":0.014620717,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/order_summary_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/order_summary_service_spec.rb[1:1:2:1]","description":"returns error for non-existent payment","full_description":"Payments::OrderSummaryService.call with invalid payment ID returns error for non-existent payment","status":"failed","file_path":"./spec/services/payments/order_summary_service_spec.rb","line_number":40,"run_time":0.024578468,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/order_summary_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/order_summary_service_spec.rb[1:1:3:1]","description":"returns access denied error","full_description":"Payments::OrderSummaryService.call with unauthorized user returns access denied error","status":"failed","file_path":"./spec/services/payments/order_summary_service_spec.rb","line_number":49,"run_time":0.016235558,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/order_summary_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/order_summary_service_spec.rb[1:1:4:1]","description":"returns user not found error","full_description":"Payments::OrderSummaryService.call with nil user returns user not found error","status":"failed","file_path":"./spec/services/payments/order_summary_service_spec.rb","line_number":58,"run_time":0.014405691,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/order_summary_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/order_summary_service_spec.rb[1:1:5:1]","description":"correctly identifies course payments","full_description":"Payments::OrderSummaryService.call item type detection correctly identifies course payments","status":"failed","file_path":"./spec/services/payments/order_summary_service_spec.rb","line_number":70,"run_time":0.015417931,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/order_summary_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/order_summary_service_spec.rb[1:1:5:2]","description":"correctly identifies batch payments","full_description":"Payments::OrderSummaryService.call item type detection correctly identifies batch payments","status":"failed","file_path":"./spec/services/payments/order_summary_service_spec.rb","line_number":78,"run_time":0.021213888,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/order_summary_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/order_summary_service_spec.rb[1:1:5:3]","description":"correctly identifies program payments","full_description":"Payments::OrderSummaryService.call item type detection correctly identifies program payments","status":"failed","file_path":"./spec/services/payments/order_summary_service_spec.rb","line_number":86,"run_time":0.01831265,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/order_summary_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/order_summary_service_spec.rb[1:1:6:1]","description":"returns proper success response format","full_description":"Payments::OrderSummaryService.call Frappe API compatibility returns proper success response format","status":"failed","file_path":"./spec/services/payments/order_summary_service_spec.rb","line_number":96,"run_time":0.016660271,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/order_summary_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/order_summary_service_spec.rb[1:1:6:2]","description":"returns proper error response format","full_description":"Payments::OrderSummaryService.call Frappe API compatibility returns proper error response format","status":"failed","file_path":"./spec/services/payments/order_summary_service_spec.rb","line_number":104,"run_time":0.015661411,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/order_summary_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:1]","description":"returns only active gateways","full_description":"Payments::PaymentGatewayService.call returns only active gateways","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":30,"run_time":0.01035506,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:2]","description":"includes gateway statistics","full_description":"Payments::PaymentGatewayService.call includes gateway statistics","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":42,"run_time":0.001888667,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:3]","description":"includes fee information","full_description":"Payments::PaymentGatewayService.call includes fee information","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":51,"run_time":0.001886765,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:4]","description":"includes supported currencies","full_description":"Payments::PaymentGatewayService.call includes supported currencies","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":59,"run_time":0.001474541,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:5]","description":"includes last payment timestamp","full_description":"Payments::PaymentGatewayService.call includes last payment timestamp","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":67,"run_time":0.001453189,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:6:1]","description":"handles gateways with no payments","full_description":"Payments::PaymentGatewayService.call with no payments handles gateways with no payments","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":83,"run_time":0.001143134,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:7:1]","description":"calculates correct success rate","full_description":"Payments::PaymentGatewayService.call success rate calculation calculates correct success rate","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":98,"run_time":0.001048046,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:7:2]","description":"returns 0 for gateways with no payments","full_description":"Payments::PaymentGatewayService.call success rate calculation returns 0 for gateways with no payments","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":106,"run_time":0.001033783,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:8:1]","description":"returns exact field structure matching Frappe LMS","full_description":"Payments::PaymentGatewayService.call Frappe API compatibility returns exact field structure matching Frappe LMS","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":117,"run_time":0.001202866,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:8:2]","description":"formats dates correctly","full_description":"Payments::PaymentGatewayService.call Frappe API compatibility formats dates correctly","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":132,"run_time":0.000982364,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_gateway_service_spec.rb[1:1:8:3]","description":"includes proper gateway metadata","full_description":"Payments::PaymentGatewayService.call Frappe API compatibility includes proper gateway metadata","status":"failed","file_path":"./spec/services/payments/payment_gateway_service_spec.rb","line_number":141,"run_time":0.001160341,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Settings missing required fields: credentials","backtrace":["./spec/services/payments/payment_gateway_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:1:1]","description":"creates payment and returns payment link","full_description":"Payments::PaymentLinkService.call successful payment link generation for course creates payment and returns payment link","status":"failed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":18,"run_time":0.022223314,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/payment_link_service.rb:77:in `find_existing_payment'","./app/services/payments/payment_link_service.rb:26:in `call'","./app/services/payments/payment_link_service.rb:4:in `call'","./spec/services/payments/payment_link_service_spec.rb:25:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/payment_link_service.rb:77:in `find_existing_payment'"]}},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:1:2]","description":"creates payment record with correct details","full_description":"Payments::PaymentLinkService.call successful payment link generation for course creates payment record with correct details","status":"failed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":34,"run_time":0.017968852,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/payment_link_service.rb:77:in `find_existing_payment'","./app/services/payments/payment_link_service.rb:26:in `call'","./app/services/payments/payment_link_service.rb:4:in `call'","./spec/services/payments/payment_link_service_spec.rb:38:in `block (5 levels) in \u003cmain\u003e'","./spec/services/payments/payment_link_service_spec.rb:37:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/payment_link_service.rb:77:in `find_existing_payment'"]}},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:2:1]","description":"creates payment for batch","full_description":"Payments::PaymentLinkService.call successful payment link generation for batch creates payment for batch","status":"failed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":54,"run_time":0.017197649,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `paid_batch=' for an instance of Batch","backtrace":["./spec/services/payments/payment_link_service_spec.rb:6:in `block (2 levels) in \u003cmain\u003e'","./spec/services/payments/payment_link_service_spec.rb:52:in `block (4 levels) in \u003cmain\u003e'","./spec/services/payments/payment_link_service_spec.rb:57:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:3:1]","description":"returns error when user already has access","full_description":"Payments::PaymentLinkService.call user already has access returns error when user already has access","status":"passed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":73,"run_time":0.024724065,"pending_message":null},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:4:1]","description":"returns existing payment when pending payment exists","full_description":"Payments::PaymentLinkService.call existing pending payment returns existing payment when pending payment exists","status":"failed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":88,"run_time":0.015280958,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `course=' for an instance of Payment","backtrace":["./spec/services/payments/payment_link_service_spec.rb:85:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:5:1]","description":"fails for nil user","full_description":"Payments::PaymentLinkService.call validation failures fails for nil user","status":"passed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":98,"run_time":0.009532928,"pending_message":null},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:5:2]","description":"fails for missing item_type","full_description":"Payments::PaymentLinkService.call validation failures fails for missing item_type","status":"passed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":105,"run_time":0.013901525,"pending_message":null},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:5:3]","description":"fails for missing item_id","full_description":"Payments::PaymentLinkService.call validation failures fails for missing item_id","status":"passed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":112,"run_time":0.006662839,"pending_message":null},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:5:4]","description":"fails for non-existent item","full_description":"Payments::PaymentLinkService.call validation failures fails for non-existent item","status":"passed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":119,"run_time":0.006688037,"pending_message":null},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:5:5]","description":"fails for invalid item_type","full_description":"Payments::PaymentLinkService.call validation failures fails for invalid item_type","status":"passed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":126,"run_time":0.013818176,"pending_message":null},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:6:1]","description":"uses specified gateway","full_description":"Payments::PaymentLinkService.call gateway integration uses specified gateway","status":"failed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":137,"run_time":0.016509506,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/payment_link_service.rb:77:in `find_existing_payment'","./app/services/payments/payment_link_service.rb:26:in `call'","./app/services/payments/payment_link_service.rb:4:in `call'","./spec/services/payments/payment_link_service_spec.rb:140:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/payment_link_service.rb:77:in `find_existing_payment'"]}},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:7:1]","description":"returns proper success response format","full_description":"Payments::PaymentLinkService.call Frappe API compatibility returns proper success response format","status":"failed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":149,"run_time":0.029787167,"pending_message":null,"exception":{"class":"ActiveRecord::StatementInvalid","message":"SQLite3::SQLException: no such column: payments.course","backtrace":["./app/services/payments/payment_link_service.rb:77:in `find_existing_payment'","./app/services/payments/payment_link_service.rb:26:in `call'","./app/services/payments/payment_link_service.rb:4:in `call'","./spec/services/payments/payment_link_service_spec.rb:152:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::SQLException:","  no such column: payments.course","  ./app/services/payments/payment_link_service.rb:77:in `find_existing_payment'"]}},{"id":"./spec/services/payments/payment_link_service_spec.rb[1:1:7:2]","description":"returns proper error response format","full_description":"Payments::PaymentLinkService.call Frappe API compatibility returns proper error response format","status":"passed","file_path":"./spec/services/payments/payment_link_service_spec.rb","line_number":162,"run_time":0.008665513,"pending_message":null},{"id":"./spec/services/paystack/paystack_integration_spec.rb[1:1:1:1]","description":"initializes USSD payment correctly","full_description":"Paystack Integration Nigerian Payment Methods USSD Payment initializes USSD payment correctly","status":"failed","file_path":"./spec/services/paystack/paystack_integration_spec.rb","line_number":16,"run_time":0.001632287,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant PaystackModule","backtrace":["./spec/services/paystack/paystack_integration_spec.rb:17:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_integration_spec.rb[1:1:2:1]","description":"initializes bank transfer payment correctly","full_description":"Paystack Integration Nigerian Payment Methods Bank Transfer Payment initializes bank transfer payment correctly","status":"failed","file_path":"./spec/services/paystack/paystack_integration_spec.rb","line_number":41,"run_time":0.001620658,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant PaystackModule","backtrace":["./spec/services/paystack/paystack_integration_spec.rb:42:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_integration_spec.rb[1:1:3:1]","description":"initializes mobile money payment for MTN","full_description":"Paystack Integration Nigerian Payment Methods Mobile Money Payment initializes mobile money payment for MTN","status":"failed","file_path":"./spec/services/paystack/paystack_integration_spec.rb","line_number":70,"run_time":0.000658779,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant PaystackModule","backtrace":["./spec/services/paystack/paystack_integration_spec.rb:71:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_integration_spec.rb[1:1:3:2]","description":"returns error for missing phone number","full_description":"Paystack Integration Nigerian Payment Methods Mobile Money Payment returns error for missing phone number","status":"failed","file_path":"./spec/services/paystack/paystack_integration_spec.rb","line_number":93,"run_time":0.000635983,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant PaystackModule","backtrace":["./spec/services/paystack/paystack_integration_spec.rb:97:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_integration_spec.rb[1:1:4:1]","description":"correctly identifies Nigerian mobile providers","full_description":"Paystack Integration Nigerian Payment Methods Mobile Provider Detection correctly identifies Nigerian mobile providers","status":"failed","file_path":"./spec/services/paystack/paystack_integration_spec.rb","line_number":106,"run_time":0.000550148,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant PaystackModule","backtrace":["./spec/services/paystack/paystack_integration_spec.rb:107:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_integration_spec.rb[1:1:5:1]","description":"retrieves list of supported banks","full_description":"Paystack Integration Nigerian Payment Methods Bank Operations retrieves list of supported banks","status":"failed","file_path":"./spec/services/paystack/paystack_integration_spec.rb","line_number":124,"run_time":0.001286379,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant PaystackModule","backtrace":["./spec/services/paystack/paystack_integration_spec.rb:125:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_integration_spec.rb[1:1:5:2]","description":"resolves account number details","full_description":"Paystack Integration Nigerian Payment Methods Bank Operations resolves account number details","status":"failed","file_path":"./spec/services/paystack/paystack_integration_spec.rb","line_number":147,"run_time":0.000619787,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant PaystackModule","backtrace":["./spec/services/paystack/paystack_integration_spec.rb:148:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_integration_spec.rb[1:1:6:1]","description":"validates correct webhook signature","full_description":"Paystack Integration Nigerian Payment Methods Webhook Security validates correct webhook signature","status":"failed","file_path":"./spec/services/paystack/paystack_integration_spec.rb","line_number":172,"run_time":0.000539282,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant PaystackModule","backtrace":["./spec/services/paystack/paystack_integration_spec.rb:173:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_integration_spec.rb[1:1:6:2]","description":"rejects invalid webhook signature","full_description":"Paystack Integration Nigerian Payment Methods Webhook Security rejects invalid webhook signature","status":"failed","file_path":"./spec/services/paystack/paystack_integration_spec.rb","line_number":180,"run_time":0.001278917,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant PaystackModule","backtrace":["./spec/services/paystack/paystack_integration_spec.rb:181:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_integration_spec.rb[1:1:7:1]","description":"returns comprehensive list of mobile money providers","full_description":"Paystack Integration Nigerian Payment Methods Supported Mobile Money Providers returns comprehensive list of mobile money providers","status":"failed","file_path":"./spec/services/paystack/paystack_integration_spec.rb","line_number":188,"run_time":0.000524899,"pending_message":null,"exception":{"class":"NameError","message":"uninitialized constant PaystackModule","backtrace":["./spec/services/paystack/paystack_integration_spec.rb:189:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:1:1:1]","description":"initializes a card payment transaction","full_description":"PaystackIntegration::PaystackService#initialize_transaction with card payment initializes a card payment transaction","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":12,"run_time":0.01868495,"pending_message":null,"exception":{"class":"ActiveRecord::NotNullViolation","message":"SQLite3::ConstraintException: NOT NULL constraint failed: payments.payable_type","backtrace":["./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'","./spec/services/paystack/paystack_service_spec.rb:22:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  NOT NULL constraint failed: payments.payable_type","  ./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:1:2:1]","description":"initializes a USSD payment","full_description":"PaystackIntegration::PaystackService#initialize_transaction with USSD payment initializes a USSD payment","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":36,"run_time":0.00899638,"pending_message":null,"exception":{"class":"ActiveRecord::NotNullViolation","message":"SQLite3::ConstraintException: NOT NULL constraint failed: payments.payable_type","backtrace":["./spec/services/paystack/paystack_service_spec.rb:34:in `block (4 levels) in \u003cmain\u003e'","./spec/services/paystack/paystack_service_spec.rb:45:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  NOT NULL constraint failed: payments.payable_type","  ./spec/services/paystack/paystack_service_spec.rb:34:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:1:3:1]","description":"initializes a bank transfer payment","full_description":"PaystackIntegration::PaystackService#initialize_transaction with bank transfer payment initializes a bank transfer payment","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":58,"run_time":0.008553969,"pending_message":null,"exception":{"class":"ActiveRecord::NotNullViolation","message":"SQLite3::ConstraintException: NOT NULL constraint failed: payments.payable_type","backtrace":["./spec/services/paystack/paystack_service_spec.rb:56:in `block (4 levels) in \u003cmain\u003e'","./spec/services/paystack/paystack_service_spec.rb:70:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  NOT NULL constraint failed: payments.payable_type","  ./spec/services/paystack/paystack_service_spec.rb:56:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:1:4:1]","description":"initializes a mobile money payment","full_description":"PaystackIntegration::PaystackService#initialize_transaction with mobile money payment initializes a mobile money payment","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":88,"run_time":0.008332695,"pending_message":null,"exception":{"class":"ActiveRecord::NotNullViolation","message":"SQLite3::ConstraintException: NOT NULL constraint failed: payments.payable_type","backtrace":["./spec/services/paystack/paystack_service_spec.rb:86:in `block (4 levels) in \u003cmain\u003e'","./spec/services/paystack/paystack_service_spec.rb:97:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  NOT NULL constraint failed: payments.payable_type","  ./spec/services/paystack/paystack_service_spec.rb:86:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:2:1]","description":"verifies a successful transaction","full_description":"PaystackIntegration::PaystackService#verify_transaction verifies a successful transaction","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":109,"run_time":0.002021395,"pending_message":null,"exception":{"class":"NoMethodError","message":"private method `verify_transaction' called for an instance of PaystackIntegration::PaystackService","backtrace":["./spec/services/paystack/paystack_service_spec.rb:119:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:2:2]","description":"handles failed transaction","full_description":"PaystackIntegration::PaystackService#verify_transaction handles failed transaction","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":125,"run_time":0.001701305,"pending_message":null,"exception":{"class":"NoMethodError","message":"private method `verify_transaction' called for an instance of PaystackIntegration::PaystackService","backtrace":["./spec/services/paystack/paystack_service_spec.rb:134:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:3:1]","description":"creates USSD payment","full_description":"PaystackIntegration::PaystackService#initialize_ussd_payment creates USSD payment","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":142,"run_time":0.008024813,"pending_message":null,"exception":{"class":"ActiveRecord::NotNullViolation","message":"SQLite3::ConstraintException: NOT NULL constraint failed: payments.payable_type","backtrace":["./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'","./spec/services/paystack/paystack_service_spec.rb:151:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  NOT NULL constraint failed: payments.payable_type","  ./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:4:1]","description":"creates bank transfer payment","full_description":"PaystackIntegration::PaystackService#initialize_bank_transfer creates bank transfer payment","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":159,"run_time":0.007963738,"pending_message":null,"exception":{"class":"ActiveRecord::NotNullViolation","message":"SQLite3::ConstraintException: NOT NULL constraint failed: payments.payable_type","backtrace":["./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'","./spec/services/paystack/paystack_service_spec.rb:171:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  NOT NULL constraint failed: payments.payable_type","  ./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:5:1]","description":"creates mobile money payment for MTN number","full_description":"PaystackIntegration::PaystackService#initialize_mobile_money_payment creates mobile money payment for MTN number","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":179,"run_time":0.007749865,"pending_message":null,"exception":{"class":"ActiveRecord::NotNullViolation","message":"SQLite3::ConstraintException: NOT NULL constraint failed: payments.payable_type","backtrace":["./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'","./spec/services/paystack/paystack_service_spec.rb:188:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  NOT NULL constraint failed: payments.payable_type","  ./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:5:2]","description":"returns error for missing phone number","full_description":"PaystackIntegration::PaystackService#initialize_mobile_money_payment returns error for missing phone number","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":194,"run_time":0.006391977,"pending_message":null,"exception":{"class":"ActiveRecord::NotNullViolation","message":"SQLite3::ConstraintException: NOT NULL constraint failed: payments.payable_type","backtrace":["./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'","./spec/services/paystack/paystack_service_spec.rb:195:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  NOT NULL constraint failed: payments.payable_type","  ./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:6:1]","description":"detects mtn for +2348031234567","full_description":"PaystackIntegration::PaystackService#determine_mobile_provider detects mtn for +2348031234567","status":"passed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":213,"run_time":0.001661804,"pending_message":null},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:6:2]","description":"detects airtel for +2348021234567","full_description":"PaystackIntegration::PaystackService#determine_mobile_provider detects airtel for +2348021234567","status":"passed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":213,"run_time":0.001725894,"pending_message":null},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:6:3]","description":"detects glo for +2348051234567","full_description":"PaystackIntegration::PaystackService#determine_mobile_provider detects glo for +2348051234567","status":"passed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":213,"run_time":0.00146782,"pending_message":null},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:6:4]","description":"detects 9mobile for +2348091234567","full_description":"PaystackIntegration::PaystackService#determine_mobile_provider detects 9mobile for +2348091234567","status":"passed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":213,"run_time":0.001483164,"pending_message":null},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:6:5]","description":"detects unknown for +2347001234567","full_description":"PaystackIntegration::PaystackService#determine_mobile_provider detects unknown for +2347001234567","status":"passed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":213,"run_time":0.00165936,"pending_message":null},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:7:1]","description":"retrieves list of supported banks","full_description":"PaystackIntegration::PaystackService#get_banks retrieves list of supported banks","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":220,"run_time":0.001593146,"pending_message":null,"exception":{"class":"NoMethodError","message":"private method `get_banks' called for an instance of PaystackIntegration::PaystackService","backtrace":["./spec/services/paystack/paystack_service_spec.rb:229:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:8:1]","description":"resolves account number details","full_description":"PaystackIntegration::PaystackService#resolve_account_number resolves account number details","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":237,"run_time":0.001654933,"pending_message":null,"exception":{"class":"NoMethodError","message":"private method `resolve_account_number' called for an instance of PaystackIntegration::PaystackService","backtrace":["./spec/services/paystack/paystack_service_spec.rb:247:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:9:1]","description":"validates correct webhook signature","full_description":"PaystackIntegration::PaystackService#validate_webhook_signature validates correct webhook signature","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":255,"run_time":0.003218162,"pending_message":null,"exception":{"class":"NoMethodError","message":"private method `validate_webhook_signature' called for an instance of PaystackIntegration::PaystackService","backtrace":["./spec/services/paystack/paystack_service_spec.rb:260:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:9:2]","description":"rejects invalid webhook signature","full_description":"PaystackIntegration::PaystackService#validate_webhook_signature rejects invalid webhook signature","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":263,"run_time":0.002477226,"pending_message":null,"exception":{"class":"NoMethodError","message":"private method `validate_webhook_signature' called for an instance of PaystackIntegration::PaystackService","backtrace":["./spec/services/paystack/paystack_service_spec.rb:266:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:10:1]","description":"processes successful charge webhook","full_description":"PaystackIntegration::PaystackService#process_webhook processes successful charge webhook","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":271,"run_time":0.008062723,"pending_message":null,"exception":{"class":"ActiveRecord::NotNullViolation","message":"SQLite3::ConstraintException: NOT NULL constraint failed: payments.payable_type","backtrace":["./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'","./spec/services/paystack/paystack_service_spec.rb:272:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  NOT NULL constraint failed: payments.payable_type","  ./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:10:2]","description":"processes failed charge webhook","full_description":"PaystackIntegration::PaystackService#process_webhook processes failed charge webhook","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":283,"run_time":0.007399437,"pending_message":null,"exception":{"class":"ActiveRecord::NotNullViolation","message":"SQLite3::ConstraintException: NOT NULL constraint failed: payments.payable_type","backtrace":["./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'","./spec/services/paystack/paystack_service_spec.rb:284:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  NOT NULL constraint failed: payments.payable_type","  ./spec/services/paystack/paystack_service_spec.rb:7:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:11:1]","description":"retrieves USSD providers","full_description":"PaystackIntegration::PaystackService#get_ussd_providers retrieves USSD providers","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":297,"run_time":0.002044651,"pending_message":null,"exception":{"class":"NoMethodError","message":"private method `get_ussd_providers' called for an instance of PaystackIntegration::PaystackService","backtrace":["./spec/services/paystack/paystack_service_spec.rb:306:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/paystack/paystack_service_spec.rb[1:12:1]","description":"returns list of supported mobile money providers","full_description":"PaystackIntegration::PaystackService#get_mobile_money_providers returns list of supported mobile money providers","status":"failed","file_path":"./spec/services/paystack/paystack_service_spec.rb","line_number":314,"run_time":0.001637536,"pending_message":null,"exception":{"class":"NoMethodError","message":"private method `get_mobile_money_providers' called for an instance of PaystackIntegration::PaystackService","backtrace":["./spec/services/paystack/paystack_service_spec.rb:315:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_details_service_spec.rb[1:1:1:1]","description":"returns program details with courses","full_description":"Programs::ProgramDetailsService.call with valid program returns program details with courses","status":"failed","file_path":"./spec/services/programs/program_details_service_spec.rb","line_number":16,"run_time":0.00044844,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_details_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_details_service_spec.rb[1:1:1:2]","description":"includes courses in correct order","full_description":"Programs::ProgramDetailsService.call with valid program includes courses in correct order","status":"failed","file_path":"./spec/services/programs/program_details_service_spec.rb","line_number":27,"run_time":0.000327771,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_details_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_details_service_spec.rb[1:1:1:3]","description":"includes course details","full_description":"Programs::ProgramDetailsService.call with valid program includes course details","status":"failed","file_path":"./spec/services/programs/program_details_service_spec.rb","line_number":38,"run_time":0.000302211,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_details_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_details_service_spec.rb[1:1:2:1]","description":"includes membership information when user is enrolled","full_description":"Programs::ProgramDetailsService.call with user membership includes membership information when user is enrolled","status":"failed","file_path":"./spec/services/programs/program_details_service_spec.rb","line_number":54,"run_time":0.000584793,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_details_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_details_service_spec.rb[1:1:3:1]","description":"includes zero progress when user is not enrolled","full_description":"Programs::ProgramDetailsService.call without user membership includes zero progress when user is not enrolled","status":"failed","file_path":"./spec/services/programs/program_details_service_spec.rb","line_number":69,"run_time":0.000311938,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_details_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_details_service_spec.rb[1:1:4:1]","description":"returns nil for non-existent program","full_description":"Programs::ProgramDetailsService.call with invalid program returns nil for non-existent program","status":"failed","file_path":"./spec/services/programs/program_details_service_spec.rb","line_number":78,"run_time":0.000315793,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_details_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_details_service_spec.rb[1:1:5:1]","description":"returns exact field structure matching Frappe LMS","full_description":"Programs::ProgramDetailsService.call Frappe API compatibility returns exact field structure matching Frappe LMS","status":"failed","file_path":"./spec/services/programs/program_details_service_spec.rb","line_number":86,"run_time":0.000300909,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_details_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_details_service_spec.rb[1:1:5:2]","description":"formats dates correctly","full_description":"Programs::ProgramDetailsService.call Frappe API compatibility formats dates correctly","status":"failed","file_path":"./spec/services/programs/program_details_service_spec.rb","line_number":106,"run_time":0.000292637,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_details_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_details_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:1:1]","description":"creates program membership","full_description":"Programs::ProgramEnrollmentService.enroll_in_program successful enrollment creates program membership","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":16,"run_time":0.000337266,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:1:2]","description":"auto-enrolls user in all program courses","full_description":"Programs::ProgramEnrollmentService.enroll_in_program successful enrollment auto-enrolls user in all program courses","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":23,"run_time":0.000306889,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:1:3]","description":"returns success response with membership data","full_description":"Programs::ProgramEnrollmentService.enroll_in_program successful enrollment returns success response with membership data","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":38,"run_time":0.000310373,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:1:4]","description":"sets initial progress to 0.0","full_description":"Programs::ProgramEnrollmentService.enroll_in_program successful enrollment sets initial progress to 0.0","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":46,"run_time":0.000297614,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:2:1]","description":"fails for non-existent program","full_description":"Programs::ProgramEnrollmentService.enroll_in_program validation failures fails for non-existent program","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":55,"run_time":0.000289433,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:2:2]","description":"fails for nil user","full_description":"Programs::ProgramEnrollmentService.enroll_in_program validation failures fails for nil user","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":62,"run_time":0.000310214,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:2:3]","description":"fails for unpublished program","full_description":"Programs::ProgramEnrollmentService.enroll_in_program validation failures fails for unpublished program","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":69,"run_time":0.000290234,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:2:4]","description":"returns success for already enrolled user","full_description":"Programs::ProgramEnrollmentService.enroll_in_program validation failures returns success for already enrolled user","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":77,"run_time":0.000299789,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:3:1]","description":"does not create duplicate course enrollments","full_description":"Programs::ProgramEnrollmentService.enroll_in_program course enrollment handling does not create duplicate course enrollments","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":89,"run_time":0.00029537,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:3:2]","description":"handles programs with no courses","full_description":"Programs::ProgramEnrollmentService.enroll_in_program course enrollment handling handles programs with no courses","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":102,"run_time":0.000285855,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:4:1]","description":"returns proper success response format","full_description":"Programs::ProgramEnrollmentService.enroll_in_program Frappe API compatibility returns proper success response format","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":115,"run_time":0.000309693,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/program_enrollment_service_spec.rb[1:1:4:2]","description":"returns proper error response format","full_description":"Programs::ProgramEnrollmentService.enroll_in_program Frappe API compatibility returns proper error response format","status":"failed","file_path":"./spec/services/programs/program_enrollment_service_spec.rb","line_number":124,"run_time":0.000286638,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","./spec/services/programs/program_enrollment_service_spec.rb:10:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/program_enrollment_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/programs_service_spec.rb[1:1:1:1]","description":"returns enrolled and published programs separately","full_description":"Programs::ProgramsService.call without filters returns enrolled and published programs separately","status":"failed","file_path":"./spec/services/programs/programs_service_spec.rb","line_number":16,"run_time":0.000360092,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/programs_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/programs_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/programs_service_spec.rb[1:1:1:2]","description":"includes enrolled programs in enrolled section","full_description":"Programs::ProgramsService.call without filters includes enrolled programs in enrolled section","status":"failed","file_path":"./spec/services/programs/programs_service_spec.rb","line_number":25,"run_time":0.000299588,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/programs_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/programs_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/programs_service_spec.rb[1:1:1:3]","description":"includes published programs excluding enrolled ones","full_description":"Programs::ProgramsService.call without filters includes published programs excluding enrolled ones","status":"failed","file_path":"./spec/services/programs/programs_service_spec.rb","line_number":36,"run_time":0.000292998,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/programs_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/programs_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/programs_service_spec.rb[1:1:1:4]","description":"excludes unpublished programs","full_description":"Programs::ProgramsService.call without filters excludes unpublished programs","status":"failed","file_path":"./spec/services/programs/programs_service_spec.rb","line_number":46,"run_time":0.000291905,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/programs_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/programs_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/programs/programs_service_spec.rb[1:1:2:1]","description":"returns exact structure matching Frappe LMS","full_description":"Programs::ProgramsService.call Frappe API compatibility returns exact structure matching Frappe LMS","status":"failed","file_path":"./spec/services/programs/programs_service_spec.rb","line_number":55,"run_time":0.000301159,"pending_message":null,"exception":{"class":"KeyError","message":"Factory not registered: \"lms_program\"","backtrace":["./spec/services/programs/programs_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","KeyError:","  key not found: \"lms_program\"","  ./spec/services/programs/programs_service_spec.rb:5:in `block (2 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/settings/branding_service_spec.rb[1:1:1]","description":"returns branding information with proper structure","full_description":"Settings::BrandingService.call returns branding information with proper structure","status":"passed","file_path":"./spec/services/settings/branding_service_spec.rb","line_number":7,"run_time":0.000391582,"pending_message":null},{"id":"./spec/services/settings/branding_service_spec.rb[1:1:2]","description":"returns default branding values when no settings exist","full_description":"Settings::BrandingService.call returns default branding values when no settings exist","status":"passed","file_path":"./spec/services/settings/branding_service_spec.rb","line_number":17,"run_time":0.000274489,"pending_message":null},{"id":"./spec/services/settings/branding_service_spec.rb[1:1:3]","description":"loads branding settings from LmsSetting model","full_description":"Settings::BrandingService.call loads branding settings from LmsSetting model","status":"failed","file_path":"./spec/services/settings/branding_service_spec.rb","line_number":25,"run_time":0.000443883,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'key' for LmsSetting.","backtrace":["./spec/services/settings/branding_service_spec.rb:27:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `key=' for an instance of LmsSetting","  ./spec/services/settings/branding_service_spec.rb:27:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/settings/branding_service_spec.rb[1:1:4]","description":"handles boolean settings correctly","full_description":"Settings::BrandingService.call handles boolean settings correctly","status":"failed","file_path":"./spec/services/settings/branding_service_spec.rb","line_number":38,"run_time":0.000452035,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'key' for LmsSetting.","backtrace":["./spec/services/settings/branding_service_spec.rb:39:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `key=' for an instance of LmsSetting","  ./spec/services/settings/branding_service_spec.rb:39:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/settings/branding_service_spec.rb[1:1:5]","description":"returns all required branding fields","full_description":"Settings::BrandingService.call returns all required branding fields","status":"passed","file_path":"./spec/services/settings/branding_service_spec.rb","line_number":48,"run_time":0.000409049,"pending_message":null},{"id":"./spec/services/settings/lms_settings_service_spec.rb[1:1:1:1]","description":"returns the value for the specified field","full_description":"Settings::LmsSettingsService.call with field parameter returns the value for the specified field","status":"failed","file_path":"./spec/services/settings/lms_settings_service_spec.rb","line_number":8,"run_time":0.000318147,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'key' for LmsSetting.","backtrace":["./spec/services/settings/lms_settings_service_spec.rb:10:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `key=' for an instance of LmsSetting","  ./spec/services/settings/lms_settings_service_spec.rb:10:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/settings/lms_settings_service_spec.rb[1:1:1:2]","description":"returns false for non-existent field","full_description":"Settings::LmsSettingsService.call with field parameter returns false for non-existent field","status":"passed","file_path":"./spec/services/settings/lms_settings_service_spec.rb","line_number":20,"run_time":0.000673492,"pending_message":null},{"id":"./spec/services/settings/lms_settings_service_spec.rb[1:1:1:3]","description":"returns boolean value for Check fieldtype","full_description":"Settings::LmsSettingsService.call with field parameter returns boolean value for Check fieldtype","status":"failed","file_path":"./spec/services/settings/lms_settings_service_spec.rb","line_number":25,"run_time":0.0002947,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'key' for LmsSetting.","backtrace":["./spec/services/settings/lms_settings_service_spec.rb:26:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `key=' for an instance of LmsSetting","  ./spec/services/settings/lms_settings_service_spec.rb:26:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/settings/lms_settings_service_spec.rb[1:1:2:1]","description":"returns all settings wrapped in message","full_description":"Settings::LmsSettingsService.call without field parameter returns all settings wrapped in message","status":"failed","file_path":"./spec/services/settings/lms_settings_service_spec.rb","line_number":38,"run_time":0.000285515,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'key' for LmsSetting.","backtrace":["./spec/services/settings/lms_settings_service_spec.rb:39:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `key=' for an instance of LmsSetting","  ./spec/services/settings/lms_settings_service_spec.rb:39:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/settings/lms_settings_service_spec.rb[1:1:2:2]","description":"returns default settings when no database settings exist","full_description":"Settings::LmsSettingsService.call without field parameter returns default settings when no database settings exist","status":"passed","file_path":"./spec/services/settings/lms_settings_service_spec.rb","line_number":51,"run_time":0.000663435,"pending_message":null},{"id":"./spec/services/settings/lms_settings_service_spec.rb[1:2:1:1]","description":"loads settings from database","full_description":"Settings::LmsSettingsService private methods #load_database_settings loads settings from database","status":"failed","file_path":"./spec/services/settings/lms_settings_service_spec.rb","line_number":63,"run_time":0.000299287,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'key' for LmsSetting.","backtrace":["./spec/services/settings/lms_settings_service_spec.rb:64:in `block (4 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `key=' for an instance of LmsSetting","  ./spec/services/settings/lms_settings_service_spec.rb:64:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/settings/lms_settings_service_spec.rb[1:2:1:2]","description":"returns empty hash when database has no settings","full_description":"Settings::LmsSettingsService private methods #load_database_settings returns empty hash when database has no settings","status":"passed","file_path":"./spec/services/settings/lms_settings_service_spec.rb","line_number":74,"run_time":0.00047409,"pending_message":null},{"id":"./spec/services/settings/lms_settings_service_spec.rb[1:2:2:1]","description":"returns comprehensive default settings","full_description":"Settings::LmsSettingsService private methods #default_settings returns comprehensive default settings","status":"passed","file_path":"./spec/services/settings/lms_settings_service_spec.rb","line_number":81,"run_time":0.000321112,"pending_message":null},{"id":"./spec/services/settings/sidebar_settings_service_spec.rb[1:1:1]","description":"returns sidebar settings with proper structure","full_description":"Settings::SidebarSettingsService.call returns sidebar settings with proper structure","status":"passed","file_path":"./spec/services/settings/sidebar_settings_service_spec.rb","line_number":7,"run_time":0.000321171,"pending_message":null},{"id":"./spec/services/settings/sidebar_settings_service_spec.rb[1:1:2]","description":"returns default sidebar settings (all enabled)","full_description":"Settings::SidebarSettingsService.call returns default sidebar settings (all enabled)","status":"passed","file_path":"./spec/services/settings/sidebar_settings_service_spec.rb","line_number":16,"run_time":0.000258704,"pending_message":null},{"id":"./spec/services/settings/sidebar_settings_service_spec.rb[1:1:3]","description":"loads sidebar settings from LmsSetting model","full_description":"Settings::SidebarSettingsService.call loads sidebar settings from LmsSetting model","status":"failed","file_path":"./spec/services/settings/sidebar_settings_service_spec.rb","line_number":34,"run_time":0.000277934,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'key' for LmsSetting.","backtrace":["./spec/services/settings/sidebar_settings_service_spec.rb:36:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `key=' for an instance of LmsSetting","  ./spec/services/settings/sidebar_settings_service_spec.rb:36:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/settings/sidebar_settings_service_spec.rb[1:1:4]","description":"converts boolean values to 1/0 format","full_description":"Settings::SidebarSettingsService.call converts boolean values to 1/0 format","status":"failed","file_path":"./spec/services/settings/sidebar_settings_service_spec.rb","line_number":49,"run_time":0.000287038,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'key' for LmsSetting.","backtrace":["./spec/services/settings/sidebar_settings_service_spec.rb:50:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `key=' for an instance of LmsSetting","  ./spec/services/settings/sidebar_settings_service_spec.rb:50:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/settings/sidebar_settings_service_spec.rb[1:1:5]","description":"returns all required sidebar fields","full_description":"Settings::SidebarSettingsService.call returns all required sidebar fields","status":"passed","file_path":"./spec/services/settings/sidebar_settings_service_spec.rb","line_number":59,"run_time":0.000451004,"pending_message":null},{"id":"./spec/services/settings/sidebar_settings_service_spec.rb[1:1:6]","description":"handles web_pages as empty array for now","full_description":"Settings::SidebarSettingsService.call handles web_pages as empty array for now","status":"passed","file_path":"./spec/services/settings/sidebar_settings_service_spec.rb","line_number":73,"run_time":0.00025609,"pending_message":null},{"id":"./spec/services/settings/translations_service_spec.rb[1:1:1]","description":"returns translations with proper structure","full_description":"Settings::TranslationsService.call returns translations with proper structure","status":"passed","file_path":"./spec/services/settings/translations_service_spec.rb","line_number":7,"run_time":0.000303172,"pending_message":null},{"id":"./spec/services/settings/translations_service_spec.rb[1:1:2]","description":"returns default translations","full_description":"Settings::TranslationsService.call returns default translations","status":"passed","file_path":"./spec/services/settings/translations_service_spec.rb","line_number":16,"run_time":0.000244122,"pending_message":null},{"id":"./spec/services/settings/translations_service_spec.rb[1:1:3]","description":"merges custom translations from database","full_description":"Settings::TranslationsService.call merges custom translations from database","status":"failed","file_path":"./spec/services/settings/translations_service_spec.rb","line_number":24,"run_time":0.000284634,"pending_message":null,"exception":{"class":"ActiveModel::UnknownAttributeError","message":"unknown attribute 'key' for LmsSetting.","backtrace":["./spec/services/settings/translations_service_spec.rb:26:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","NoMethodError:","  undefined method `key=' for an instance of LmsSetting","  ./spec/services/settings/translations_service_spec.rb:26:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/settings/translations_service_spec.rb[1:1:4]","description":"handles database errors gracefully","full_description":"Settings::TranslationsService.call handles database errors gracefully","status":"passed","file_path":"./spec/services/settings/translations_service_spec.rb","line_number":37,"run_time":0.000553844,"pending_message":null},{"id":"./spec/services/settings/translations_service_spec.rb[1:1:5]","description":"returns comprehensive translation set","full_description":"Settings::TranslationsService.call returns comprehensive translation set","status":"passed","file_path":"./spec/services/settings/translations_service_spec.rb","line_number":48,"run_time":0.000717861,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:1:1]","description":"returns user information in Frappe-compatible format","full_description":"Users::UserInfoService.call with a regular student user returns user information in Frappe-compatible format","status":"failed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":11,"run_time":0.007931318,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: \"chassidy_schmitt\"\n     got: \"estelaestela\"\n\n(compared using ==)\n","backtrace":["./spec/services/users/user_info_service_spec.rb:17:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:1:2]","description":"includes site information","full_description":"Users::UserInfoService.call with a regular student user includes site information","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":30,"run_time":0.006557603,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:2:1]","description":"returns instructor-specific roles","full_description":"Users::UserInfoService.call with an instructor user returns instructor-specific roles","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":41,"run_time":0.006853295,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:3:1]","description":"returns moderator-specific roles","full_description":"Users::UserInfoService.call with a moderator user returns moderator-specific roles","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":50,"run_time":0.006858164,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:4:1]","description":"returns evaluator-specific roles","full_description":"Users::UserInfoService.call with an evaluator user returns evaluator-specific roles","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":59,"run_time":0.008114764,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:5:1]","description":"calculates course progress correctly","full_description":"Users::UserInfoService.call with course enrollments calculates course progress correctly","status":"failed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":75,"run_time":0.067492932,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Lesson must exist, Lesson can't be blank","backtrace":["./spec/services/users/user_info_service_spec.rb:77:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:5:2]","description":"returns 0 progress for no completed lessons","full_description":"Users::UserInfoService.call with course enrollments returns 0 progress for no completed lessons","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":85,"run_time":0.08984798,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:5:3]","description":"calculates progress correctly across multiple courses","full_description":"Users::UserInfoService.call with course enrollments calculates progress correctly across multiple courses","status":"failed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":91,"run_time":0.150832775,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Lesson must exist, Lesson can't be blank","backtrace":["./spec/services/users/user_info_service_spec.rb:96:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:6:1]","description":"handles user without full_name","full_description":"Users::UserInfoService.call edge cases handles user without full_name","status":"failed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":106,"run_time":0.00843212,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: \"wm.weber@koelpin-baumbach.example\"\n     got: nil\n\n(compared using ==)\n","backtrace":["./spec/services/users/user_info_service_spec.rb:111:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:6:2]","description":"handles user without user_image","full_description":"Users::UserInfoService.call edge cases handles user without user_image","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":114,"run_time":0.00747755,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:6:3]","description":"handles user with enabled flag","full_description":"Users::UserInfoService.call edge cases handles user with enabled flag","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":122,"run_time":0.007553717,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:1:6:4]","description":"handles user with Administrator user_type","full_description":"Users::UserInfoService.call edge cases handles user with Administrator user_type","status":"failed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":130,"run_time":0.007301084,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"\nexpected: \"System Manager\"\n     got: \"Administrator\"\n\n(compared using ==)\n","backtrace":["./spec/services/users/user_info_service_spec.rb:135:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:1:1]","description":"returns 0 for user with no enrollments","full_description":"Users::UserInfoService private methods #calculate_overall_course_progress returns 0 for user with no enrollments","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":145,"run_time":0.005508776,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:1:2]","description":"calculates progress correctly for completed lessons","full_description":"Users::UserInfoService private methods #calculate_overall_course_progress calculates progress correctly for completed lessons","status":"failed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":151,"run_time":0.078778034,"pending_message":null,"exception":{"class":"ActiveRecord::RecordInvalid","message":"Validation failed: Lesson must exist, Lesson can't be blank","backtrace":["./spec/services/users/user_info_service_spec.rb:156:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:1:3]","description":"handles division by zero gracefully","full_description":"Users::UserInfoService private methods #calculate_overall_course_progress handles division by zero gracefully","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":162,"run_time":0.017868696,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:2:1]","description":"maps Course Creator correctly","full_description":"Users::UserInfoService private methods #map_user_type_to_frappe maps Course Creator correctly","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":172,"run_time":0.005958969,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:2:2]","description":"maps Moderator correctly","full_description":"Users::UserInfoService private methods #map_user_type_to_frappe maps Moderator correctly","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":177,"run_time":0.005307744,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:2:3]","description":"maps Batch Evaluator correctly","full_description":"Users::UserInfoService private methods #map_user_type_to_frappe maps Batch Evaluator correctly","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":182,"run_time":0.019355978,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:2:4]","description":"maps Administrator to System Manager","full_description":"Users::UserInfoService private methods #map_user_type_to_frappe maps Administrator to System Manager","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":187,"run_time":0.006942123,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:2:5]","description":"defaults to LMS Student for unknown types","full_description":"Users::UserInfoService private methods #map_user_type_to_frappe defaults to LMS Student for unknown types","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":192,"run_time":0.007216482,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:2:6]","description":"defaults to LMS Student for nil type","full_description":"Users::UserInfoService private methods #map_user_type_to_frappe defaults to LMS Student for nil type","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":197,"run_time":0.006518032,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:3:1]","description":"returns base roles for student","full_description":"Users::UserInfoService private methods #user_roles returns base roles for student","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":204,"run_time":0.007320604,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:3:2]","description":"returns instructor roles for Course Creator","full_description":"Users::UserInfoService private methods #user_roles returns instructor roles for Course Creator","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":209,"run_time":0.007268574,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:3:3]","description":"removes duplicate roles","full_description":"Users::UserInfoService private methods #user_roles removes duplicate roles","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":216,"run_time":0.007119,"pending_message":null},{"id":"./spec/services/users/user_info_service_spec.rb[1:2:4:1]","description":"returns consistent site information","full_description":"Users::UserInfoService private methods #site_info returns consistent site information","status":"passed","file_path":"./spec/services/users/user_info_service_spec.rb","line_number":225,"run_time":0.005757605,"pending_message":null},{"id":"./spec/services/users/users_service_spec.rb[1:1:1]","description":"returns users data in Frappe-compatible format","full_description":"Users::UsersService.call returns users data in Frappe-compatible format","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":9,"run_time":0.016458966,"pending_message":null,"exception":{"class":"RSpec::Expectations::ExpectationNotMetError","message":"expected `{1=\u003e{:full_name=\u003e\"John Doe\", :name=\u003e1, :user_image=\u003e\"john.jpg\"}, 2=\u003e{:full_name=\u003e\"Jane Smith\", :name=...jane.jpg\"}, 3=\u003e{:full_name=\u003e\"Bob Johnson\", :name=\u003e3, :user_image=\u003e\"http://satterfield.test/chance\"}}.has_key?(:data)` to be truthy, got false","backtrace":["./spec/services/users/users_service_spec.rb:13:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:2]","description":"includes all required user fields","full_description":"Users::UsersService.call includes all required user fields","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":17,"run_time":0.015031288,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `find' for nil","backtrace":["./spec/services/users/users_service_spec.rb:20:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:3]","description":"maps user data correctly","full_description":"Users::UsersService.call maps user data correctly","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":30,"run_time":0.015080246,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `find' for nil","backtrace":["./spec/services/users/users_service_spec.rb:33:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:4]","description":"handles users without full_name","full_description":"Users::UsersService.call handles users without full_name","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":43,"run_time":0.019359563,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `find' for nil","backtrace":["./spec/services/users/users_service_spec.rb:48:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:5]","description":"handles users without user_image","full_description":"Users::UsersService.call handles users without user_image","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":52,"run_time":0.014609561,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `find' for nil","backtrace":["./spec/services/users/users_service_spec.rb:55:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:6]","description":"limits results to 10 users","full_description":"Users::UsersService.call limits results to 10 users","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":59,"run_time":0.094711731,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `length' for nil","backtrace":["./spec/services/users/users_service_spec.rb:64:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:7]","description":"returns users in database order","full_description":"Users::UsersService.call returns users in database order","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":67,"run_time":0.026218098,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `map' for nil","backtrace":["./spec/services/users/users_service_spec.rb:75:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:8]","description":"returns empty array when no users exist","full_description":"Users::UsersService.call returns empty array when no users exist","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":79,"run_time":0.022512593,"pending_message":null,"exception":{"class":"ActiveRecord::InvalidForeignKey","message":"SQLite3::ConstraintException: FOREIGN KEY constraint failed","backtrace":["./spec/services/users/users_service_spec.rb:80:in `block (3 levels) in \u003cmain\u003e'","------------------","--- Caused by: ---","SQLite3::ConstraintException:","  FOREIGN KEY constraint failed","  ./spec/services/users/users_service_spec.rb:80:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:9]","description":"selects only required fields from database","full_description":"Users::UsersService.call selects only required fields from database","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":87,"run_time":0.021335768,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `first' for nil","backtrace":["./spec/services/users/users_service_spec.rb:91:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:10:1]","description":"returns all users up to limit","full_description":"Users::UsersService.call with multiple users returns all users up to limit","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":102,"run_time":0.040915284,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `length' for nil","backtrace":["./spec/services/users/users_service_spec.rb:105:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:10:2]","description":"returns consistent data structure","full_description":"Users::UsersService.call with multiple users returns consistent data structure","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":109,"run_time":0.042866639,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `each' for nil","backtrace":["./spec/services/users/users_service_spec.rb:112:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:11:1]","description":"generates username from email prefix","full_description":"Users::UsersService.call username generation generates username from email prefix","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":121,"run_time":0.020725324,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `find' for nil","backtrace":["./spec/services/users/users_service_spec.rb:126:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:11:2]","description":"handles simple email addresses","full_description":"Users::UsersService.call username generation handles simple email addresses","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":130,"run_time":0.021040668,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `find' for nil","backtrace":["./spec/services/users/users_service_spec.rb:135:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:12:1]","description":"parses first and last names correctly","full_description":"Users::UsersService.call name parsing parses first and last names correctly","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":141,"run_time":0.029169183,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `find' for nil","backtrace":["./spec/services/users/users_service_spec.rb:146:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:12:2]","description":"handles single name users","full_description":"Users::UsersService.call name parsing handles single name users","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":151,"run_time":0.024281183,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `find' for nil","backtrace":["./spec/services/users/users_service_spec.rb:156:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:1:12:3]","description":"handles nil full_name","full_description":"Users::UsersService.call name parsing handles nil full_name","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":161,"run_time":0.024038095,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `find' for nil","backtrace":["./spec/services/users/users_service_spec.rb:166:in `block (4 levels) in \u003cmain\u003e'"]}},{"id":"./spec/services/users/users_service_spec.rb[1:2:1]","description":"uses efficient database queries","full_description":"Users::UsersService performance considerations uses efficient database queries","status":"failed","file_path":"./spec/services/users/users_service_spec.rb","line_number":174,"run_time":0.105542153,"pending_message":null,"exception":{"class":"NoMethodError","message":"undefined method `query_database_at_most' for #\u003cRSpec::ExampleGroups::UsersUsersService::PerformanceConsiderations:0x00007ff918f3cd70\u003e","backtrace":["./spec/services/users/users_service_spec.rb:177:in `block (3 levels) in \u003cmain\u003e'"]}},{"id":"./spec/system/batch_creation_spec.rb[1:1]","description":"creates a new batch with all fields and manages students","full_description":"Batch Creation creates a new batch with all fields and manages students","status":"failed","file_path":"./spec/system/batch_creation_spec.rb","line_number":14,"run_time":40.376575912,"pending_message":null,"exception":{"class":"RSpec::Core::MultipleExceptionError","message":"unable to connect to /config/.cache/selenium/chromedriver/linux64/142.0.7444.175/chromedriver 127.0.0.1:9515\n\nunable to connect to /config/.cache/selenium/chromedriver/linux64/142.0.7444.175/chromedriver 127.0.0.1:9515","backtrace":[]}},{"id":"./spec/system/course_creation_spec.rb[1:1]","description":"creates a new course with all fields","full_description":"Course Creation creates a new course with all fields","status":"failed","file_path":"./spec/system/course_creation_spec.rb","line_number":11,"run_time":40.166392357,"pending_message":null,"exception":{"class":"RSpec::Core::MultipleExceptionError","message":"unable to connect to /config/.cache/selenium/chromedriver/linux64/142.0.7444.175/chromedriver 127.0.0.1:9515\n\nunable to connect to /config/.cache/selenium/chromedriver/linux64/142.0.7444.175/chromedriver 127.0.0.1:9515","backtrace":[]}},{"id":"./spec/system/onboarding_flow_spec.rb[1:1:1]","description":"shows persona form for system managers with no courses","full_description":"Onboarding UI Flow Persona Form Flow (exact replica of Frappe persona onboarding) shows persona form for system managers with no courses","status":"","file_path":"./spec/system/onboarding_flow_spec.rb","line_number":13,"run_time":15.526479012,"pending_message":null}],"summary":{"duration":118.251439238,"example_count":1046,"failure_count":493,"pending_count":0,"errors_outside_of_examples_count":0},"summary_line":"1046 examples, 493 failures"}